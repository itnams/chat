var AE=Object.defineProperty,xE=Object.defineProperties;var NE=Object.getOwnPropertyDescriptors;var dg=Object.getOwnPropertySymbols;var RE=Object.prototype.hasOwnProperty,OE=Object.prototype.propertyIsEnumerable;var fg=(t,e,n)=>e in t?AE(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,v=(t,e)=>{for(var n in e||={})RE.call(e,n)&&fg(t,n,e[n]);if(dg)for(var n of dg(e))OE.call(e,n)&&fg(t,n,e[n]);return t},Z=(t,e)=>xE(t,NE(e));var S=(t,e,n)=>new Promise((r,i)=>{var o=l=>{try{a(n.next(l))}catch(c){i(c)}},s=l=>{try{a(n.throw(l))}catch(c){i(c)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);a((n=n.apply(t,e)).next())});var hg=null;var wc=1,pg=Symbol("SIGNAL");function W(t){let e=hg;return hg=t,e}var gg={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function PE(t){if(!(Ec(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===wc)){if(!t.producerMustRecompute(t)&&!Cc(t)){t.dirty=!1,t.lastCleanEpoch=wc;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=wc}}function mg(t){return t&&(t.nextProducerIndex=0),W(t)}function vg(t,e){if(W(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Ec(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Dc(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Cc(t){gs(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(PE(n),r!==n.version))return!0}return!1}function yg(t){if(gs(t),Ec(t))for(let e=0;e<t.producerNode.length;e++)Dc(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Dc(t,e){if(FE(t),gs(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)Dc(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];gs(i),i.producerIndexOfThis[r]=e}}function Ec(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function gs(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function FE(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function kE(){throw new Error}var LE=kE;function _g(t){LE=t}function M(t){return typeof t=="function"}function Nr(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var ms=Nr(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Hi(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var ue=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(M(r))try{r()}catch(o){e=o instanceof ms?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{wg(o)}catch(s){e=e??[],s instanceof ms?e=[...e,...s.errors]:e.push(s)}}if(e)throw new ms(e)}}add(e){var n;if(e&&e!==this)if(this.closed)wg(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Hi(n,e)}remove(e){let{_finalizers:n}=this;n&&Hi(n,e),e instanceof t&&e._removeParent(this)}};ue.EMPTY=(()=>{let t=new ue;return t.closed=!0,t})();var bc=ue.EMPTY;function vs(t){return t instanceof ue||t&&"closed"in t&&M(t.remove)&&M(t.add)&&M(t.unsubscribe)}function wg(t){M(t)?t():t.unsubscribe()}var lt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Rr={setTimeout(t,e,...n){let{delegate:r}=Rr;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Rr;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function ys(t){Rr.setTimeout(()=>{let{onUnhandledError:e}=lt;if(e)e(t);else throw t})}function Wi(){}var Cg=Ic("C",void 0,void 0);function Dg(t){return Ic("E",void 0,t)}function Eg(t){return Ic("N",t,void 0)}function Ic(t,e,n){return{kind:t,value:e,error:n}}var Bn=null;function Or(t){if(lt.useDeprecatedSynchronousErrorHandling){let e=!Bn;if(e&&(Bn={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Bn;if(Bn=null,n)throw r}}else t()}function bg(t){lt.useDeprecatedSynchronousErrorHandling&&Bn&&(Bn.errorThrown=!0,Bn.error=t)}var $n=class extends ue{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,vs(e)&&e.add(this)):this.destination=BE}static create(e,n,r){return new Pr(e,n,r)}next(e){this.isStopped?Mc(Eg(e),this):this._next(e)}error(e){this.isStopped?Mc(Dg(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Mc(Cg,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},VE=Function.prototype.bind;function Sc(t,e){return VE.call(t,e)}var Tc=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){_s(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){_s(r)}else _s(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){_s(n)}}},Pr=class extends $n{constructor(e,n,r){super();let i;if(M(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&lt.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Sc(e.next,o),error:e.error&&Sc(e.error,o),complete:e.complete&&Sc(e.complete,o)}):i=e}this.destination=new Tc(i)}};function _s(t){lt.useDeprecatedSynchronousErrorHandling?bg(t):ys(t)}function jE(t){throw t}function Mc(t,e){let{onStoppedNotification:n}=lt;n&&Rr.setTimeout(()=>n(t,e))}var BE={closed:!0,next:Wi,error:jE,complete:Wi};var Fr=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Be(t){return t}function Ac(...t){return xc(t)}function xc(t){return t.length===0?Be:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var Y=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=UE(n)?n:new Pr(n,r,i);return Or(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=Ig(r),new r((i,o)=>{let s=new Pr({next:a=>{try{n(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Fr](){return this}pipe(...n){return xc(n)(this)}toPromise(n){return n=Ig(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function Ig(t){var e;return(e=t??lt.Promise)!==null&&e!==void 0?e:Promise}function $E(t){return t&&M(t.next)&&M(t.error)&&M(t.complete)}function UE(t){return t&&t instanceof $n||$E(t)&&vs(t)}function Nc(t){return M(t?.lift)}function H(t){return e=>{if(Nc(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function U(t,e,n,r,i){return new Rc(t,e,n,r,i)}var Rc=class extends $n{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function kr(){return H((t,e)=>{let n=null;t._refCount++;let r=U(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var Lr=class extends Y{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Nc(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ue;let n=this.getSubject();e.add(this.source.subscribe(U(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ue.EMPTY)}return e}refCount(){return kr()(this)}};var Sg=Nr(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ce=(()=>{class t extends Y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new ws(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Sg}next(n){Or(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Or(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Or(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?bc:(this.currentObservers=null,o.push(n),new ue(()=>{this.currentObservers=null,Hi(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new Y;return n.source=this,n}}return t.create=(e,n)=>new ws(e,n),t})(),ws=class extends Ce{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:bc}};var ie=class extends Ce{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var $e=new Y(t=>t.complete());function Mg(t){return t&&M(t.schedule)}function Tg(t){return t[t.length-1]}function Cs(t){return M(Tg(t))?t.pop():void 0}function sn(t){return Mg(Tg(t))?t.pop():void 0}function xg(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{c(r.next(u))}catch(d){s(d)}}function l(u){try{c(r.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}function Ag(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Un(t){return this instanceof Un?(this.v=t,this):new Un(t)}function Ng(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(f){r[f]&&(i[f]=function(h){return new Promise(function(p,y){o.push([f,h,p,y])>1||a(f,h)})})}function a(f,h){try{l(r[f](h))}catch(p){d(o[0][3],p)}}function l(f){f.value instanceof Un?Promise.resolve(f.value.v).then(c,u):d(o[0][2],f)}function c(f){a("next",f)}function u(f){a("throw",f)}function d(f,h){f(h),o.shift(),o.length&&a(o[0][0],o[0][1])}}function Rg(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Ag=="function"?Ag(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,l){s=t[o](s),i(a,l,s.done,s.value)})}}function i(o,s,a,l){Promise.resolve(l).then(function(c){o({value:c,done:a})},s)}}var Ds=t=>t&&typeof t.length=="number"&&typeof t!="function";function Es(t){return M(t?.then)}function bs(t){return M(t[Fr])}function Is(t){return Symbol.asyncIterator&&M(t?.[Symbol.asyncIterator])}function Ss(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function HE(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ms=HE();function Ts(t){return M(t?.[Ms])}function As(t){return Ng(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Un(n.read());if(i)return yield Un(void 0);yield yield Un(r)}}finally{n.releaseLock()}})}function xs(t){return M(t?.getReader)}function se(t){if(t instanceof Y)return t;if(t!=null){if(bs(t))return WE(t);if(Ds(t))return GE(t);if(Es(t))return zE(t);if(Is(t))return Og(t);if(Ts(t))return qE(t);if(xs(t))return YE(t)}throw Ss(t)}function WE(t){return new Y(e=>{let n=t[Fr]();if(M(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function GE(t){return new Y(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function zE(t){return new Y(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,ys)})}function qE(t){return new Y(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function Og(t){return new Y(e=>{QE(t,e).catch(n=>e.error(n))})}function YE(t){return Og(As(t))}function QE(t,e){var n,r,i,o;return xg(this,void 0,void 0,function*(){try{for(n=Rg(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function xe(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function Ns(t,e=0){return H((n,r)=>{n.subscribe(U(r,i=>xe(r,t,()=>r.next(i),e),()=>xe(r,t,()=>r.complete(),e),i=>xe(r,t,()=>r.error(i),e)))})}function Rs(t,e=0){return H((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function Pg(t,e){return se(t).pipe(Rs(e),Ns(e))}function Fg(t,e){return se(t).pipe(Rs(e),Ns(e))}function kg(t,e){return new Y(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function Lg(t,e){return new Y(n=>{let r;return xe(n,e,()=>{r=t[Ms](),xe(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>M(r?.return)&&r.return()})}function Os(t,e){if(!t)throw new Error("Iterable cannot be null");return new Y(n=>{xe(n,e,()=>{let r=t[Symbol.asyncIterator]();xe(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function Vg(t,e){return Os(As(t),e)}function jg(t,e){if(t!=null){if(bs(t))return Pg(t,e);if(Ds(t))return kg(t,e);if(Es(t))return Fg(t,e);if(Is(t))return Os(t,e);if(Ts(t))return Lg(t,e);if(xs(t))return Vg(t,e)}throw Ss(t)}function ne(t,e){return e?jg(t,e):se(t)}function b(...t){let e=sn(t);return ne(t,e)}function Vr(t,e){let n=M(t)?t:()=>t,r=i=>i.error(n());return new Y(e?i=>e.schedule(r,0,i):r)}function Oc(t){return!!t&&(t instanceof Y||M(t.lift)&&M(t.subscribe))}var Ht=Nr(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function R(t,e){return H((n,r)=>{let i=0;n.subscribe(U(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:KE}=Array;function ZE(t,e){return KE(e)?t(...e):t(e)}function Ps(t){return R(e=>ZE(t,e))}var{isArray:JE}=Array,{getPrototypeOf:XE,prototype:eb,keys:tb}=Object;function Fs(t){if(t.length===1){let e=t[0];if(JE(e))return{args:e,keys:null};if(nb(e)){let n=tb(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function nb(t){return t&&typeof t=="object"&&XE(t)===eb}function ks(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function an(...t){let e=sn(t),n=Cs(t),{args:r,keys:i}=Fs(t);if(r.length===0)return ne([],e);let o=new Y(rb(r,e,i?s=>ks(i,s):Be));return n?o.pipe(Ps(n)):o}function rb(t,e,n=Be){return r=>{Bg(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let l=0;l<i;l++)Bg(e,()=>{let c=ne(t[l],e),u=!1;c.subscribe(U(r,d=>{o[l]=d,u||(u=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function Bg(t,e,n){t?xe(n,t,e):e()}function $g(t,e,n,r,i,o,s,a){let l=[],c=0,u=0,d=!1,f=()=>{d&&!l.length&&!c&&e.complete()},h=y=>c<r?p(y):l.push(y),p=y=>{o&&e.next(y),c++;let F=!1;se(n(y,u++)).subscribe(U(e,B=>{i?.(B),o?h(B):e.next(B)},()=>{F=!0},void 0,()=>{if(F)try{for(c--;l.length&&c<r;){let B=l.shift();s?xe(e,s,()=>p(B)):p(B)}f()}catch(B){e.error(B)}}))};return t.subscribe(U(e,h,()=>{d=!0,f()})),()=>{a?.()}}function ae(t,e,n=1/0){return M(e)?ae((r,i)=>R((o,s)=>e(r,o,i,s))(se(t(r,i))),n):(typeof e=="number"&&(n=e),H((r,i)=>$g(r,i,t,n)))}function jr(t=1/0){return ae(Be,t)}function Ug(){return jr(1)}function Br(...t){return Ug()(ne(t,sn(t)))}function Ls(t){return new Y(e=>{se(t()).subscribe(e)})}function Pc(...t){let e=Cs(t),{args:n,keys:r}=Fs(t),i=new Y(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),l=s,c=s;for(let u=0;u<s;u++){let d=!1;se(n[u]).subscribe(U(o,f=>{d||(d=!0,c--),a[u]=f},()=>l--,void 0,()=>{(!l||!d)&&(c||o.next(r?ks(r,a):a),o.complete())}))}});return e?i.pipe(Ps(e)):i}function Ke(t,e){return H((n,r)=>{let i=0;n.subscribe(U(r,o=>t.call(e,o,i++)&&r.next(o)))})}function ln(t){return H((e,n)=>{let r=null,i=!1,o;r=e.subscribe(U(n,void 0,void 0,s=>{o=se(t(s,ln(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function Hg(t,e,n,r,i){return(o,s)=>{let a=n,l=e,c=0;o.subscribe(U(s,u=>{let d=c++;l=a?t(l,u,d):(a=!0,u),r&&s.next(l)},i&&(()=>{a&&s.next(l),s.complete()})))}}function Hn(t,e){return M(e)?ae(t,e,1):ae(t,1)}function cn(t){return H((e,n)=>{let r=!1;e.subscribe(U(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Wt(t){return t<=0?()=>$e:H((e,n)=>{let r=0;e.subscribe(U(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Fc(t){return R(()=>t)}function Vs(t=ib){return H((e,n)=>{let r=!1;e.subscribe(U(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function ib(){return new Ht}function Gi(t){return H((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Dt(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Ke((i,o)=>t(i,o,r)):Be,Wt(1),n?cn(e):Vs(()=>new Ht))}function $r(t){return t<=0?()=>$e:H((e,n)=>{let r=[];e.subscribe(U(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function kc(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Ke((i,o)=>t(i,o,r)):Be,$r(1),n?cn(e):Vs(()=>new Ht))}function Lc(t,e){return H(Hg(t,e,arguments.length>=2,!0))}function Wn(...t){let e=sn(t);return H((n,r)=>{(e?Br(t,n,e):Br(t,n)).subscribe(r)})}function Ze(t,e){return H((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(U(r,l=>{i?.unsubscribe();let c=0,u=o++;se(t(l,u)).subscribe(i=U(r,d=>r.next(e?e(l,d,u,c++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Vc(t){return H((e,n)=>{se(t).subscribe(U(n,()=>n.complete(),Wi)),!n.closed&&e.subscribe(n)})}function ve(t,e,n){let r=M(t)||e||n?{next:t,error:e,complete:n}:t;return r?H((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(U(o,l=>{var c;(c=r.next)===null||c===void 0||c.call(r,l),o.next(l)},()=>{var l;a=!1,(l=r.complete)===null||l===void 0||l.call(r),o.complete()},l=>{var c;a=!1,(c=r.error)===null||c===void 0||c.call(r,l),o.error(l)},()=>{var l,c;a&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(c=r.finalize)===null||c===void 0||c.call(r)}))}):Be}var Mm="https://g.co/ng/security#xss",_=class extends Error{constructor(e,n){super(Yu(e,n)),this.code=e}};function Yu(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function ro(t){return{toString:t}.toString()}var js="__parameters__";function ob(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function Tm(t,e,n){return ro(()=>{let r=ob(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(l,c,u){let d=l.hasOwnProperty(js)?l[js]:Object.defineProperty(l,js,{value:[]})[js];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(s),l}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var Gn=globalThis;function J(t){for(let e in t)if(t[e]===J)return e;throw Error("Could not find renamed property on target object.")}function sb(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Se(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(Se).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function Wg(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var ab=J({__forward_ref__:J});function or(t){return t.__forward_ref__=or,t.toString=function(){return Se(this())},t}function Ie(t){return Am(t)?t():t}function Am(t){return typeof t=="function"&&t.hasOwnProperty(ab)&&t.__forward_ref__===or}function w(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function ht(t){return{providers:t.providers||[],imports:t.imports||[]}}function ma(t){return Gg(t,Nm)||Gg(t,Rm)}function xm(t){return ma(t)!==null}function Gg(t,e){return t.hasOwnProperty(e)?t[e]:null}function lb(t){let e=t&&(t[Nm]||t[Rm]);return e||null}function zg(t){return t&&(t.hasOwnProperty(qg)||t.hasOwnProperty(cb))?t[qg]:null}var Nm=J({\u0275prov:J}),qg=J({\u0275inj:J}),Rm=J({ngInjectableDef:J}),cb=J({ngInjectorDef:J}),I=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=w({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Om(t){return t&&!!t.\u0275providers}var ub=J({\u0275cmp:J}),db=J({\u0275dir:J}),fb=J({\u0275pipe:J}),hb=J({\u0275mod:J}),Qs=J({\u0275fac:J}),zi=J({__NG_ELEMENT_ID__:J}),Yg=J({__NG_ENV_ID__:J});function va(t){return typeof t=="string"?t:t==null?"":String(t)}function pb(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():va(t)}function gb(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new _(-200,t)}function Qu(t,e){throw new _(-201,!1)}var k=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(k||{}),eu;function Pm(){return eu}function Ne(t){let e=eu;return eu=t,e}function Fm(t,e,n){let r=ma(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&k.Optional)return null;if(e!==void 0)return e;Qu(t,"Injector")}var mb={},qi=mb,tu="__NG_DI_FLAG__",Ks="ngTempTokenPath",vb="ngTokenPath",yb=/\n/gm,_b="\u0275",Qg="__source",zr;function wb(){return zr}function un(t){let e=zr;return zr=t,e}function Cb(t,e=k.Default){if(zr===void 0)throw new _(-203,!1);return zr===null?Fm(t,void 0,e):zr.get(t,e&k.Optional?null:void 0,e)}function A(t,e=k.Default){return(Pm()||Cb)(Ie(t),e)}function m(t,e=k.Default){return A(t,ya(e))}function ya(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function nu(t){let e=[];for(let n=0;n<t.length;n++){let r=Ie(t[n]);if(Array.isArray(r)){if(r.length===0)throw new _(900,!1);let i,o=k.Default;for(let s=0;s<r.length;s++){let a=r[s],l=Db(a);typeof l=="number"?l===-1?i=a.token:o|=l:i=a}e.push(A(i,o))}else e.push(A(r))}return e}function km(t,e){return t[tu]=e,t.prototype[tu]=e,t}function Db(t){return t[tu]}function Eb(t,e,n,r){let i=t[Ks];throw e[Qg]&&i.unshift(e[Qg]),t.message=bb(`
`+t.message,i,n,r),t[vb]=i,t[Ks]=null,t}function bb(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==_b?t.slice(2):t;let i=Se(e);if(Array.isArray(e))i=e.map(Se).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Se(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(yb,`
  `)}`}var _a=km(Tm("Optional"),8);var Ku=km(Tm("SkipSelf"),4);function Yn(t,e){let n=t.hasOwnProperty(Qs);return n?t[Qs]:null}function Ib(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}function Sb(t){return t.flat(Number.POSITIVE_INFINITY)}function Zu(t,e){t.forEach(n=>Array.isArray(n)?Zu(n,e):e(n))}function Lm(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Zs(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Mb(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function Tb(t,e,n){let r=io(t,e);return r>=0?t[r|1]=n:(r=~r,Mb(t,r,e,n)),r}function jc(t,e){let n=io(t,e);if(n>=0)return t[n|1]}function io(t,e){return Ab(t,e,1)}function Ab(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var Yr={},Je=[],Qr=new I(""),Vm=new I("",-1),jm=new I(""),Js=class{get(e,n=qi){if(n===qi){let r=new Error(`NullInjectorError: No provider for ${Se(e)}!`);throw r.name="NullInjectorError",r}return n}},Bm=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Bm||{}),It=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(It||{}),le=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(le||{});function xb(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function ru(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];Nb(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function $m(t){return t===3||t===4||t===6}function Nb(t){return t.charCodeAt(0)===64}function Yi(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?Kg(t,n,i,null,e[++r]):Kg(t,n,i,null,null))}}return t}function Kg(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[o+1]=i);return}else if(r===t[o+1]){t[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),r!==null&&t.splice(o++,0,r),i!==null&&t.splice(o++,0,i)}var Um="ng-template";function Rb(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&xb(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Ju(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function Ju(t){return t.type===4&&t.value!==Um}function Ob(t,e,n){let r=t.type===4&&!n?Um:t.value;return e===r}function Pb(t,e,n){let r=4,i=t.attrs,o=i!==null?Lb(i):0,s=!1;for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number"){if(!s&&!ct(r)&&!ct(l))return!1;if(s&&ct(l))continue;s=!1,r=l|r&1;continue}if(!s)if(r&4){if(r=2|r&1,l!==""&&!Ob(t,l,n)||l===""&&e.length===1){if(ct(r))return!1;s=!0}}else if(r&8){if(i===null||!Rb(t,i,l,n)){if(ct(r))return!1;s=!0}}else{let c=e[++a],u=Fb(l,i,Ju(t),n);if(u===-1){if(ct(r))return!1;s=!0;continue}if(c!==""){let d;if(u>o?d="":d=i[u+1].toLowerCase(),r&2&&c!==d){if(ct(r))return!1;s=!0}}}}return ct(r)||s}function ct(t){return(t&1)===0}function Fb(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return Vb(e,t)}function kb(t,e,n=!1){for(let r=0;r<e.length;r++)if(Pb(t,e[r],n))return!0;return!1}function Lb(t){for(let e=0;e<t.length;e++){let n=t[e];if($m(n))return e}return t.length}function Vb(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function Zg(t,e){return t?":not("+e.trim()+")":e}function jb(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!ct(s)&&(e+=Zg(o,i),i=""),r=s,o=o||!ct(r);n++}return i!==""&&(e+=Zg(o,i)),e}function Bb(t){return t.map(jb).join(",")}function $b(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!ct(i))break;i=o}r++}return{attrs:e,classes:n}}function xt(t){return ro(()=>{let e=qm(t),n=Z(v({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Bm.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||It.Emulated,styles:t.styles||Je,_:null,schemas:t.schemas||null,tView:null,id:""});Ym(n);let r=t.dependencies;return n.directiveDefs=Xg(r,!1),n.pipeDefs=Xg(r,!0),n.id=Wb(n),n})}function Ub(t){return fn(t)||Hm(t)}function Hb(t){return t!==null}function pt(t){return ro(()=>({type:t.type,bootstrap:t.bootstrap||Je,declarations:t.declarations||Je,imports:t.imports||Je,exports:t.exports||Je,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Jg(t,e){if(t==null)return Yr;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a=le.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(n[o]=a!==le.None?[r,a]:r,e[o]=s):n[o]=r}return n}function we(t){return ro(()=>{let e=qm(t);return Ym(e),e})}function wa(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function fn(t){return t[ub]||null}function Hm(t){return t[db]||null}function Wm(t){return t[fb]||null}function Gm(t){let e=fn(t)||Hm(t)||Wm(t);return e!==null?e.standalone:!1}function zm(t,e){let n=t[hb]||null;if(!n&&e===!0)throw new Error(`Type ${Se(t)} does not have '\u0275mod' property.`);return n}function qm(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Yr,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Je,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Jg(t.inputs,e),outputs:Jg(t.outputs),debugInfo:null}}function Ym(t){t.features?.forEach(e=>e(t))}function Xg(t,e){if(!t)return null;let n=e?Wm:Ub;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(Hb)}function Wb(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Ca(t){return{\u0275providers:t}}function Gb(...t){return{\u0275providers:Qm(!0,t),\u0275fromNgModule:!0}}function Qm(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return Zu(e,s=>{let a=s;iu(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&Km(i,o),n}function Km(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Xu(i,o=>{e(o,r)})}}function iu(t,e,n,r){if(t=Ie(t),!t)return!1;let i=null,o=zg(t),s=!o&&fn(t);if(!o&&!s){let l=t.ngModule;if(o=zg(l),o)i=l;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let c of l)iu(c,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let c;try{Zu(o.imports,u=>{iu(u,e,n,r)&&(c||=[],c.push(u))})}finally{}c!==void 0&&Km(c,e)}if(!a){let c=Yn(i)||(()=>new i);e({provide:i,useFactory:c,deps:Je},i),e({provide:jm,useValue:i,multi:!0},i),e({provide:Qr,useValue:()=>A(i),multi:!0},i)}let l=o.providers;if(l!=null&&!a){let c=t;Xu(l,u=>{e(u,c)})}}else return!1;return i!==t&&t.providers!==void 0}function Xu(t,e){for(let n of t)Om(n)&&(n=n.\u0275providers),Array.isArray(n)?Xu(n,e):e(n)}var zb=J({provide:String,useValue:J});function Zm(t){return t!==null&&typeof t=="object"&&zb in t}function qb(t){return!!(t&&t.useExisting)}function Yb(t){return!!(t&&t.useFactory)}function Kr(t){return typeof t=="function"}function Qb(t){return!!t.useClass}var Da=new I(""),Hs={},Kb={},Bc;function ed(){return Bc===void 0&&(Bc=new Js),Bc}var He=class{},Qi=class extends He{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,su(e,s=>this.processProvider(s)),this.records.set(Vm,Ur(void 0,this)),i.has("environment")&&this.records.set(He,Ur(void 0,this));let o=this.records.get(Da);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(jm,Je,k.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=W(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),W(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=un(this),r=Ne(void 0),i;try{return e()}finally{un(n),Ne(r)}}get(e,n=qi,r=k.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Yg))return e[Yg](this);r=ya(r);let i,o=un(this),s=Ne(void 0);try{if(!(r&k.SkipSelf)){let l=this.records.get(e);if(l===void 0){let c=tI(e)&&ma(e);c&&this.injectableDefInScope(c)?l=Ur(ou(e),Hs):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l)}let a=r&k.Self?ed():this.parent;return n=r&k.Optional&&n===qi?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Ks]=a[Ks]||[]).unshift(Se(e)),o)throw a;return Eb(a,e,"R3InjectorError",this.source)}else throw a}finally{Ne(s),un(o)}}resolveInjectorInitializers(){let e=W(null),n=un(this),r=Ne(void 0),i;try{let o=this.get(Qr,Je,k.Self);for(let s of o)s()}finally{un(n),Ne(r),W(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(Se(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new _(205,!1)}processProvider(e){e=Ie(e);let n=Kr(e)?e:Ie(e&&e.provide),r=Jb(e);if(!Kr(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Ur(void 0,Hs,!0),i.factory=()=>nu(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=W(null);try{return n.value===Hs&&(n.value=Kb,n.value=n.factory()),typeof n.value=="object"&&n.value&&eI(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{W(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Ie(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function ou(t){let e=ma(t),n=e!==null?e.factory:Yn(t);if(n!==null)return n;if(t instanceof I)throw new _(204,!1);if(t instanceof Function)return Zb(t);throw new _(204,!1)}function Zb(t){if(t.length>0)throw new _(204,!1);let n=lb(t);return n!==null?()=>n.factory(t):()=>new t}function Jb(t){if(Zm(t))return Ur(void 0,t.useValue);{let e=Jm(t);return Ur(e,Hs)}}function Jm(t,e,n){let r;if(Kr(t)){let i=Ie(t);return Yn(i)||ou(i)}else if(Zm(t))r=()=>Ie(t.useValue);else if(Yb(t))r=()=>t.useFactory(...nu(t.deps||[]));else if(qb(t))r=()=>A(Ie(t.useExisting));else{let i=Ie(t&&(t.useClass||t.provide));if(Xb(t))r=()=>new i(...nu(t.deps));else return Yn(i)||ou(i)}return r}function Ur(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Xb(t){return!!t.deps}function eI(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function tI(t){return typeof t=="function"||typeof t=="object"&&t instanceof I}function su(t,e){for(let n of t)Array.isArray(n)?su(n,e):n&&Om(n)?su(n.\u0275providers,e):e(n)}function qt(t,e){t instanceof Qi&&t.assertNotDestroyed();let n,r=un(t),i=Ne(void 0);try{return e()}finally{un(r),Ne(i)}}function Xm(){return Pm()!==void 0||wb()!=null}function nI(t){if(!Xm())throw new _(-203,!1)}function rI(t){return typeof t=="function"}var Yt=0,O=1,D=2,ye=3,ut=4,gt=5,Xs=6,Ki=7,dt=8,Zr=9,ft=10,_e=11,Zi=12,em=13,ti=14,St=15,oo=16,Hr=17,Gt=18,Ea=19,ev=20,dn=21,$c=22,Qn=23,Mt=25,tv=1;var Kn=7,ea=8,Jr=9,Ue=10,td=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(td||{});function zn(t){return Array.isArray(t)&&typeof t[tv]=="object"}function Qt(t){return Array.isArray(t)&&t[tv]===!0}function nv(t){return(t.flags&4)!==0}function ba(t){return t.componentOffset>-1}function nd(t){return(t.flags&1)===1}function hn(t){return!!t.template}function iI(t){return(t[D]&512)!==0}var au=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function rv(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function Kt(){return iv}function iv(t){return t.type.prototype.ngOnChanges&&(t.setInput=sI),oI}Kt.ngInherit=!0;function oI(){let t=sv(this),e=t?.current;if(e){let n=t.previous;if(n===Yr)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function sI(t,e,n,r,i){let o=this.declaredInputs[r],s=sv(t)||aI(t,{previous:Yr,current:null}),a=s.current||(s.current={}),l=s.previous,c=l[o];a[o]=new au(c&&c.currentValue,n,l===Yr),rv(t,e,i,n)}var ov="__ngSimpleChanges__";function sv(t){return t[ov]||null}function aI(t,e){return t[ov]=e}var tm=null;var Et=function(t,e,n){tm?.(t,e,n)},av="svg",lI="math",cI=!1;function uI(){return cI}function Tt(t){for(;Array.isArray(t);)t=t[Yt];return t}function lv(t,e){return Tt(e[t])}function Xe(t,e){return Tt(e[t.index])}function cv(t,e){return t.data[e]}function dI(t,e){return t[e]}function gn(t,e){let n=e[t];return zn(n)?n:n[Yt]}function fI(t){return(t[D]&4)===4}function rd(t){return(t[D]&128)===128}function hI(t){return Qt(t[ye])}function ta(t,e){return e==null?null:t[e]}function uv(t){t[Hr]=0}function pI(t){t[D]&1024||(t[D]|=1024,rd(t)&&Ji(t))}function gI(t,e){for(;t>0;)e=e[ti],t--;return e}function id(t){return!!(t[D]&9216||t[Qn]?.dirty)}function lu(t){t[ft].changeDetectionScheduler?.notify(1),id(t)?Ji(t):t[D]&64&&(uI()?(t[D]|=1024,Ji(t)):t[ft].changeDetectionScheduler?.notify())}function Ji(t){t[ft].changeDetectionScheduler?.notify();let e=Xi(t);for(;e!==null&&!(e[D]&8192||(e[D]|=8192,!rd(e)));)e=Xi(e)}function dv(t,e){if((t[D]&256)===256)throw new _(911,!1);t[dn]===null&&(t[dn]=[]),t[dn].push(e)}function mI(t,e){if(t[dn]===null)return;let n=t[dn].indexOf(e);n!==-1&&t[dn].splice(n,1)}function Xi(t){let e=t[ye];return Qt(e)?e[ye]:e}var P={lFrame:yv(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function vI(){return P.lFrame.elementDepthCount}function yI(){P.lFrame.elementDepthCount++}function _I(){P.lFrame.elementDepthCount--}function fv(){return P.bindingsEnabled}function wI(){return P.skipHydrationRootTNode!==null}function CI(t){return P.skipHydrationRootTNode===t}function DI(){P.skipHydrationRootTNode=null}function z(){return P.lFrame.lView}function Re(){return P.lFrame.tView}function ni(t){return P.lFrame.contextLView=t,t[dt]}function ri(t){return P.lFrame.contextLView=null,t}function We(){let t=hv();for(;t!==null&&t.type===64;)t=t.parent;return t}function hv(){return P.lFrame.currentTNode}function EI(){let t=P.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function so(t,e){let n=P.lFrame;n.currentTNode=t,n.isParent=e}function pv(){return P.lFrame.isParent}function bI(){P.lFrame.isParent=!1}function Ia(){let t=P.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function II(t){return P.lFrame.bindingIndex=t}function od(){return P.lFrame.bindingIndex++}function SI(t){let e=P.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function MI(){return P.lFrame.inI18n}function TI(t,e){let n=P.lFrame;n.bindingIndex=n.bindingRootIndex=t,cu(e)}function AI(){return P.lFrame.currentDirectiveIndex}function cu(t){P.lFrame.currentDirectiveIndex=t}function xI(t){let e=P.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function gv(){return P.lFrame.currentQueryIndex}function sd(t){P.lFrame.currentQueryIndex=t}function NI(t){let e=t[O];return e.type===2?e.declTNode:e.type===1?t[gt]:null}function mv(t,e,n){if(n&k.SkipSelf){let i=e,o=t;for(;i=i.parent,i===null&&!(n&k.Host);)if(i=NI(o),i===null||(o=o[ti],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=P.lFrame=vv();return r.currentTNode=e,r.lView=t,!0}function ad(t){let e=vv(),n=t[O];P.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function vv(){let t=P.lFrame,e=t===null?null:t.child;return e===null?yv(t):e}function yv(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function _v(){let t=P.lFrame;return P.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var wv=_v;function ld(){let t=_v();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function RI(t){return(P.lFrame.contextLView=gI(t,P.lFrame.contextLView))[dt]}function ii(){return P.lFrame.selectedIndex}function Zn(t){P.lFrame.selectedIndex=t}function Cv(){let t=P.lFrame;return cv(t.tView,t.selectedIndex)}function cd(){P.lFrame.currentNamespace=av}function Dv(){OI()}function OI(){P.lFrame.currentNamespace=null}function PI(){return P.lFrame.currentNamespace}var Ev=!0;function ud(){return Ev}function dd(t){Ev=t}function FI(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=iv(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function fd(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),l&&(t.viewHooks??=[]).push(-n,l),c&&((t.viewHooks??=[]).push(n,c),(t.viewCheckHooks??=[]).push(n,c)),u!=null&&(t.destroyHooks??=[]).push(n,u)}}function Ws(t,e,n){bv(t,e,3,n)}function Gs(t,e,n,r){(t[D]&3)===n&&bv(t,e,n,r)}function Uc(t,e){let n=t[D];(n&3)===e&&(n&=16383,n+=1,t[D]=n)}function bv(t,e,n,r){let i=r!==void 0?t[Hr]&65535:0,o=r??-1,s=e.length-1,a=0;for(let l=i;l<s;l++)if(typeof e[l+1]=="number"){if(a=e[l],r!=null&&a>=r)break}else e[l]<0&&(t[Hr]+=65536),(a<o||o==-1)&&(kI(t,n,e,l),t[Hr]=(t[Hr]&4294901760)+l+2),l++}function nm(t,e){Et(4,t,e);let n=W(null);try{e.call(t)}finally{W(n),Et(5,t,e)}}function kI(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[D]>>14<t[Hr]>>16&&(t[D]&3)===e&&(t[D]+=16384,nm(a,o)):nm(a,o)}var qr=-1,Jn=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function LI(t){return t instanceof Jn}function VI(t){return(t.flags&8)!==0}function jI(t){return(t.flags&16)!==0}function Iv(t){return t!==qr}function na(t){return t&32767}function BI(t){return t>>16}function ra(t,e){let n=BI(t),r=e;for(;n>0;)r=r[ti],n--;return r}var uu=!0;function ia(t){let e=uu;return uu=t,e}var $I=256,Sv=$I-1,Mv=5,UI=0,bt={};function HI(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(zi)&&(r=n[zi]),r==null&&(r=n[zi]=UI++);let i=r&Sv,o=1<<i;e.data[t+(i>>Mv)]|=o}function oa(t,e){let n=Tv(t,e);if(n!==-1)return n;let r=e[O];r.firstCreatePass&&(t.injectorIndex=e.length,Hc(r.data,t),Hc(e,null),Hc(r.blueprint,null));let i=hd(t,e),o=t.injectorIndex;if(Iv(i)){let s=na(i),a=ra(i,e),l=a[O].data;for(let c=0;c<8;c++)e[o+c]=a[s+c]|l[s+c]}return e[o+8]=i,o}function Hc(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Tv(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function hd(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=Ov(i),r===null)return qr;if(n++,i=i[ti],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return qr}function du(t,e,n){HI(t,e,n)}function WI(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if($m(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===e)return n[i+1];i=i+2}}}return null}function Av(t,e,n){if(n&k.Optional||t!==void 0)return t;Qu(e,"NodeInjector")}function xv(t,e,n,r){if(n&k.Optional&&r===void 0&&(r=null),!(n&(k.Self|k.Host))){let i=t[Zr],o=Ne(void 0);try{return i?i.get(e,r,n&k.Optional):Fm(e,r,n&k.Optional)}finally{Ne(o)}}return Av(r,e,n)}function Nv(t,e,n,r=k.Default,i){if(t!==null){if(e[D]&2048&&!(r&k.Self)){let s=YI(t,e,n,r,bt);if(s!==bt)return s}let o=Rv(t,e,n,r,bt);if(o!==bt)return o}return xv(e,n,r,i)}function Rv(t,e,n,r,i){let o=zI(n);if(typeof o=="function"){if(!mv(e,t,r))return r&k.Host?Av(i,n,r):xv(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&k.Optional))Qu(n);else return s}finally{wv()}}else if(typeof o=="number"){let s=null,a=Tv(t,e),l=qr,c=r&k.Host?e[St][gt]:null;for((a===-1||r&k.SkipSelf)&&(l=a===-1?hd(t,e):e[a+8],l===qr||!im(r,!1)?a=-1:(s=e[O],a=na(l),e=ra(l,e)));a!==-1;){let u=e[O];if(rm(o,a,u.data)){let d=GI(a,e,n,s,r,c);if(d!==bt)return d}l=e[a+8],l!==qr&&im(r,e[O].data[a+8]===c)&&rm(o,a,e)?(s=u,a=na(l),e=ra(l,e)):a=-1}}return i}function GI(t,e,n,r,i,o){let s=e[O],a=s.data[t+8],l=r==null?ba(a)&&uu:r!=s&&(a.type&3)!==0,c=i&k.Host&&o===a,u=zs(a,s,n,l,c);return u!==null?Xn(e,s,u,a):bt}function zs(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,l=t.directiveStart,c=t.directiveEnd,u=o>>20,d=r?a:a+u,f=i?a+u:c;for(let h=d;h<f;h++){let p=s[h];if(h<l&&n===p||h>=l&&p.type===n)return h}if(i){let h=s[l];if(h&&hn(h)&&h.type===n)return l}return null}function Xn(t,e,n,r){let i=t[n],o=e.data;if(LI(i)){let s=i;s.resolving&&gb(pb(o[n]));let a=ia(s.canSeeViewProviders);s.resolving=!0;let l,c=s.injectImpl?Ne(s.injectImpl):null,u=mv(t,r,k.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&FI(n,o[n],e)}finally{c!==null&&Ne(c),ia(a),s.resolving=!1,wv()}}return i}function zI(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(zi)?t[zi]:void 0;return typeof e=="number"?e>=0?e&Sv:qI:e}function rm(t,e,n){let r=1<<t;return!!(n[e+(t>>Mv)]&r)}function im(t,e){return!(t&k.Self)&&!(t&k.Host&&e)}var qn=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return Nv(this._tNode,this._lView,e,ya(r),n)}};function qI(){return new qn(We(),z())}function ao(t){return ro(()=>{let e=t.prototype.constructor,n=e[Qs]||fu(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[Qs]||fu(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function fu(t){return Am(t)?()=>{let e=fu(Ie(t));return e&&e()}:Yn(t)}function YI(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[D]&2048&&!(s[D]&512);){let a=Rv(o,s,n,r|k.Self,bt);if(a!==bt)return a;let l=o.parent;if(!l){let c=s[ev];if(c){let u=c.get(n,bt,r);if(u!==bt)return u}l=Ov(s),s=s[ti]}o=l}return i}function Ov(t){let e=t[O],n=e.type;return n===2?e.declTNode:n===1?t[gt]:null}function pd(t){return WI(We(),t)}function om(t,e=null,n=null,r){let i=Pv(t,e,n,r);return i.resolveInjectorInitializers(),i}function Pv(t,e=null,n=null,r,i=new Set){let o=[n||Je,Gb(t)];return r=r||(typeof t=="object"?void 0:Se(t)),new Qi(o,e||ed(),r||null,i)}var Zt=(()=>{let e=class e{static create(r,i){if(Array.isArray(r))return om({name:""},i,r,"");{let o=r.name??"";return om({name:o},r.parent,r.providers,o)}}};e.THROW_IF_NOT_FOUND=qi,e.NULL=new Js,e.\u0275prov=w({token:e,providedIn:"any",factory:()=>A(Vm)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var QI="ngOriginalError";function Wc(t){return t[QI]}var At=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Wc(e);for(;n&&Wc(n);)n=Wc(n);return n||null}},Fv=new I("",{providedIn:"root",factory:()=>m(At).handleError.bind(void 0)}),gd=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=KI,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),hu=class extends gd{constructor(e){super(),this._lView=e}onDestroy(e){return dv(this._lView,e),()=>mI(this._lView,e)}};function KI(){return new hu(z())}function ZI(){return oi(We(),z())}function oi(t,e){return new et(Xe(t,e))}var et=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=ZI;let t=e;return t})();function JI(t){return t instanceof et?t.nativeElement:t}var pu=class extends Ce{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,Xm()&&(this.destroyRef=m(gd,{optional:!0})??void 0)}emit(e){let n=W(null);try{super.next(e)}finally{W(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let l=e;i=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=Gc(o),i&&(i=Gc(i)),s&&(s=Gc(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof ue&&e.add(a),a}};function Gc(t){return e=>{setTimeout(t,void 0,e)}}var pe=pu;function XI(){return this._results[Symbol.iterator]()}var gu=class t{get changes(){return this._changes??=new pe}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=t.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=XI)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=Sb(e);(this._changesDetected=!Ib(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function kv(t){return(t.flags&128)===128}var Lv=new Map,e0=0;function t0(){return e0++}function n0(t){Lv.set(t[Ea],t)}function r0(t){Lv.delete(t[Ea])}var sm="__ngContext__";function er(t,e){zn(e)?(t[sm]=e[Ea],n0(e)):t[sm]=e}function Vv(t){return Bv(t[Zi])}function jv(t){return Bv(t[ut])}function Bv(t){for(;t!==null&&!Qt(t);)t=t[ut];return t}var mu;function $v(t){mu=t}function i0(){if(mu!==void 0)return mu;if(typeof document<"u")return document;throw new _(210,!1)}var md=new I("",{providedIn:"root",factory:()=>o0}),o0="ng",vd=new I(""),mn=new I("",{providedIn:"platform",factory:()=>"unknown"});var yd=new I("",{providedIn:"root",factory:()=>i0().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var s0="h",a0="b";var l0=()=>null;function _d(t,e,n=!1){return l0(t,e,n)}var Uv=!1,c0=new I("",{providedIn:"root",factory:()=>Uv});var Bs;function u0(){if(Bs===void 0&&(Bs=null,Gn.trustedTypes))try{Bs=Gn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Bs}function am(t){return u0()?.createScriptURL(t)||t}var sa=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Mm})`}};function lo(t){return t instanceof sa?t.changingThisBreaksApplicationSecurity:t}function wd(t,e){let n=d0(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${Mm})`)}return n===e}function d0(t){return t instanceof sa&&t.getTypeName()||null}var f0=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Hv(t){return t=String(t),t.match(f0)?t:"unsafe:"+t}var Sa=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Sa||{});function h0(t){let e=Gv();return e?e.sanitize(Sa.URL,t)||"":wd(t,"URL")?lo(t):Hv(va(t))}function p0(t){let e=Gv();if(e)return am(e.sanitize(Sa.RESOURCE_URL,t)||"");if(wd(t,"ResourceURL"))return am(lo(t));throw new _(904,!1)}function g0(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?p0:h0}function Wv(t,e,n){return g0(e,n)(t)}function Gv(){let t=z();return t&&t[ft].sanitizer}function zv(t){return t instanceof Function?t():t}function m0(t){return(t??m(Zt)).get(mn)==="browser"}var zt=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(zt||{}),v0;function Cd(t,e){return v0(t,e)}function Wr(t,e,n,r,i){if(r!=null){let o,s=!1;Qt(r)?o=r:zn(r)&&(s=!0,r=r[Yt]);let a=Tt(r);t===0&&n!==null?i==null?Zv(e,n,a):aa(e,n,a,i||null,!0):t===1&&n!==null?aa(e,n,a,i||null,!0):t===2?P0(e,a,s):t===3&&e.destroyNode(a),o!=null&&k0(e,t,o,n,i)}}function y0(t,e){return t.createText(e)}function _0(t,e,n){t.setValue(e,n)}function qv(t,e,n){return t.createElement(e,n)}function w0(t,e){Yv(t,e),e[Yt]=null,e[gt]=null}function C0(t,e,n,r,i,o){r[Yt]=i,r[gt]=e,Ma(t,r,n,1,i,o)}function Yv(t,e){e[ft].changeDetectionScheduler?.notify(1),Ma(t,e,e[_e],2,null,null)}function D0(t){let e=t[Zi];if(!e)return zc(t[O],t);for(;e;){let n=null;if(zn(e))n=e[Zi];else{let r=e[Ue];r&&(n=r)}if(!n){for(;e&&!e[ut]&&e!==t;)zn(e)&&zc(e[O],e),e=e[ye];e===null&&(e=t),zn(e)&&zc(e[O],e),n=e&&e[ut]}e=n}}function E0(t,e,n,r){let i=Ue+r,o=n.length;r>0&&(n[i-1][ut]=e),r<o-Ue?(e[ut]=n[i],Lm(n,Ue+r,e)):(n.push(e),e[ut]=null),e[ye]=n;let s=e[oo];s!==null&&n!==s&&b0(s,e);let a=e[Gt];a!==null&&a.insertView(t),lu(e),e[D]|=128}function b0(t,e){let n=t[Jr],i=e[ye][ye][St];e[St]!==i&&(t[D]|=td.HasTransplantedViews),n===null?t[Jr]=[e]:n.push(e)}function Qv(t,e){let n=t[Jr],r=n.indexOf(e);n.splice(r,1)}function vu(t,e){if(t.length<=Ue)return;let n=Ue+e,r=t[n];if(r){let i=r[oo];i!==null&&i!==t&&Qv(i,r),e>0&&(t[n-1][ut]=r[ut]);let o=Zs(t,Ue+e);w0(r[O],r);let s=o[Gt];s!==null&&s.detachView(o[O]),r[ye]=null,r[ut]=null,r[D]&=-129}return r}function Kv(t,e){if(!(e[D]&256)){let n=e[_e];n.destroyNode&&Ma(t,e,n,3,null,null),D0(e)}}function zc(t,e){if(e[D]&256)return;let n=W(null);try{e[D]&=-129,e[D]|=256,e[Qn]&&yg(e[Qn]),S0(t,e),I0(t,e),e[O].type===1&&e[_e].destroy();let r=e[oo];if(r!==null&&Qt(e[ye])){r!==e[ye]&&Qv(r,e);let i=e[Gt];i!==null&&i.detachView(t)}r0(e)}finally{W(n)}}function I0(t,e){let n=t.cleanup,r=e[Ki];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[n[o+1]];n[o].call(s)}r!==null&&(e[Ki]=null);let i=e[dn];if(i!==null){e[dn]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function S0(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Jn)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],l=o[s+1];Et(4,a,l);try{l.call(a)}finally{Et(5,a,l)}}else{Et(4,i,o);try{o.call(i)}finally{Et(5,i,o)}}}}}function M0(t,e,n){return T0(t,e.parent,n)}function T0(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[Yt];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=t.data[r.directiveStart+i];if(o===It.None||o===It.Emulated)return null}return Xe(r,n)}}function aa(t,e,n,r,i){t.insertBefore(e,n,r,i)}function Zv(t,e,n){t.appendChild(e,n)}function lm(t,e,n,r,i){r!==null?aa(t,e,n,r,i):Zv(t,e,n)}function A0(t,e,n,r){t.removeChild(e,n,r)}function Dd(t,e){return t.parentNode(e)}function x0(t,e){return t.nextSibling(e)}function N0(t,e,n){return O0(t,e,n)}function R0(t,e,n){return t.type&40?Xe(t,n):null}var O0=R0,cm;function Ed(t,e,n,r){let i=M0(t,r,e),o=e[_e],s=r.parent||e[gt],a=N0(s,r,e);if(i!=null)if(Array.isArray(n))for(let l=0;l<n.length;l++)lm(o,i,n[l],a,!1);else lm(o,i,n,a,!1);cm!==void 0&&cm(o,r,e,n,i)}function qs(t,e){if(e!==null){let n=e.type;if(n&3)return Xe(e,t);if(n&4)return yu(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return qs(t,r);{let i=t[e.index];return Qt(i)?yu(-1,i):Tt(i)}}else{if(n&32)return Cd(e,t)()||Tt(t[e.index]);{let r=Jv(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Xi(t[St]);return qs(i,r)}else return qs(t,e.next)}}}return null}function Jv(t,e){if(e!==null){let r=t[St][gt],i=e.projection;return r.projection[i]}return null}function yu(t,e){let n=Ue+t+1;if(n<e.length){let r=e[n],i=r[O].firstChild;if(i!==null)return qs(r,i)}return e[Kn]}function P0(t,e,n){let r=Dd(t,e);r&&A0(t,r,e,n)}function bd(t,e,n,r,i,o,s){for(;n!=null;){let a=r[n.index],l=n.type;if(s&&e===0&&(a&&er(Tt(a),r),n.flags|=2),(n.flags&32)!==32)if(l&8)bd(t,e,n.child,r,i,o,!1),Wr(e,t,i,a,o);else if(l&32){let c=Cd(n,r),u;for(;u=c();)Wr(e,t,i,u,o);Wr(e,t,i,a,o)}else l&16?F0(t,e,r,n,i,o):Wr(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Ma(t,e,n,r,i,o){bd(n,r,t.firstChild,e,i,o,!1)}function F0(t,e,n,r,i,o){let s=n[St],l=s[gt].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++){let u=l[c];Wr(e,t,i,u,o)}else{let c=l,u=s[ye];kv(r)&&(c.flags|=128),bd(t,e,c,u,i,o,!0)}}function k0(t,e,n,r,i){let o=n[Kn],s=Tt(n);o!==s&&Wr(e,t,r,o,i);for(let a=Ue;a<n.length;a++){let l=n[a];Ma(l[O],l,t,e,r,o)}}function L0(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:zt.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=zt.Important),t.setStyle(n,r,i,o))}}function V0(t,e,n){t.setAttribute(e,"style",n)}function Xv(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function ey(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&ru(t,e,r),i!==null&&Xv(t,e,i),o!==null&&V0(t,e,o)}var vn={};function L(t=1){ty(Re(),z(),ii()+t,!1)}function ty(t,e,n,r){if(!r)if((e[D]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Ws(e,o,n)}else{let o=t.preOrderHooks;o!==null&&Gs(e,o,0,n)}Zn(n)}function C(t,e=k.Default){let n=z();if(n===null)return A(t,e);let r=We();return Nv(r,n,Ie(t),e)}function ny(){let t="invalid";throw new Error(t)}function ry(t,e,n,r,i,o){let s=W(null);try{let a=null;i&le.SignalBased&&(a=e[r][pg]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&le.HasDecoratorInputTransform&&(o=t.inputTransforms[r].call(e,o)),t.setInput!==null?t.setInput(e,a,o,n,r):rv(e,a,r,o)}finally{W(s)}}function j0(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Zn(~i);else{let o=i,s=n[++r],a=n[++r];TI(s,o);let l=e[o];a(2,l)}}}finally{Zn(-1)}}function Ta(t,e,n,r,i,o,s,a,l,c,u){let d=e.blueprint.slice();return d[Yt]=i,d[D]=r|4|128|8|64,(c!==null||t&&t[D]&2048)&&(d[D]|=2048),uv(d),d[ye]=d[ti]=t,d[dt]=n,d[ft]=s||t&&t[ft],d[_e]=a||t&&t[_e],d[Zr]=l||t&&t[Zr]||null,d[gt]=o,d[Ea]=t0(),d[Xs]=u,d[ev]=c,d[St]=e.type==2?t[St]:d,d}function Aa(t,e,n,r,i){let o=t.data[e];if(o===null)o=B0(t,e,n,r,i),MI()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=EI();o.injectorIndex=s===null?-1:s.injectorIndex}return so(o,!0),o}function B0(t,e,n,r,i){let o=hv(),s=pv(),a=s?o:o&&o.parent,l=t.data[e]=z0(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=l),o!==null&&(s?o.child==null&&l.parent!==null&&(o.child=l):o.next===null&&(o.next=l,l.prev=o)),l}function iy(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function oy(t,e,n,r,i){let o=ii(),s=r&2;try{Zn(-1),s&&e.length>Mt&&ty(t,e,Mt,!1),Et(s?2:0,i),n(r,i)}finally{Zn(o),Et(s?3:1,i)}}function sy(t,e,n){if(nv(e)){let r=W(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let l=n[s];a.contentQueries(1,l,s)}}}finally{W(r)}}}function ay(t,e,n){fv()&&(X0(t,e,n,Xe(n,e)),(n.flags&64)===64&&fy(t,e,n))}function ly(t,e,n=Xe){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function cy(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Id(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Id(t,e,n,r,i,o,s,a,l,c,u){let d=Mt+r,f=d+i,h=$0(d,f),p=typeof c=="function"?c():c;return h[O]={type:t,blueprint:h,template:n,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:p,incompleteFirstPass:!1,ssrId:u}}function $0(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:vn);return n}function U0(t,e,n,r){let o=r.get(c0,Uv)||n===It.ShadowDom,s=t.selectRootElement(e,o);return H0(s),s}function H0(t){W0(t)}var W0=()=>null;function G0(t,e,n,r){let i=gy(e);i.push(n),t.firstCreatePass&&my(t).push(r,i.length-1)}function z0(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return wI()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function um(t,e,n,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,l=le.None;Array.isArray(s)?(a=s[0],l=s[1]):a=s;let c=o;if(i!==null){if(!i.hasOwnProperty(o))continue;c=i[o]}t===0?dm(r,n,c,a,l):dm(r,n,c,a)}return r}function dm(t,e,n,r,i){let o;t.hasOwnProperty(n)?(o=t[n]).push(e,r):o=t[n]=[e,r],i!==void 0&&o.push(i)}function q0(t,e,n){let r=e.directiveStart,i=e.directiveEnd,o=t.data,s=e.attrs,a=[],l=null,c=null;for(let u=r;u<i;u++){let d=o[u],f=n?n.get(d):null,h=f?f.inputs:null,p=f?f.outputs:null;l=um(0,d.inputs,u,l,h),c=um(1,d.outputs,u,c,p);let y=l!==null&&s!==null&&!Ju(e)?uS(l,u,s):null;a.push(y)}l!==null&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=c}function Y0(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function Q0(t,e,n,r,i,o,s,a){let l=Xe(e,n),c=e.inputs,u;!a&&c!=null&&(u=c[r])?(Sd(t,n,u,r,i),ba(e)&&K0(n,e.index)):e.type&3?(r=Y0(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(l,r,i)):e.type&12}function K0(t,e){let n=gn(e,t);n[D]&16||(n[D]|=64)}function uy(t,e,n,r){if(fv()){let i=r===null?null:{"":-1},o=tS(t,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&dy(t,e,n,s,i,a),i&&nS(n,r,i)}n.mergedAttrs=Yi(n.mergedAttrs,n.attrs)}function dy(t,e,n,r,i,o){for(let c=0;c<r.length;c++)du(oa(n,e),t,r[c].type);iS(n,t.data.length,r.length);for(let c=0;c<r.length;c++){let u=r[c];u.providersResolver&&u.providersResolver(u)}let s=!1,a=!1,l=iy(t,e,r.length,null);for(let c=0;c<r.length;c++){let u=r[c];n.mergedAttrs=Yi(n.mergedAttrs,u.hostAttrs),oS(t,n,e,l,u),rS(l,u,i),u.contentQueries!==null&&(n.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(n.flags|=64);let d=u.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),l++}q0(t,n,o)}function Z0(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;J0(s)!=a&&s.push(a),s.push(n,r,o)}}function J0(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function X0(t,e,n,r){let i=n.directiveStart,o=n.directiveEnd;ba(n)&&sS(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||oa(n,e),er(r,e);let s=n.initialInputs;for(let a=i;a<o;a++){let l=t.data[a],c=Xn(e,t,a,n);if(er(c,e),s!==null&&cS(e,a-i,c,l,n,s),hn(l)){let u=gn(n.index,e);u[dt]=Xn(e,t,a,n)}}}function fy(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=AI();try{Zn(o);for(let a=r;a<i;a++){let l=t.data[a],c=e[a];cu(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&eS(l,c)}}finally{Zn(-1),cu(s)}}function eS(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function tS(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(kb(e,s.selectors,!1))if(r||(r=[]),hn(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let l=a.length;_u(t,e,l)}else r.unshift(s),_u(t,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function _u(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function nS(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new _(-301,!1);r.push(e[i],o)}}}function rS(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;hn(e)&&(n[""]=t)}}function iS(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function oS(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=Yn(i.type,!0)),s=new Jn(o,hn(i),C);t.blueprint[r]=s,n[r]=s,Z0(t,e,r,iy(t,n,i.hostVars,vn),i)}function sS(t,e,n){let r=Xe(e,t),i=cy(n),o=t[ft].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=xa(t,Ta(t,i,null,s,r,e,null,o.createRenderer(r,n),null,null,null));t[e.index]=a}function aS(t,e,n,r,i,o){let s=Xe(t,e);lS(e[_e],s,o,t.value,n,r,i)}function lS(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let a=s==null?va(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}function cS(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let l=s[a++],c=s[a++],u=s[a++],d=s[a++];ry(r,n,l,c,u,d)}}function uS(t,e,n){let r=null,i=0;for(;i<n.length;){let o=n[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){r===null&&(r=[]);let s=t[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],n[i+1]);break}}i+=2}return r}function hy(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function py(t,e){let n=t.contentQueries;if(n!==null){let r=W(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];sd(o),a.contentQueries(2,e[s],s)}}}finally{W(r)}}}function xa(t,e){return t[Zi]?t[em][ut]=e:t[Zi]=e,t[em]=e,e}function wu(t,e,n){sd(0);let r=W(null);try{e(t,n)}finally{W(r)}}function gy(t){return t[Ki]||(t[Ki]=[])}function my(t){return t.cleanup||(t.cleanup=[])}function vy(t,e){let n=t[Zr],r=n?n.get(At,null):null;r&&r.handleError(e)}function Sd(t,e,n,r,i){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],l=n[o++],c=e[s],u=t.data[s];ry(u,c,r,a,l,i)}}function dS(t,e,n){let r=lv(e,t);_0(t[_e],r,n)}function fS(t,e){let n=gn(e,t),r=n[O];hS(r,n);let i=n[Yt];i!==null&&n[Xs]===null&&(n[Xs]=_d(i,n[Zr])),Md(r,n,n[dt])}function hS(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Md(t,e,n){ad(e);try{let r=t.viewQuery;r!==null&&wu(1,r,n);let i=t.template;i!==null&&oy(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Gt]?.finishViewCreation(t),t.staticContentQueries&&py(t,e),t.staticViewQueries&&wu(2,t.viewQuery,n);let o=t.components;o!==null&&pS(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[D]&=-5,ld()}}function pS(t,e){for(let n=0;n<e.length;n++)fS(t,e[n])}function gS(t,e,n,r){let i=W(null);try{let o=e.tView,a=t[D]&4096?4096:16,l=Ta(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),c=t[e.index];l[oo]=c;let u=t[Gt];return u!==null&&(l[Gt]=u.createEmbeddedView(o)),Md(o,l,n),l}finally{W(i)}}function fm(t,e){return!e||e.firstChild===null||kv(t)}function mS(t,e,n,r=!0){let i=e[O];if(E0(i,e,t,n),r){let s=yu(n,t),a=e[_e],l=Dd(a,t[Kn]);l!==null&&C0(i,t[gt],a,e,l,s)}let o=e[Xs];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function la(t,e,n,r,i=!1){for(;n!==null;){let o=e[n.index];o!==null&&r.push(Tt(o)),Qt(o)&&vS(o,r);let s=n.type;if(s&8)la(t,e,n.child,r);else if(s&32){let a=Cd(n,e),l;for(;l=a();)r.push(l)}else if(s&16){let a=Jv(e,n);if(Array.isArray(a))r.push(...a);else{let l=Xi(e[St]);la(l[O],l,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function vS(t,e){for(let n=Ue;n<t.length;n++){let r=t[n],i=r[O].firstChild;i!==null&&la(r[O],r,i,e)}t[Kn]!==t[Yt]&&e.push(t[Kn])}var yy=[];function yS(t){return t[Qn]??_S(t)}function _S(t){let e=yy.pop()??Object.create(CS);return e.lView=t,e}function wS(t){t.lView[Qn]!==t&&(t.lView=null,yy.push(t))}var CS=Z(v({},gg),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Ji(t.lView)},consumerOnSignalRead(){this.lView[Qn]=this}}),_y=100;function wy(t,e=!0,n=0){let r=t[ft],i=r.rendererFactory,o=!1;o||i.begin?.();try{DS(t,n)}catch(s){throw e&&vy(t,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function DS(t,e){Cu(t,e);let n=0;for(;id(t);){if(n===_y)throw new _(103,!1);n++,Cu(t,1)}}function ES(t,e,n,r){let i=e[D];if((i&256)===256)return;let o=!1;!o&&e[ft].inlineEffectRunner?.flush(),ad(e);let s=null,a=null;!o&&bS(t)&&(a=yS(e),s=mg(a));try{uv(e),II(t.bindingStartIndex),n!==null&&oy(t,e,n,2,r);let l=(i&3)===3;if(!o)if(l){let d=t.preOrderCheckHooks;d!==null&&Ws(e,d,null)}else{let d=t.preOrderHooks;d!==null&&Gs(e,d,0,null),Uc(e,0)}if(IS(e),Cy(e,0),t.contentQueries!==null&&py(t,e),!o)if(l){let d=t.contentCheckHooks;d!==null&&Ws(e,d)}else{let d=t.contentHooks;d!==null&&Gs(e,d,1),Uc(e,1)}j0(t,e);let c=t.components;c!==null&&Ey(e,c,0);let u=t.viewQuery;if(u!==null&&wu(2,u,r),!o)if(l){let d=t.viewCheckHooks;d!==null&&Ws(e,d)}else{let d=t.viewHooks;d!==null&&Gs(e,d,2),Uc(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[$c]){for(let d of e[$c])d();e[$c]=null}o||(e[D]&=-73)}catch(l){throw Ji(e),l}finally{a!==null&&(vg(a,s),wS(a)),ld()}}function bS(t){return t.type!==2}function Cy(t,e){for(let n=Vv(t);n!==null;n=jv(n))for(let r=Ue;r<n.length;r++){let i=n[r];Dy(i,e)}}function IS(t){for(let e=Vv(t);e!==null;e=jv(e)){if(!(e[D]&td.HasTransplantedViews))continue;let n=e[Jr];for(let r=0;r<n.length;r++){let i=n[r],o=i[ye];pI(i)}}}function SS(t,e,n){let r=gn(e,t);Dy(r,n)}function Dy(t,e){rd(t)&&Cu(t,e)}function Cu(t,e){let r=t[O],i=t[D],o=t[Qn],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Cc(o)),o&&(o.dirty=!1),t[D]&=-9217,s)ES(r,t,r.template,t[dt]);else if(i&8192){Cy(t,1);let a=r.components;a!==null&&Ey(t,a,1)}}function Ey(t,e,n){for(let r=0;r<e.length;r++)SS(t,e[r],n)}function Td(t){for(t[ft].changeDetectionScheduler?.notify();t;){t[D]|=64;let e=Xi(t);if(iI(t)&&!e)return t;t=e}return null}var tr=class{get rootNodes(){let e=this._lView,n=e[O];return la(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[dt]}set context(e){this._lView[dt]=e}get destroyed(){return(this._lView[D]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[ye];if(Qt(e)){let n=e[ea],r=n?n.indexOf(this):-1;r>-1&&(vu(e,r),Zs(n,r))}this._attachedToViewContainer=!1}Kv(this._lView[O],this._lView)}onDestroy(e){dv(this._lView,e)}markForCheck(){Td(this._cdRefInjectingView||this._lView)}detach(){this._lView[D]&=-129}reattach(){lu(this._lView),this._lView[D]|=128}detectChanges(){this._lView[D]|=1024,wy(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new _(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,Yv(this._lView[O],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new _(902,!1);this._appRef=e,lu(this._lView)}},nr=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=AS;let t=e;return t})(),MS=nr,TS=class extends MS{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=gS(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new tr(i)}};function AS(){return Ad(We(),z())}function Ad(t,e){return t.type&4?new TS(e,t,oi(t,e)):null}var nU=new RegExp(`^(\\d+)*(${a0}|${s0})*(.*)`);var xS=()=>null;function hm(t,e){return xS(t,e)}var ca=class{},Du=class{},ua=class{};function NS(t){let e=Error(`No component factory found for ${Se(t)}.`);return e[RS]=t,e}var RS="ngComponent";var Eu=class{resolveComponentFactory(e){throw NS(e)}},Na=(()=>{let e=class e{};e.NULL=new Eu;let t=e;return t})(),eo=class{},yn=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>OS();let t=e;return t})();function OS(){let t=z(),e=We(),n=gn(e.index,t);return(zn(n)?n:t)[_e]}var PS=(()=>{let e=class e{};e.\u0275prov=w({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),qc={};var pm=new Set;function xd(t){pm.has(t)||(pm.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function gm(...t){}function FS(){let t=typeof Gn.requestAnimationFrame=="function",e=Gn[t?"requestAnimationFrame":"setTimeout"],n=Gn[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var re=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new pe(!1),this.onMicrotaskEmpty=new pe(!1),this.onStable=new pe(!1),this.onError=new pe(!1),typeof Zone>"u")throw new _(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=FS().nativeRequestAnimationFrame,VS(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new _(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new _(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,kS,gm,gm);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},kS={};function Nd(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function LS(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Gn,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,bu(t),t.isCheckStableRunning=!0,Nd(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),bu(t))}function VS(t){let e=()=>{LS(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{if(jS(a))return n.invokeTask(i,o,s,a);try{return mm(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),vm(t)}},onInvoke:(n,r,i,o,s,a,l)=>{try{return mm(t),n.invoke(i,o,s,a,l)}finally{t.shouldCoalesceRunChangeDetection&&e(),vm(t)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,bu(t),Nd(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function bu(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function mm(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function vm(t){t._nesting--,Nd(t)}function jS(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}var Gr=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(Gr||{}),BS={destroy(){}};function Rd(t,e){!e&&nI(Rd);let n=e?.injector??m(Zt);if(!m0(n))return BS;xd("NgAfterNextRender");let r=n.get(Od),i=r.handler??=new Su,o=e?.phase??Gr.MixedReadWrite,s=()=>{i.unregister(l),a()},a=n.get(gd).onDestroy(s),l=qt(n,()=>new Iu(o,()=>{s(),t()}));return i.register(l),{destroy:s}}var Iu=class{constructor(e,n){this.phase=e,this.callbackFn=n,this.zone=m(re),this.errorHandler=m(At,{optional:!0}),m(ca,{optional:!0})?.notify(1)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}},Su=class{constructor(){this.executingCallbacks=!1,this.buckets={[Gr.EarlyRead]:new Set,[Gr.Write]:new Set,[Gr.MixedReadWrite]:new Set,[Gr.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let n of e)n.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},Od=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=w({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function Mu(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=Wg(i,a);else if(o==2){let l=a,c=e[++s];r=Wg(r,l+": "+c+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var da=class extends Na{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=fn(e);return new Xr(n,this.ngModule)}};function ym(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function $S(t){let e=t.toLowerCase();return e==="svg"?av:e==="math"?lI:null}var Tu=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=ya(r);let i=this.injector.get(e,qc,r);return i!==qc||n===qc?i:this.parentInjector.get(e,n,r)}},Xr=class extends ua{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=ym(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return ym(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=Bb(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let o=W(null);try{i=i||this.ngModule;let s=i instanceof He?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new Tu(e,s):e,l=a.get(eo,null);if(l===null)throw new _(407,!1);let c=a.get(PS,null),u=a.get(Od,null),d=a.get(ca,null),f={rendererFactory:l,sanitizer:c,inlineEffectRunner:null,afterRenderEventManager:u,changeDetectionScheduler:d},h=l.createRenderer(null,this.componentDef),p=this.componentDef.selectors[0][0]||"div",y=r?U0(h,r,this.componentDef.encapsulation,a):qv(h,p,$S(p)),F=512;this.componentDef.signals?F|=4096:this.componentDef.onPush||(F|=16);let B=null;y!==null&&(B=_d(y,a,!0));let Ae=Id(0,null,null,1,0,null,null,null,null,null,null),he=Ta(null,Ae,null,F,null,null,f,h,a,null,B);ad(he);let st,Ar;try{let at=this.componentDef,xr,_c=null;at.findHostDirectiveDefs?(xr=[],_c=new Map,at.findHostDirectiveDefs(at,xr,_c),xr.push(at)):xr=[at];let ME=US(he,y),TE=HS(ME,y,at,xr,he,f,h);Ar=cv(Ae,Mt),y&&zS(h,at,y,r),n!==void 0&&qS(Ar,this.ngContentSelectors,n),st=GS(TE,at,xr,_c,he,[YS]),Md(Ae,he,null)}finally{ld()}return new Au(this.componentType,st,oi(Ar,he),he,Ar)}finally{W(o)}}},Au=class extends Du{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new tr(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView;Sd(o[O],o,i,e,n),this.previousInputValues.set(e,n);let s=gn(this._tNode.index,o);Td(s)}}get injector(){return new qn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function US(t,e){let n=t[O],r=Mt;return t[r]=e,Aa(n,r,2,"#host",null)}function HS(t,e,n,r,i,o,s){let a=i[O];WS(r,t,e,s);let l=null;e!==null&&(l=_d(e,i[Zr]));let c=o.rendererFactory.createRenderer(e,n),u=16;n.signals?u=4096:n.onPush&&(u=64);let d=Ta(i,cy(n),null,u,i[t.index],t,o,c,null,null,l);return a.firstCreatePass&&_u(a,t,r.length-1),xa(i,d),i[t.index]=d}function WS(t,e,n,r){for(let i of t)e.mergedAttrs=Yi(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Mu(e,e.mergedAttrs,!0),n!==null&&ey(r,n,e))}function GS(t,e,n,r,i,o){let s=We(),a=i[O],l=Xe(s,i);dy(a,i,s,n,null,r);for(let u=0;u<n.length;u++){let d=s.directiveStart+u,f=Xn(i,a,d,s);er(f,i)}fy(a,i,s),l&&er(l,i);let c=Xn(i,a,s.directiveStart+s.componentOffset,s);if(t[dt]=i[dt]=c,o!==null)for(let u of o)u(c,e);return sy(a,s,i),c}function zS(t,e,n,r){if(r)ru(t,n,["ng-version","17.3.2"]);else{let{attrs:i,classes:o}=$b(e.selectors[0]);i&&ru(t,n,i),o&&o.length>0&&Xv(t,n,o.join(" "))}}function qS(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null?Array.from(o):null)}}function YS(){let t=We();fd(z()[O],t)}var _n=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=QS;let t=e;return t})();function QS(){let t=We();return Iy(t,z())}var KS=_n,by=class extends KS{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return oi(this._hostTNode,this._hostLView)}get injector(){return new qn(this._hostTNode,this._hostLView)}get parentInjector(){let e=hd(this._hostTNode,this._hostLView);if(Iv(e)){let n=ra(e,this._hostLView),r=na(e),i=n[O].data[r+8];return new qn(i,n)}else return new qn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=_m(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Ue}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=hm(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,fm(this._hostTNode,s)),a}createComponent(e,n,r,i,o){let s=e&&!rI(e),a;if(s)a=n;else{let p=n||{};a=p.index,r=p.injector,i=p.projectableNodes,o=p.environmentInjector||p.ngModuleRef}let l=s?e:new Xr(fn(e)),c=r||this.parentInjector;if(!o&&l.ngModule==null){let y=(s?c:this.parentInjector).get(He,null);y&&(o=y)}let u=fn(l.componentType??{}),d=hm(this._lContainer,u?.id??null),f=d?.firstChild??null,h=l.create(c,i,f,o);return this.insertImpl(h.hostView,a,fm(this._hostTNode,d)),h}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(hI(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let l=i[ye],c=new by(l,l[gt],l[ye]);c.detach(c.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return mS(s,i,o,r),e.attachToViewContainerRef(),Lm(Yc(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=_m(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=vu(this._lContainer,n);r&&(Zs(Yc(this._lContainer),n),Kv(r[O],r))}detach(e){let n=this._adjustIndex(e,-1),r=vu(this._lContainer,n);return r&&Zs(Yc(this._lContainer),n)!=null?new tr(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function _m(t){return t[ea]}function Yc(t){return t[ea]||(t[ea]=[])}function Iy(t,e){let n,r=e[t.index];return Qt(r)?n=r:(n=hy(r,e,null,t),e[t.index]=n,xa(e,n)),JS(n,e,t,r),new by(n,t,e)}function ZS(t,e){let n=t[_e],r=n.createComment(""),i=Xe(e,t),o=Dd(n,i);return aa(n,o,r,x0(n,i),!1),r}var JS=tM,XS=()=>!1;function eM(t,e,n){return XS(t,e,n)}function tM(t,e,n,r){if(t[Kn])return;let i;n.type&8?i=Tt(r):i=ZS(e,n),t[Kn]=i}var xu=class t{constructor(e){this.queryList=e,this.matches=null}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},Nu=class t{constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,i=[];for(let o=0;o<r;o++){let s=n.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new t(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)Pd(e,n).matches!==null&&this.queries[n].setDirty()}},Ru=class{constructor(e,n,r=null){this.flags=n,this.read=r,typeof e=="string"?this.predicate=cM(e):this.predicate=e}},Ou=class t{constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,n!==null?n.push(o):n=[o])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Pu=class t{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,n,nM(n,o)),this.matchTNodeWithReadOption(e,n,zs(n,e,o,!1,!1))}else r===nr?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,zs(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===et||i===_n||i===nr&&n.type&4)this.addMatch(n.index,-2);else{let o=zs(n,e,i,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function nM(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function rM(t,e){return t.type&11?oi(t,e):t.type&4?Ad(t,e):null}function iM(t,e,n,r){return n===-1?rM(e,t):n===-2?oM(t,e,r):Xn(t,t[O],n,e)}function oM(t,e,n){if(n===et)return oi(e,t);if(n===nr)return Ad(e,t);if(n===_n)return Iy(e,t)}function Sy(t,e,n,r){let i=e[Gt].queries[r];if(i.matches===null){let o=t.data,s=n.matches,a=[];for(let l=0;s!==null&&l<s.length;l+=2){let c=s[l];if(c<0)a.push(null);else{let u=o[c];a.push(iM(e,u,s[l+1],n.metadata.read))}}i.matches=a}return i.matches}function Fu(t,e,n,r){let i=t.queries.getByIndex(n),o=i.matches;if(o!==null){let s=Sy(t,e,i,n);for(let a=0;a<o.length;a+=2){let l=o[a];if(l>0)r.push(s[a/2]);else{let c=o[a+1],u=e[-l];for(let d=Ue;d<u.length;d++){let f=u[d];f[oo]===f[ye]&&Fu(f[O],f,c,r)}if(u[Jr]!==null){let d=u[Jr];for(let f=0;f<d.length;f++){let h=d[f];Fu(h[O],h,c,r)}}}}}return r}function sM(t,e){return t[Gt].queries[e].queryList}function aM(t,e,n){let r=new gu((n&4)===4);return G0(t,e,r,r.destroy),(e[Gt]??=new Nu).queries.push(new xu(r))-1}function lM(t,e,n){let r=Re();return r.firstCreatePass&&(uM(r,new Ru(t,e,n),-1),(e&2)===2&&(r.staticViewQueries=!0)),aM(r,z(),e)}function cM(t){return t.split(",").map(e=>e.trim())}function uM(t,e,n){t.queries===null&&(t.queries=new Ou),t.queries.track(new Pu(e,n))}function Pd(t,e){return t.queries.getByIndex(e)}function dM(t,e){let n=t[O],r=Pd(n,e);return r.crossesNgTemplate?Fu(n,t,e,[]):Sy(n,t,r,e)}function fM(t){return Object.getPrototypeOf(t.prototype).constructor}function Jt(t){let e=fM(t.type),n=!0,r=[t];for(;e;){let i;if(hn(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new _(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=$s(t.inputs),s.inputTransforms=$s(t.inputTransforms),s.declaredInputs=$s(t.declaredInputs),s.outputs=$s(t.outputs);let a=i.hostBindings;a&&vM(t,a);let l=i.viewQuery,c=i.contentQueries;if(l&&gM(t,l),c&&mM(t,c),hM(t,i),sb(t.outputs,i.outputs),hn(i)&&i.data.animation){let u=t.data;u.animation=(u.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===Jt&&(n=!1)}}e=Object.getPrototypeOf(e)}pM(r)}function hM(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function pM(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Yi(i.hostAttrs,n=Yi(n,i.hostAttrs))}}function $s(t){return t===Yr?{}:t===Je?[]:t}function gM(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function mM(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function vM(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function Fd(t){let e=t.inputConfig,n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(n[r]=i[3])}t.inputTransforms=n}var pn=class{},to=class{};var ku=class extends pn{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new da(this);let i=zm(e);this._bootstrapComponents=zv(i.bootstrap),this._r3Injector=Pv(e,n,[{provide:pn,useValue:this},{provide:Na,useValue:this.componentFactoryResolver},...r],Se(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Lu=class extends to{constructor(e){super(),this.moduleType=e}create(e){return new ku(this.moduleType,e,[])}};var fa=class extends pn{constructor(e){super(),this.componentFactoryResolver=new da(this),this.instance=null;let n=new Qi([...e.providers,{provide:pn,useValue:this},{provide:Na,useValue:this.componentFactoryResolver}],e.parent||ed(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Ra(t,e,n=null){return new fa({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var Oa=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ie(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function My(t){return _M(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function yM(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function _M(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function kd(t,e,n){return t[e]=n}function wM(t,e){return t[e]}function rr(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function CM(t,e,n,r){let i=rr(t,e,n);return rr(t,e+1,r)||i}function DM(t){return(t.flags&32)===32}function EM(t,e,n,r,i,o,s,a,l){let c=e.consts,u=Aa(e,t,4,s||null,ta(c,a));uy(e,n,u,ta(c,l)),fd(e,u);let d=u.tView=Id(2,u,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c,null);return e.queries!==null&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}function Oe(t,e,n,r,i,o,s,a){let l=z(),c=Re(),u=t+Mt,d=c.firstCreatePass?EM(u,c,l,e,n,r,i,o,s):c.data[u];so(d,!1);let f=bM(c,l,d,t);ud()&&Ed(c,l,f,d),er(f,l);let h=hy(f,l,f,d);return l[u]=h,xa(l,h),eM(h,d,l),nd(d)&&ay(c,l,d),s!=null&&ly(l,d,a),Oe}var bM=IM;function IM(t,e,n,r){return dd(!0),e[_e].createComment("")}function Pa(t,e,n,r){let i=z(),o=od();if(rr(i,o,e)){let s=Re(),a=Cv();aS(a,i,t,e,n,r)}return Pa}function SM(t,e,n,r){return rr(t,od(),n)?e+va(n)+r:vn}function Us(t,e){return t<<17|e<<2}function ir(t){return t>>17&32767}function MM(t){return(t&2)==2}function TM(t,e){return t&131071|e<<17}function Vu(t){return t|2}function ei(t){return(t&131068)>>2}function Qc(t,e){return t&-131069|e<<2}function AM(t){return(t&1)===1}function ju(t){return t|1}function xM(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=ir(s),l=ei(s);t[r]=n;let c=!1,u;if(Array.isArray(n)){let d=n;u=d[1],(u===null||io(d,u)>0)&&(c=!0)}else u=n;if(i)if(l!==0){let f=ir(t[a+1]);t[r+1]=Us(f,a),f!==0&&(t[f+1]=Qc(t[f+1],r)),t[a+1]=TM(t[a+1],r)}else t[r+1]=Us(a,0),a!==0&&(t[a+1]=Qc(t[a+1],r)),a=r;else t[r+1]=Us(l,0),a===0?a=r:t[l+1]=Qc(t[l+1],r),l=r;c&&(t[r+1]=Vu(t[r+1])),wm(t,u,r,!0),wm(t,u,r,!1),NM(e,u,t,r,o),s=Us(a,l),o?e.classBindings=s:e.styleBindings=s}function NM(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&io(o,e)>=0&&(n[r+1]=ju(n[r+1]))}function wm(t,e,n,r){let i=t[n+1],o=e===null,s=r?ir(i):ei(i),a=!1;for(;s!==0&&(a===!1||o);){let l=t[s],c=t[s+1];RM(l,e)&&(a=!0,t[s+1]=r?ju(c):Vu(c)),s=r?ir(c):ei(c)}a&&(t[n+1]=r?Vu(i):ju(i))}function RM(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?io(t,e)>=0:!1}function X(t,e,n){let r=z(),i=od();if(rr(r,i,e)){let o=Re(),s=Cv();Q0(o,s,r,t,e,r[_e],n,!1)}return X}function Cm(t,e,n,r,i){let o=e.inputs,s=i?"class":"style";Sd(t,n,o[s],s,r)}function tt(t,e){return OM(t,e,null,!0),tt}function OM(t,e,n,r){let i=z(),o=Re(),s=SI(2);if(o.firstUpdatePass&&FM(o,t,s,r),e!==vn&&rr(i,s,e)){let a=o.data[ii()];BM(o,a,i,i[_e],t,i[s+1]=$M(e,n),r,s)}}function PM(t,e){return e>=t.expandoStartIndex}function FM(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[ii()],s=PM(t,n);UM(o,r)&&e===null&&!s&&(e=!1),e=kM(i,o,e,r),xM(i,o,e,n,s,r)}}function kM(t,e,n,r){let i=xI(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Kc(null,t,e,n,r),n=no(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=Kc(i,t,e,n,r),o===null){let l=LM(t,e,r);l!==void 0&&Array.isArray(l)&&(l=Kc(null,t,e,l[1],r),l=no(l,e.attrs,r),VM(t,e,r,l))}else o=jM(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function LM(t,e,n){let r=n?e.classBindings:e.styleBindings;if(ei(r)!==0)return t[ir(r)]}function VM(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[ir(i)]=r}function jM(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=no(r,s,n)}return no(r,e.attrs,n)}function Kc(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=no(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function no(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),Tb(t,s,n?!0:e[++o]))}return t===void 0?null:t}function BM(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let l=t.data,c=l[a+1],u=AM(c)?Dm(l,e,n,i,ei(c),s):void 0;if(!ha(u)){ha(o)||MM(c)&&(o=Dm(l,null,n,i,a,s));let d=lv(ii(),n);L0(r,s,d,i,o)}}function Dm(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let l=t[i],c=Array.isArray(l),u=c?l[1]:l,d=u===null,f=n[i+1];f===vn&&(f=d?Je:void 0);let h=d?jc(f,r):u===r?f:void 0;if(c&&!ha(h)&&(h=jc(l,r)),ha(h)&&(a=h,s))return a;let p=t[i+1];i=s?ir(p):ei(p)}if(e!==null){let l=o?e.residualClasses:e.residualStyles;l!=null&&(a=jc(l,r))}return a}function ha(t){return t!==void 0}function $M(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=Se(lo(t)))),t}function UM(t,e){return(t.flags&(e?8:16))!==0}function HM(t,e,n,r,i,o){let s=e.consts,a=ta(s,i),l=Aa(e,t,2,r,a);return uy(e,n,l,ta(s,o)),l.attrs!==null&&Mu(l,l.attrs,!1),l.mergedAttrs!==null&&Mu(l,l.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,l),l}function E(t,e,n,r){let i=z(),o=Re(),s=Mt+t,a=i[_e],l=o.firstCreatePass?HM(s,o,i,e,n,r):o.data[s],c=WM(o,i,l,a,e,t);i[s]=c;let u=nd(l);return so(l,!0),ey(a,c,l),!DM(l)&&ud()&&Ed(o,i,c,l),vI()===0&&er(c,i),yI(),u&&(ay(o,i,l),sy(o,l,i)),r!==null&&ly(i,l),E}function T(){let t=We();pv()?bI():(t=t.parent,so(t,!1));let e=t;CI(e)&&DI(),_I();let n=Re();return n.firstCreatePass&&(fd(n,t),nv(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&VI(e)&&Cm(n,e,z(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&jI(e)&&Cm(n,e,z(),e.stylesWithoutHost,!1),T}function de(t,e,n,r){return E(t,e,n,r),T(),de}var WM=(t,e,n,r,i,o)=>(dd(!0),qv(r,i,PI()));function Fa(){return z()}var pa="en-US";var GM=pa;function zM(t){typeof t=="string"&&(GM=t.toLowerCase().replace(/_/g,"-"))}function De(t,e,n,r){let i=z(),o=Re(),s=We();return YM(o,i,i[_e],s,t,e,r),De}function qM(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[Ki],l=i[o+2];return a.length>l?a[l]:null}typeof s=="string"&&(o+=2)}return null}function YM(t,e,n,r,i,o,s){let a=nd(r),c=t.firstCreatePass&&my(t),u=e[dt],d=gy(e),f=!0;if(r.type&3||s){let y=Xe(r,e),F=s?s(y):y,B=d.length,Ae=s?st=>s(Tt(st[r.index])):r.index,he=null;if(!s&&a&&(he=qM(t,e,i,r.index)),he!==null){let st=he.__ngLastListenerFn__||he;st.__ngNextListenerFn__=o,he.__ngLastListenerFn__=o,f=!1}else{o=bm(r,e,u,o,!1);let st=n.listen(F,i,o);d.push(o,st),c&&c.push(i,Ae,B,B+1)}}else o=bm(r,e,u,o,!1);let h=r.outputs,p;if(f&&h!==null&&(p=h[i])){let y=p.length;if(y)for(let F=0;F<y;F+=2){let B=p[F],Ae=p[F+1],Ar=e[B][Ae].subscribe(o),at=d.length;d.push(o,Ar),c&&c.push(i,r.index,at,-(at+1))}}}function Em(t,e,n,r){let i=W(null);try{return Et(6,e,n),n(r)!==!1}catch(o){return vy(t,o),!1}finally{Et(7,e,n),W(i)}}function bm(t,e,n,r,i){return function o(s){if(s===Function)return r;let a=t.componentOffset>-1?gn(t.index,e):e;Td(a);let l=Em(e,n,r,s),c=o.__ngNextListenerFn__;for(;c;)l=Em(e,n,c,s)&&l,c=c.__ngNextListenerFn__;return i&&l===!1&&s.preventDefault(),l}}function si(t=1){return RI(t)}function Ty(t,e,n){lM(t,e,n)}function Ld(t){let e=z(),n=Re(),r=gv();sd(r+1);let i=Pd(n,r);if(t.dirty&&fI(e)===((i.metadata.flags&2)===2)){if(i.matches===null)t.reset([]);else{let o=dM(e,r);t.reset(o,JI),t.notifyOnChanges()}return!0}return!1}function Vd(){return sM(z(),gv())}function QM(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function q(t,e=""){let n=z(),r=Re(),i=t+Mt,o=r.firstCreatePass?Aa(r,i,1,e,null):r.data[i],s=KM(r,n,o,e,t);n[i]=s,ud()&&Ed(r,n,s,o),so(o,!1)}var KM=(t,e,n,r,i)=>(dd(!0),y0(e[_e],r));function Xt(t){return ka("",t,""),Xt}function ka(t,e,n){let r=z(),i=SM(r,t,e,n);return i!==vn&&dS(r,ii(),i),ka}function ZM(t,e,n){let r=Re();if(r.firstCreatePass){let i=hn(t);Bu(n,r.data,r.blueprint,i,!0),Bu(e,r.data,r.blueprint,i,!1)}}function Bu(t,e,n,r,i){if(t=Ie(t),Array.isArray(t))for(let o=0;o<t.length;o++)Bu(t[o],e,n,r,i);else{let o=Re(),s=z(),a=We(),l=Kr(t)?t:Ie(t.provide),c=Jm(t),u=a.providerIndexes&1048575,d=a.directiveStart,f=a.providerIndexes>>20;if(Kr(t)||!t.multi){let h=new Jn(c,i,C),p=Jc(l,e,i?u:u+f,d);p===-1?(du(oa(a,s),o,l),Zc(o,t,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(h),s.push(h)):(n[p]=h,s[p]=h)}else{let h=Jc(l,e,u+f,d),p=Jc(l,e,u,u+f),y=h>=0&&n[h],F=p>=0&&n[p];if(i&&!F||!i&&!y){du(oa(a,s),o,l);let B=eT(i?XM:JM,n.length,i,r,c);!i&&F&&(n[p].providerFactory=B),Zc(o,t,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(B),s.push(B)}else{let B=Ay(n[i?p:h],c,!i&&r);Zc(o,t,h>-1?h:p,B)}!i&&r&&F&&n[p].componentProviders++}}}function Zc(t,e,n,r){let i=Kr(e),o=Qb(e);if(i||o){let l=(o?Ie(e.useClass):e).prototype.ngOnDestroy;if(l){let c=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let u=c.indexOf(n);u===-1?c.push(n,[r,l]):c[u+1].push(r,l)}else c.push(n,l)}}}function Ay(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Jc(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function JM(t,e,n,r){return $u(this.multi,[])}function XM(t,e,n,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Xn(n,n[O],this.providerFactory.index,r);o=a.slice(0,s),$u(i,o);for(let l=s;l<a.length;l++)o.push(a[l])}else o=[],$u(i,o);return o}function $u(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function eT(t,e,n,r,i){let o=new Jn(t,n,C);return o.multi=[],o.index=e,o.componentProviders=0,Ay(o,i,r&&!n),o}function co(t,e=[]){return n=>{n.providersResolver=(r,i)=>ZM(r,i?i(t):t,e)}}var tT=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=Qm(!1,r.type),o=i.length>0?Ra([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,o)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=w({token:e,providedIn:"environment",factory:()=>new e(A(He))});let t=e;return t})();function Nt(t){xd("NgStandalone"),t.getStandaloneInjector=e=>e.get(tT).getOrCreateStandaloneInjector(t)}function La(t,e,n){let r=Ia()+t,i=z();return i[r]===vn?kd(i,r,n?e.call(n):e()):wM(i,r)}function xy(t,e,n,r){return Oy(z(),Ia(),t,e,n,r)}function Ny(t,e,n,r,i){return nT(z(),Ia(),t,e,n,r,i)}function Ry(t,e){let n=t[e];return n===vn?void 0:n}function Oy(t,e,n,r,i,o){let s=e+n;return rr(t,s,i)?kd(t,s+1,o?r.call(o,i):r(i)):Ry(t,s+1)}function nT(t,e,n,r,i,o,s){let a=e+n;return CM(t,a,i,o)?kd(t,a+2,s?r.call(s,i,o):r(i,o)):Ry(t,a+2)}function sr(t,e){let n=Re(),r,i=t+Mt;n.firstCreatePass?(r=rT(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=Yn(r.type,!0)),s,a=Ne(C);try{let l=ia(!1),c=o();return ia(l),QM(n,z(),i,c),c}finally{Ne(a)}}function rT(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function ar(t,e,n){let r=t+Mt,i=z(),o=dI(i,r);return iT(i,r)?Oy(i,Ia(),e,o.transform,n,o):o.transform(n)}function iT(t,e){return t[O].data[e].pure}var Va=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var Py=new I("");function wn(t){return!!t&&typeof t.then=="function"}function jd(t){return!!t&&typeof t.subscribe=="function"}var ja=new I(""),Fy=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=m(ja,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let o of this.appInits){let s=o();if(wn(s))r.push(s);else if(jd(s)){let a=new Promise((l,c)=>{s.subscribe({complete:l,error:c})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(o=>{this.reject(o)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ba=new I("");function oT(){_g(()=>{throw new _(600,!1)})}function sT(t){return t.isBoundToModule}function aT(t,e,n){try{let r=n();return wn(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var uo=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=m(Fv),this.afterRenderEffectManager=m(Od),this.externalTestViews=new Set,this.beforeRender=new Ce,this.afterTick=new Ce,this.componentTypes=[],this.components=[],this.isStable=m(Oa).hasPendingTasks.pipe(R(r=>!r)),this._injector=m(He)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let o=r instanceof ua;if(!this._injector.get(Fy).done){let h=!o&&Gm(r),p=!1;throw new _(405,p)}let a;o?a=r:a=this._injector.get(Na).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let l=sT(a)?void 0:this._injector.get(pn),c=i||a.selector,u=a.create(Zt.NULL,[],c,l),d=u.location.nativeElement,f=u.injector.get(Py,null);return f?.registerApplication(d),u.onDestroy(()=>{this.detachView(u.hostView),Xc(this.components,u),f?.unregisterApplication(d)}),this._loadComponent(u),u}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new _(101,!1);let i=W(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(o){this.internalErrorHandler(o)}finally{this.afterTick.next(),this._runningTick=!1,W(i)}}detectChangesInAttachedViews(r){let i=0,o=this.afterRenderEffectManager;for(;;){if(i===_y)throw new _(103,!1);if(r){let s=i===0;this.beforeRender.next(s);for(let{_lView:a,notifyErrorHandler:l}of this._views)lT(a,s,l)}if(i++,o.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>Uu(s))&&(o.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>Uu(s))))break}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;Xc(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(Ba,[]);[...this._bootstrapListeners,...i].forEach(o=>o(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>Xc(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new _(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Xc(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function lT(t,e,n){!e&&!Uu(t)||cT(t,n,e)}function Uu(t){return id(t)}function cT(t,e,n){let r;n?(r=0,t[D]|=1024):t[D]&64?r=0:r=1,wy(t,e,r)}var Hu=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},$a=(()=>{let e=class e{compileModuleSync(r){return new Lu(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),o=zm(r),s=zv(o.declarations).reduce((a,l)=>{let c=fn(l);return c&&a.push(new Xr(c)),a},[]);return new Hu(i,s)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var uT=(()=>{let e=class e{constructor(){this.zone=m(re),this.applicationRef=m(uo)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function dT(t){return[{provide:re,useFactory:t},{provide:Qr,multi:!0,useFactory:()=>{let e=m(uT,{optional:!0});return()=>e.initialize()}},{provide:Qr,multi:!0,useFactory:()=>{let e=m(gT);return()=>{e.initialize()}}},{provide:Fv,useFactory:fT}]}function fT(){let t=m(re),e=m(At);return n=>t.runOutsideAngular(()=>e.handleError(n))}function hT(t){let e=dT(()=>new re(pT(t)));return Ca([[],e])}function pT(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var gT=(()=>{let e=class e{constructor(){this.subscription=new ue,this.initialized=!1,this.zone=m(re),this.pendingTasks=m(Oa)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{re.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{re.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function mT(){return typeof $localize<"u"&&$localize.locale||pa}var Bd=new I("",{providedIn:"root",factory:()=>m(Bd,k.Optional|k.SkipSelf)||mT()});var ky=new I("");var Ys=null;function vT(t=[],e){return Zt.create({name:e,providers:[{provide:Da,useValue:"platform"},{provide:ky,useValue:new Set([()=>Ys=null])},...t]})}function yT(t=[]){if(Ys)return Ys;let e=vT(t);return Ys=e,oT(),_T(e),e}function _T(t){t.get(vd,null)?.forEach(n=>n())}var lr=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=wT;let t=e;return t})();function wT(t){return CT(We(),z(),(t&16)===16)}function CT(t,e,n){if(ba(t)&&!n){let r=gn(t.index,e);return new tr(r,r)}else if(t.type&47){let r=e[St];return new tr(r,e)}return null}var Wu=class{constructor(){}supports(e){return My(e)}create(e){return new Gu(e)}},DT=(t,e)=>e,Gu=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||DT}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){let s=!r||n&&n.currentIndex<Im(r,i,o)?n:r,a=Im(s,i,o),l=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)i++;else{o||(o=[]);let c=a-i,u=l-i;if(c!=u){for(let f=0;f<c;f++){let h=f<o.length?o[f]:o[f]=0,p=h+f;u<=p&&p<c&&(o[f]=h+1)}let d=s.previousIndex;o[d]=u-c}}a!==l&&e(s,a,l)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!My(e))throw new _(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,a),r=!0):(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,yM(e,a=>{s=this._trackByFn(i,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new zu(n,r),o,i)),e}_verifyReinsertion(e,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new ga),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new ga),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},zu=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},qu=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},ga=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new qu,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function Im(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function Sm(){return new $d([new Wu])}var $d=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let o=i.factories.slice();r=r.concat(o)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||Sm()),deps:[[e,new Ku,new _a]]}}find(r){let i=this.factories.find(o=>o.supports(r));if(i!=null)return i;throw new _(901,!1)}};e.\u0275prov=w({token:e,providedIn:"root",factory:Sm});let t=e;return t})();function Ly(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=yT(r),o=[hT(),...n||[]],a=new fa({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,l=a.get(re);return l.run(()=>{a.resolveInjectorInitializers();let c=a.get(At,null),u;l.runOutsideAngular(()=>{u=l.onError.subscribe({next:h=>{c.handleError(h)}})});let d=()=>a.destroy(),f=i.get(ky);return f.add(d),a.onDestroy(()=>{u.unsubscribe(),f.delete(d)}),aT(c,l,()=>{let h=a.get(Fy);return h.runInitializers(),h.donePromise.then(()=>{let p=a.get(Bd,pa);zM(p||pa);let y=a.get(uo);return e!==void 0&&y.bootstrap(e),y})})})}catch(e){return Promise.reject(e)}}function ai(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function Ud(t){let e=W(null);try{return t()}finally{W(e)}}function Vy(t){let e=fn(t);if(!e)return null;let n=new Xr(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var Wy=null;function tn(){return Wy}function Gy(t){Wy??=t}var Ua=class{};var Pe=new I(""),Zd=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=w({token:e,factory:()=>m(ET),providedIn:"platform"});let t=e;return t})(),zy=new I(""),ET=(()=>{let e=class e extends Zd{constructor(){super(),this._doc=m(Pe),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return tn().getBaseHref(this._doc)}onPopState(r){let i=tn().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=tn().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,o){this._history.pushState(r,i,o)}replaceState(r,i,o){this._history.replaceState(r,i,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=w({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function Jd(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function jy(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function en(t){return t&&t[0]!=="?"?"?"+t:t}var nn=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=w({token:e,factory:()=>m(Xd),providedIn:"root"});let t=e;return t})(),qy=new I(""),Xd=(()=>{let e=class e extends nn{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??m(Pe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return Jd(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+en(this._platformLocation.search),o=this._platformLocation.hash;return o&&r?`${i}${o}`:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+en(s));this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+en(s));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(A(Zd),A(qy,8))},e.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Yy=(()=>{let e=class e extends nn{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(r){let i=Jd(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+en(s));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+en(s));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(A(Zd),A(qy,8))},e.\u0275prov=w({token:e,factory:e.\u0275fac});let t=e;return t})(),li=(()=>{let e=class e{constructor(r){this._subject=new pe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=ST(jy(By(i))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+en(i))}normalize(r){return e.stripTrailingSlash(IT(this._basePath,By(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",o=null){this._locationStrategy.pushState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+en(i)),o)}replaceState(r,i="",o=null){this._locationStrategy.replaceState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+en(i)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(o=>o(r,i))}subscribe(r,i,o){return this._subject.subscribe({next:r,error:i,complete:o})}};e.normalizeQueryParams=en,e.joinWithSlash=Jd,e.stripTrailingSlash=jy,e.\u0275fac=function(i){return new(i||e)(A(nn))},e.\u0275prov=w({token:e,factory:()=>bT(),providedIn:"root"});let t=e;return t})();function bT(){return new li(A(nn))}function IT(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function By(t){return t.replace(/\/index.html$/,"")}function ST(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function Qy(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Hd=/\s+/,$y=[],Ky=(()=>{let e=class e{constructor(r,i){this._ngEl=r,this._renderer=i,this.initialClasses=$y,this.stateMap=new Map}set klass(r){this.initialClasses=r!=null?r.trim().split(Hd):$y}set ngClass(r){this.rawClass=typeof r=="string"?r.trim().split(Hd):r}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let r=this.rawClass;if(Array.isArray(r)||r instanceof Set)for(let i of r)this._updateState(i,!0);else if(r!=null)for(let i of Object.keys(r))this._updateState(i,!!r[i]);this._applyStateDiff()}_updateState(r,i){let o=this.stateMap.get(r);o!==void 0?(o.enabled!==i&&(o.changed=!0,o.enabled=i),o.touched=!0):this.stateMap.set(r,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let r of this.stateMap){let i=r[0],o=r[1];o.changed?(this._toggleClass(i,o.enabled),o.changed=!1):o.touched||(o.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),o.touched=!1}}_toggleClass(r,i){r=r.trim(),r.length>0&&r.split(Hd).forEach(o=>{i?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}};e.\u0275fac=function(i){return new(i||e)(C(et),C(yn))},e.\u0275dir=we({type:e,selectors:[["","ngClass",""]],inputs:{klass:[le.None,"class","klass"],ngClass:"ngClass"},standalone:!0});let t=e;return t})();var Wd=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Zy=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,o){this._viewContainer=r,this._template=i,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((o,s,a)=>{if(o.previousIndex==null)i.createEmbeddedView(this._template,new Wd(o.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(s===null?void 0:s);else if(s!==null){let l=i.get(s);i.move(l,a),Uy(l,o)}});for(let o=0,s=i.length;o<s;o++){let l=i.get(o).context;l.index=o,l.count=s,l.ngForOf=this._ngForOf}r.forEachIdentityChange(o=>{let s=i.get(o.currentIndex);Uy(s,o)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(C(_n),C(nr),C($d))},e.\u0275dir=we({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function Uy(t,e){t.context.$implicit=e.item}var ci=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new Gd,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){Hy("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){Hy("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(C(_n),C(nr))},e.\u0275dir=we({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),Gd=class{constructor(){this.$implicit=null,this.ngIf=null}};function Hy(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${Se(e)}'.`)}function MT(t,e){return new _(2100,!1)}var zd=class{createSubscription(e,n){return Ud(()=>e.subscribe({next:n,error:r=>{throw r}}))}dispose(e){Ud(()=>e.unsubscribe())}},qd=class{createSubscription(e,n){return e.then(n,r=>{throw r})}dispose(e){}},TT=new qd,AT=new zd,Jy=(()=>{let e=class e{constructor(r){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=r}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(r){if(!this._obj){if(r)try{this.markForCheckOnValueUpdate=!1,this._subscribe(r)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return r!==this._obj?(this._dispose(),this.transform(r)):this._latestValue}_subscribe(r){this._obj=r,this._strategy=this._selectStrategy(r),this._subscription=this._strategy.createSubscription(r,i=>this._updateLatestValue(r,i))}_selectStrategy(r){if(wn(r))return TT;if(jd(r))return AT;throw MT(e,r)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(r,i){r===this._obj&&(this._latestValue=i,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}};e.\u0275fac=function(i){return new(i||e)(C(lr,16))},e.\u0275pipe=wa({name:"async",type:e,pure:!1,standalone:!0});let t=e;return t})();var cr=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=pt({type:e}),e.\u0275inj=ht({});let t=e;return t})(),ef="browser",xT="server";function NT(t){return t===ef}function tf(t){return t===xT}var Xy=(()=>{let e=class e{};e.\u0275prov=w({token:e,providedIn:"root",factory:()=>NT(m(mn))?new Yd(m(Pe),window):new Qd});let t=e;return t})(),Yd=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=RT(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function RT(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var Qd=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},Ha=class{};var of=class extends Ua{constructor(){super(...arguments),this.supportsDOMEvents=!0}},sf=class t extends of{static makeCurrent(){Gy(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=OT();return n==null?null:PT(n)}resetBaseElement(){fo=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Qy(document.cookie,e)}},fo=null;function OT(){return fo=fo||document.querySelector("base"),fo?fo.getAttribute("href"):null}function PT(t){return new URL(t,document.baseURI).pathname}var FT=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=w({token:e,factory:e.\u0275fac});let t=e;return t})(),af=new I(""),r_=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(o=>{o.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,o){return this._findPluginFor(i).addEventListener(r,i,o)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(s=>s.supports(r)),!i)throw new _(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(A(af),A(re))},e.\u0275prov=w({token:e,factory:e.\u0275fac});let t=e;return t})(),Ga=class{constructor(e){this._doc=e}},nf="ng-app-id",i_=(()=>{let e=class e{constructor(r,i,o,s={}){this.doc=r,this.appId=i,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=tf(s),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(o=>o.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${nf}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(o=>{o.textContent!=null&&i.set(o.textContent,o)}),i}return null}changeUsageCount(r,i){let o=this.styleRef;if(o.has(r)){let s=o.get(r);return s.usage+=i,s.usage}return o.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let o=this.styleNodesInDOM,s=o?.get(i);if(s?.parentNode===r)return o.delete(i),s.removeAttribute(nf),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(nf,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let o=this.getStyleElement(r,i),s=this.styleRef,a=s.get(i)?.elements;a?a.push(o):s.set(i,{elements:[o],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(A(Pe),A(md),A(yd,8),A(mn))},e.\u0275prov=w({token:e,factory:e.\u0275fac});let t=e;return t})(),rf={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},cf=/%COMP%/g,o_="%COMP%",kT=`_nghost-${o_}`,LT=`_ngcontent-${o_}`,VT=!0,jT=new I("",{providedIn:"root",factory:()=>VT});function BT(t){return LT.replace(cf,t)}function $T(t){return kT.replace(cf,t)}function s_(t,e){return e.map(n=>n.replace(cf,t))}var e_=(()=>{let e=class e{constructor(r,i,o,s,a,l,c,u=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=l,this.ngZone=c,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=tf(l),this.defaultRenderer=new ho(r,a,c,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===It.ShadowDom&&(i=Z(v({},i),{encapsulation:It.Emulated}));let o=this.getOrCreateRenderer(r,i);return o instanceof za?o.applyToHost(r):o instanceof po&&o.applyStyles(),o}getOrCreateRenderer(r,i){let o=this.rendererByCompId,s=o.get(i.id);if(!s){let a=this.doc,l=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(i.encapsulation){case It.Emulated:s=new za(c,u,i,this.appId,d,a,l,f);break;case It.ShadowDom:return new lf(c,u,r,i,a,l,this.nonce,f);default:s=new po(c,u,i,d,a,l,f);break}o.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(A(r_),A(i_),A(md),A(jT),A(Pe),A(mn),A(re),A(yd))},e.\u0275prov=w({token:e,factory:e.\u0275fac});let t=e;return t})(),ho=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(rf[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(t_(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(t_(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new _(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=rf[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=rf[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(zt.DashCase|zt.Important)?e.style.setProperty(n,r,i&zt.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&zt.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=tn().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function t_(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var lf=class extends ho{constructor(e,n,r,i,o,s,a,l){super(e,o,s,l),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let c=s_(i.id,i.styles);for(let u of c){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},po=class extends ho{constructor(e,n,r,i,o,s,a,l){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=l?s_(l,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},za=class extends po{constructor(e,n,r,i,o,s,a,l){let c=i+"-"+r.id;super(e,n,r,o,s,a,l,c),this.contentAttr=BT(c),this.hostAttr=$T(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},UT=(()=>{let e=class e extends Ga{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,o){return r.addEventListener(i,o,!1),()=>this.removeEventListener(r,i,o)}removeEventListener(r,i,o){return r.removeEventListener(i,o)}};e.\u0275fac=function(i){return new(i||e)(A(Pe))},e.\u0275prov=w({token:e,factory:e.\u0275fac});let t=e;return t})(),n_=["alt","control","meta","shift"],HT={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},WT={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},GT=(()=>{let e=class e extends Ga{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,o){let s=e.parseEventName(i),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>tn().onAndCancel(r,s.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),o=i.shift();if(i.length===0||!(o==="keydown"||o==="keyup"))return null;let s=e._normalizeKey(i.pop()),a="",l=i.indexOf("code");if(l>-1&&(i.splice(l,1),a="code."),n_.forEach(u=>{let d=i.indexOf(u);d>-1&&(i.splice(d,1),a+=u+".")}),a+=s,i.length!=0||s.length===0)return null;let c={};return c.domEventName=o,c.fullKey=a,c}static matchEventFullKeyCode(r,i){let o=HT[r.key]||r.key,s="";return i.indexOf("code.")>-1&&(o=r.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),n_.forEach(a=>{if(a!==o){let l=WT[a];l(r)&&(s+=a+".")}}),s+=o,s===i)}static eventCallback(r,i,o){return s=>{e.matchEventFullKeyCode(s,r)&&o.runGuarded(()=>i(s))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(A(Pe))},e.\u0275prov=w({token:e,factory:e.\u0275fac});let t=e;return t})();function a_(t,e){return Ly(v({rootComponent:t},zT(e)))}function zT(t){return{appProviders:[...ZT,...t?.providers??[]],platformProviders:KT}}function qT(){sf.makeCurrent()}function YT(){return new At}function QT(){return $v(document),document}var KT=[{provide:mn,useValue:ef},{provide:vd,useValue:qT,multi:!0},{provide:Pe,useFactory:QT,deps:[]}];var ZT=[{provide:Da,useValue:"root"},{provide:At,useFactory:YT,deps:[]},{provide:af,useClass:UT,multi:!0,deps:[Pe,re,mn]},{provide:af,useClass:GT,multi:!0,deps:[Pe]},e_,i_,r_,{provide:eo,useExisting:e_},{provide:Ha,useClass:FT,deps:[]},[]];var l_=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(A(Pe))},e.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var N="primary",xo=Symbol("RouteTitle"),pf=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function pi(t){return new pf(t)}function XT(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function eA(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Rt(t[n],e[n]))return!1;return!0}function Rt(t,e){let n=t?gf(t):void 0,r=e?gf(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!v_(t[i],e[i]))return!1;return!0}function gf(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function v_(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function y_(t){return t.length>0?t[t.length-1]:null}function In(t){return Oc(t)?t:wn(t)?ne(Promise.resolve(t)):b(t)}var tA={exact:w_,subset:C_},__={exact:nA,subset:rA,ignored:()=>!0};function c_(t,e,n){return tA[n.paths](t.root,e.root,n.matrixParams)&&__[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function nA(t,e){return Rt(t,e)}function w_(t,e,n){if(!dr(t.segments,e.segments)||!Qa(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!w_(t.children[r],e.children[r],n))return!1;return!0}function rA(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>v_(t[n],e[n]))}function C_(t,e,n){return D_(t,e,e.segments,n)}function D_(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!dr(i,n)||e.hasChildren()||!Qa(i,n,r))}else if(t.segments.length===n.length){if(!dr(t.segments,n)||!Qa(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!C_(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!dr(t.segments,i)||!Qa(t.segments,i,r)||!t.children[N]?!1:D_(t.children[N],e,o,r)}}function Qa(t,e,n){return e.every((r,i)=>__[n](t[i].parameters,r.parameters))}var Cn=class{constructor(e=new Q([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=pi(this.queryParams),this._queryParamMap}toString(){return sA.serialize(this)}},Q=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ka(this)}},ur=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=pi(this.parameters),this._parameterMap}toString(){return b_(this)}};function iA(t,e){return dr(t,e)&&t.every((n,r)=>Rt(n.parameters,e[r].parameters))}function dr(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function oA(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===N&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==N&&(n=n.concat(e(i,r)))}),n}var No=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=w({token:e,factory:()=>new Co,providedIn:"root"});let t=e;return t})(),Co=class{parse(e){let n=new vf(e);return new Cn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${go(e.root,!0)}`,r=cA(e.queryParams),i=typeof e.fragment=="string"?`#${aA(e.fragment)}`:"";return`${n}${r}${i}`}},sA=new Co;function Ka(t){return t.segments.map(e=>b_(e)).join("/")}function go(t,e){if(!t.hasChildren())return Ka(t);if(e){let n=t.children[N]?go(t.children[N],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==N&&r.push(`${i}:${go(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=oA(t,(r,i)=>i===N?[go(t.children[N],!1)]:[`${i}:${go(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[N]!=null?`${Ka(t)}/${n[0]}`:`${Ka(t)}/(${n.join("//")})`}}function E_(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function qa(t){return E_(t).replace(/%3B/gi,";")}function aA(t){return encodeURI(t)}function mf(t){return E_(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Za(t){return decodeURIComponent(t)}function u_(t){return Za(t.replace(/\+/g,"%20"))}function b_(t){return`${mf(t.path)}${lA(t.parameters)}`}function lA(t){return Object.entries(t).map(([e,n])=>`;${mf(e)}=${mf(n)}`).join("")}function cA(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${qa(n)}=${qa(i)}`).join("&"):`${qa(n)}=${qa(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var uA=/^[^\/()?;#]+/;function uf(t){let e=t.match(uA);return e?e[0]:""}var dA=/^[^\/()?;=#]+/;function fA(t){let e=t.match(dA);return e?e[0]:""}var hA=/^[^=?&#]+/;function pA(t){let e=t.match(hA);return e?e[0]:""}var gA=/^[^&#]+/;function mA(t){let e=t.match(gA);return e?e[0]:""}var vf=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Q([],{}):new Q([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[N]=new Q(e,n)),r}parseSegment(){let e=uf(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new _(4009,!1);return this.capture(e),new ur(Za(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=fA(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=uf(this.remaining);i&&(r=i,this.capture(r))}e[Za(n)]=Za(r)}parseQueryParam(e){let n=pA(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=mA(this.remaining);s&&(r=s,this.capture(r))}let i=u_(n),o=u_(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=uf(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new _(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=N);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[N]:new Q([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new _(4011,!1)}};function I_(t){return t.segments.length>0?new Q([],{[N]:t}):t}function S_(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=S_(i);if(r===N&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new Q(t.segments,e);return vA(n)}function vA(t){if(t.numberOfChildren===1&&t.children[N]){let e=t.children[N];return new Q(t.segments.concat(e.segments),e.children)}return t}function gi(t){return t instanceof Cn}function yA(t,e,n=null,r=null){let i=M_(t);return T_(i,e,n,r)}function M_(t){let e;function n(o){let s={};for(let l of o.children){let c=n(l);s[l.outlet]=c}let a=new Q(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=I_(r);return e??i}function T_(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return df(i,i,i,n,r);let o=_A(e);if(o.toRoot())return df(i,i,new Q([],{}),n,r);let s=wA(o,i,t),a=s.processChildren?yo(s.segmentGroup,s.index,o.commands):x_(s.segmentGroup,s.index,o.commands);return df(i,s.segmentGroup,a,n,r)}function Ja(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Do(t){return typeof t=="object"&&t!=null&&t.outlets}function df(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([l,c])=>{o[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`});let s;t===e?s=n:s=A_(t,e,n);let a=I_(S_(s));return new Cn(a,o,i)}function A_(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=A_(o,e,n)}),new Q(t.segments,r)}var Xa=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Ja(r[0]))throw new _(4003,!1);let i=r.find(Do);if(i&&i!==y_(r))throw new _(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function _A(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Xa(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([l,c])=>{a[l]=typeof c=="string"?c.split("/"):c}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Xa(n,e,r)}var fi=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function wA(t,e,n){if(t.isAbsolute)return new fi(e,!0,0);if(!n)return new fi(e,!1,NaN);if(n.parent===null)return new fi(n,!0,0);let r=Ja(t.commands[0])?0:1,i=n.segments.length-1+r;return CA(n,i,t.numberOfDoubleDots)}function CA(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new _(4005,!1);i=r.segments.length}return new fi(r,!1,i-o)}function DA(t){return Do(t[0])?t[0].outlets:{[N]:t}}function x_(t,e,n){if(t??=new Q([],{}),t.segments.length===0&&t.hasChildren())return yo(t,e,n);let r=EA(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new Q(t.segments.slice(0,r.pathIndex),{});return o.children[N]=new Q(t.segments.slice(r.pathIndex),t.children),yo(o,0,i)}else return r.match&&i.length===0?new Q(t.segments,{}):r.match&&!t.hasChildren()?yf(t,e,n):r.match?yo(t,0,i):yf(t,e,n)}function yo(t,e,n){if(n.length===0)return new Q(t.segments,{});{let r=DA(n),i={};if(Object.keys(r).some(o=>o!==N)&&t.children[N]&&t.numberOfChildren===1&&t.children[N].segments.length===0){let o=yo(t.children[N],e,n);return new Q(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=x_(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Q(t.segments,i)}}function EA(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(Do(a))break;let l=`${a}`,c=r<n.length-1?n[r+1]:null;if(i>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!f_(l,c,s))return o;r+=2}else{if(!f_(l,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function yf(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(Do(o)){let l=bA(o.outlets);return new Q(r,l)}if(i===0&&Ja(n[0])){let l=t.segments[e];r.push(new ur(l.path,d_(n[0]))),i++;continue}let s=Do(o)?o.outlets[N]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Ja(a)?(r.push(new ur(s,d_(a))),i+=2):(r.push(new ur(s,{})),i++)}return new Q(r,{})}function bA(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=yf(new Q([],{}),0,r))}),e}function d_(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function f_(t,e,n){return t==n.path&&Rt(e,n.parameters)}var _o="imperative",ge=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(ge||{}),rt=class{constructor(e,n){this.id=e,this.url=n}},mi=class extends rt{constructor(e,n,r="imperative",i=null){super(e,n),this.type=ge.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Ot=class extends rt{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=ge.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},ze=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(ze||{}),el=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(el||{}),Dn=class extends rt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=ge.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},En=class extends rt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=ge.NavigationSkipped}},Eo=class extends rt{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=ge.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},tl=class extends rt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ge.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},_f=class extends rt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ge.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},wf=class extends rt{constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=ge.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Cf=class extends rt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ge.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Df=class extends rt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ge.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ef=class{constructor(e){this.route=e,this.type=ge.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},bf=class{constructor(e){this.route=e,this.type=ge.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},If=class{constructor(e){this.snapshot=e,this.type=ge.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Sf=class{constructor(e){this.snapshot=e,this.type=ge.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Mf=class{constructor(e){this.snapshot=e,this.type=ge.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Tf=class{constructor(e){this.snapshot=e,this.type=ge.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},nl=class{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=ge.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},bo=class{},Io=class{constructor(e){this.url=e}};var Af=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Ro,this.attachRef=null}},Ro=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let o=this.getOrCreateContext(r);o.outlet=i,this.contexts.set(r,o)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new Af,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),rl=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=xf(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=xf(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Nf(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Nf(e,this._root).map(n=>n.value)}};function xf(t,e){if(t===e.value)return e;for(let n of e.children){let r=xf(t,n);if(r)return r}return null}function Nf(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Nf(t,n);if(r.length)return r.unshift(e),r}return[]}var Ge=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function di(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var il=class extends rl{constructor(e,n){super(e),this.snapshot=n,$f(this,e)}toString(){return this.snapshot.toString()}};function N_(t){let e=IA(t),n=new ie([new ur("",{})]),r=new ie({}),i=new ie({}),o=new ie({}),s=new ie(""),a=new bn(n,r,o,s,i,N,t,e.root);return a.snapshot=e.root,new il(new Ge(a,[]),e)}function IA(t){let e={},n={},r={},i="",o=new So([],e,r,i,n,N,t,null,{});return new ol("",new Ge(o,[]))}var bn=class{constructor(e,n,r,i,o,s,a,l){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(R(c=>c[xo]))??b(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(R(e=>pi(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(R(e=>pi(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Bf(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:v(v({},e.params),t.params),data:v(v({},e.data),t.data),resolve:v(v(v(v({},t.data),e.data),i?.data),t._resolvedData)}:r={params:v({},t.params),data:v({},t.data),resolve:v(v({},t.data),t._resolvedData??{})},i&&O_(i)&&(r.resolve[xo]=i.title),r}var So=class{get title(){return this.data?.[xo]}constructor(e,n,r,i,o,s,a,l,c){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=pi(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=pi(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},ol=class extends rl{constructor(e,n){super(n),this.url=e,$f(this,n)}toString(){return R_(this._root)}};function $f(t,e){e.value._routerState=t,e.children.forEach(n=>$f(t,n))}function R_(t){let e=t.children.length>0?` { ${t.children.map(R_).join(", ")} } `:"";return`${t.value}${e}`}function ff(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Rt(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Rt(e.params,n.params)||t.paramsSubject.next(n.params),eA(e.url,n.url)||t.urlSubject.next(n.url),Rt(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Rf(t,e){let n=Rt(t.params,e.params)&&iA(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Rf(t.parent,e.parent))}function O_(t){return typeof t.title=="string"||t.title===null}var Uf=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=N,this.activateEvents=new pe,this.deactivateEvents=new pe,this.attachEvents=new pe,this.detachEvents=new pe,this.parentContexts=m(Ro),this.location=m(_n),this.changeDetector=m(lr),this.environmentInjector=m(He),this.inputBinder=m(cl,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:o}=r.name;if(i)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new _(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new _(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new _(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new _(4013,!1);this._activatedRoute=r;let o=this.location,a=r.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,c=new Of(r,l,o.injector);this.activated=o.createComponent(a,{index:o.length,injector:c,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=we({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Kt]});let t=e;return t})(),Of=class{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r,this.__ngOutletInjector=!0}get(e,n){return e===bn?this.route:e===Ro?this.childContexts:this.parent.get(e,n)}},cl=new I(""),h_=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:i}=r,o=an([i.queryParams,i.params,i.data]).pipe(Ze(([s,a,l],c)=>(l=v(v(v({},s),a),l),c===0?b(l):Promise.resolve(l)))).subscribe(s=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(r);return}let a=Vy(i.component);if(!a){this.unsubscribeFromRouteData(r);return}for(let{templateName:l}of a.inputs)r.activatedComponentRef.setInput(l,s[l])});this.outletDataSubscriptions.set(r,o)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=w({token:e,factory:e.\u0275fac});let t=e;return t})();function SA(t,e,n){let r=Mo(t,e._root,n?n._root:void 0);return new il(r,e)}function Mo(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=MA(t,e,n);return new Ge(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Mo(t,a)),s}}let r=TA(e.value),i=e.children.map(o=>Mo(t,o));return new Ge(r,i)}}function MA(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Mo(t,r,i);return Mo(t,r)})}function TA(t){return new bn(new ie(t.url),new ie(t.params),new ie(t.queryParams),new ie(t.fragment),new ie(t.data),t.outlet,t.component,t)}var P_="ngNavigationCancelingError";function F_(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=gi(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=k_(!1,ze.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function k_(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[P_]=!0,n.cancellationCode=e,n}function AA(t){return L_(t)&&gi(t.url)}function L_(t){return!!t&&t[P_]}var xA=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=xt({type:e,selectors:[["ng-component"]],standalone:!0,features:[Nt],decls:1,vars:0,template:function(i,o){i&1&&de(0,"router-outlet")},dependencies:[Uf],encapsulation:2});let t=e;return t})();function NA(t,e){return t.providers&&!t._injector&&(t._injector=Ra(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Hf(t){let e=t.children&&t.children.map(Hf),n=e?Z(v({},t),{children:e}):v({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==N&&(n.component=xA),n}function Pt(t){return t.outlet||N}function RA(t,e){let n=t.filter(r=>Pt(r)===e);return n.push(...t.filter(r=>Pt(r)!==e)),n}function Oo(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var OA=(t,e,n,r)=>R(i=>(new Pf(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Pf=class{constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),ff(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=di(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=di(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=di(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=di(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Tf(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Sf(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(ff(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),ff(a.route.value),this.activateChildRoutes(e,null,s.children)}else{let a=Oo(i.snapshot);s.attachRef=null,s.route=i,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}},sl=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},hi=class{constructor(e,n){this.component=e,this.route=n}};function PA(t,e,n){let r=t._root,i=e?e._root:null;return mo(r,i,n,[r.value])}function FA(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function yi(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!xm(t)?t:e.get(t):r}function mo(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=di(e);return t.children.forEach(s=>{kA(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>wo(a,n.getContext(s),i)),i}function kA(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let l=LA(s,o,o.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new sl(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?mo(t,e,a?a.children:null,r,i):mo(t,e,n,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new hi(a.outlet.component,s))}else s&&wo(e,a,i),i.canActivateChecks.push(new sl(r)),o.component?mo(t,null,a?a.children:null,r,i):mo(t,null,n,r,i);return i}function LA(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!dr(t.url,e.url);case"pathParamsOrQueryParamsChange":return!dr(t.url,e.url)||!Rt(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Rf(t,e)||!Rt(t.queryParams,e.queryParams);case"paramsChange":default:return!Rf(t,e)}}function wo(t,e,n){let r=di(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?wo(s,e.children.getContext(o),n):wo(s,null,n):wo(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new hi(e.outlet.component,i)):n.canDeactivateChecks.push(new hi(null,i)):n.canDeactivateChecks.push(new hi(null,i))}function Po(t){return typeof t=="function"}function VA(t){return typeof t=="boolean"}function jA(t){return t&&Po(t.canLoad)}function BA(t){return t&&Po(t.canActivate)}function $A(t){return t&&Po(t.canActivateChild)}function UA(t){return t&&Po(t.canDeactivate)}function HA(t){return t&&Po(t.canMatch)}function V_(t){return t instanceof Ht||t?.name==="EmptyError"}var Ya=Symbol("INITIAL_VALUE");function vi(){return Ze(t=>an(t.map(e=>e.pipe(Wt(1),Wn(Ya)))).pipe(R(e=>{for(let n of e)if(n!==!0){if(n===Ya)return Ya;if(n===!1||n instanceof Cn)return n}return!0}),Ke(e=>e!==Ya),Wt(1)))}function WA(t,e){return ae(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?b(Z(v({},n),{guardsResult:!0})):GA(s,r,i,t).pipe(ae(a=>a&&VA(a)?zA(r,o,t,e):b(a)),R(a=>Z(v({},n),{guardsResult:a})))})}function GA(t,e,n,r){return ne(t).pipe(ae(i=>ZA(i.component,i.route,n,e,r)),Dt(i=>i!==!0,!0))}function zA(t,e,n,r){return ne(e).pipe(Hn(i=>Br(YA(i.route.parent,r),qA(i.route,r),KA(t,i.path,n),QA(t,i.route,n))),Dt(i=>i!==!0,!0))}function qA(t,e){return t!==null&&e&&e(new Mf(t)),b(!0)}function YA(t,e){return t!==null&&e&&e(new If(t)),b(!0)}function QA(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return b(!0);let i=r.map(o=>Ls(()=>{let s=Oo(e)??n,a=yi(o,s),l=BA(a)?a.canActivate(e,t):qt(s,()=>a(e,t));return In(l).pipe(Dt())}));return b(i).pipe(vi())}function KA(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>FA(s)).filter(s=>s!==null).map(s=>Ls(()=>{let a=s.guards.map(l=>{let c=Oo(s.node)??n,u=yi(l,c),d=$A(u)?u.canActivateChild(r,t):qt(c,()=>u(r,t));return In(d).pipe(Dt())});return b(a).pipe(vi())}));return b(o).pipe(vi())}function ZA(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return b(!0);let s=o.map(a=>{let l=Oo(e)??i,c=yi(a,l),u=UA(c)?c.canDeactivate(t,e,n,r):qt(l,()=>c(t,e,n,r));return In(u).pipe(Dt())});return b(s).pipe(vi())}function JA(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return b(!0);let o=i.map(s=>{let a=yi(s,t),l=jA(a)?a.canLoad(e,n):qt(t,()=>a(e,n));return In(l)});return b(o).pipe(vi(),j_(r))}function j_(t){return Ac(ve(e=>{if(gi(e))throw F_(t,e)}),R(e=>e===!0))}function XA(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return b(!0);let o=i.map(s=>{let a=yi(s,t),l=HA(a)?a.canMatch(e,n):qt(t,()=>a(e,n));return In(l)});return b(o).pipe(vi(),j_(r))}var To=class{constructor(e){this.segmentGroup=e||null}},al=class extends Error{constructor(e){super(),this.urlTree=e}};function ui(t){return Vr(new To(t))}function ex(t){return Vr(new _(4e3,!1))}function tx(t){return Vr(k_(!1,ze.GuardRejected))}var Ff=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return b(r);if(i.numberOfChildren>1||!i.children[N])return ex(e.redirectTo);i=i.children[N]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new al(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new Cn(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o.startsWith(":")){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(e,l,r,i)}),new Q(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new _(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},kf={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function nx(t,e,n,r,i){let o=Wf(t,e,n);return o.matched?(r=NA(e,r),XA(r,e,n,i).pipe(R(s=>s===!0?o:v({},kf)))):b(o)}function Wf(t,e,n){if(e.path==="**")return rx(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?v({},kf):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||XT)(n,t,e);if(!i)return v({},kf);let o={};Object.entries(i.posParams??{}).forEach(([a,l])=>{o[a]=l.path});let s=i.consumed.length>0?v(v({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function rx(t){return{matched:!0,parameters:t.length>0?y_(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function p_(t,e,n,r){return n.length>0&&sx(t,n,r)?{segmentGroup:new Q(e,ox(r,new Q(n,t.children))),slicedSegments:[]}:n.length===0&&ax(t,n,r)?{segmentGroup:new Q(t.segments,ix(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Q(t.segments,t.children),slicedSegments:n}}function ix(t,e,n,r){let i={};for(let o of n)if(ul(t,e,o)&&!r[Pt(o)]){let s=new Q([],{});i[Pt(o)]=s}return v(v({},r),i)}function ox(t,e){let n={};n[N]=e;for(let r of t)if(r.path===""&&Pt(r)!==N){let i=new Q([],{});n[Pt(r)]=i}return n}function sx(t,e,n){return n.some(r=>ul(t,e,r)&&Pt(r)!==N)}function ax(t,e,n){return n.some(r=>ul(t,e,r))}function ul(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function lx(t,e,n,r){return Pt(t)!==r&&(r===N||!ul(e,n,t))?!1:Wf(e,t,n).matched}function cx(t,e,n){return e.length===0&&!t.children[n]}var Lf=class{};function ux(t,e,n,r,i,o,s="emptyOnly"){return new Vf(t,e,n,r,i,s,o).recognize()}var dx=31,Vf=class{constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Ff(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new _(4002,`'${e.segmentGroup}'`)}recognize(){let e=p_(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(R(n=>{let r=new So([],Object.freeze({}),Object.freeze(v({},this.urlTree.queryParams)),this.urlTree.fragment,{},N,this.rootComponentType,null,{}),i=new Ge(r,n),o=new ol("",i),s=yA(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,N).pipe(ln(r=>{if(r instanceof al)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof To?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=Bf(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(o=>this.inheritParamsAndData(o,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(R(o=>o instanceof Ge?[o]:[]))}processChildren(e,n,r){let i=[];for(let o of Object.keys(r.children))o==="primary"?i.unshift(o):i.push(o);return ne(i).pipe(Hn(o=>{let s=r.children[o],a=RA(n,o);return this.processSegmentGroup(e,a,s,o)}),Lc((o,s)=>(o.push(...s),o)),cn(null),kc(),ae(o=>{if(o===null)return ui(r);let s=B_(o);return fx(s),b(s)}))}processSegment(e,n,r,i,o,s){return ne(n).pipe(Hn(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,o,s).pipe(ln(l=>{if(l instanceof To)return b(null);throw l}))),Dt(a=>!!a),ln(a=>{if(V_(a))return cx(r,i,o)?b(new Lf):ui(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,o,s,a){return lx(r,i,o,s)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s):ui(i):ui(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s){let{matched:a,consumedSegments:l,positionalParamSegments:c,remainingSegments:u}=Wf(n,i,o);if(!a)return ui(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>dx&&(this.allowRedirects=!1));let d=this.applyRedirects.applyRedirectCommands(l,i.redirectTo,c);return this.applyRedirects.lineralizeSegments(i,d).pipe(ae(f=>this.processSegment(e,r,n,f.concat(u),s,!1)))}matchSegmentAgainstRoute(e,n,r,i,o){let s=nx(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),s.pipe(Ze(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Ze(({routes:l})=>{let c=r._loadedInjector??e,{consumedSegments:u,remainingSegments:d,parameters:f}=a,h=new So(u,f,Object.freeze(v({},this.urlTree.queryParams)),this.urlTree.fragment,px(r),Pt(r),r.component??r._loadedComponent??null,r,gx(r)),{segmentGroup:p,slicedSegments:y}=p_(n,u,d,l);if(y.length===0&&p.hasChildren())return this.processChildren(c,l,p).pipe(R(B=>B===null?null:new Ge(h,B)));if(l.length===0&&y.length===0)return b(new Ge(h,[]));let F=Pt(r)===o;return this.processSegment(c,l,p,y,F?N:o,!0).pipe(R(B=>new Ge(h,B instanceof Ge?[B]:[])))}))):ui(n)))}getChildConfig(e,n,r){return n.children?b({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?b({routes:n._loadedRoutes,injector:n._loadedInjector}):JA(e,n,r,this.urlSerializer).pipe(ae(i=>i?this.configLoader.loadChildren(e,n).pipe(ve(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):tx(n))):b({routes:[],injector:e})}};function fx(t){t.sort((e,n)=>e.value.outlet===N?-1:n.value.outlet===N?1:e.value.outlet.localeCompare(n.value.outlet))}function hx(t){let e=t.value.routeConfig;return e&&e.path===""}function B_(t){let e=[],n=new Set;for(let r of t){if(!hx(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=B_(r.children);e.push(new Ge(r.value,i))}return e.filter(r=>!n.has(r))}function px(t){return t.data||{}}function gx(t){return t.resolve||{}}function mx(t,e,n,r,i,o){return ae(s=>ux(t,e,n,r,s.extractedUrl,i,o).pipe(R(({state:a,tree:l})=>Z(v({},s),{targetSnapshot:a,urlAfterRedirects:l}))))}function vx(t,e){return ae(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return b(n);let o=new Set(i.map(l=>l.route)),s=new Set;for(let l of o)if(!s.has(l))for(let c of $_(l))s.add(c);let a=0;return ne(s).pipe(Hn(l=>o.has(l)?yx(l,r,t,e):(l.data=Bf(l,l.parent,t).resolve,b(void 0))),ve(()=>a++),$r(1),ae(l=>a===s.size?b(n):$e))})}function $_(t){let e=t.children.map(n=>$_(n)).flat();return[t,...e]}function yx(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!O_(i)&&(o[xo]=i.title),_x(o,t,e,r).pipe(R(s=>(t._resolvedData=s,t.data=Bf(t,t.parent,n).resolve,null)))}function _x(t,e,n,r){let i=gf(t);if(i.length===0)return b({});let o={};return ne(i).pipe(ae(s=>wx(t[s],e,n,r).pipe(Dt(),ve(a=>{o[s]=a}))),$r(1),Fc(o),ln(s=>V_(s)?$e:Vr(s)))}function wx(t,e,n,r){let i=Oo(e)??r,o=yi(t,i),s=o.resolve?o.resolve(e,n):qt(i,()=>o(e,n));return In(s)}function hf(t){return Ze(e=>{let n=t(e);return n?ne(n).pipe(R(()=>e)):b(e)})}var U_=(()=>{let e=class e{buildTitle(r){let i,o=r.root;for(;o!==void 0;)i=this.getResolvedTitleForRoute(o)??i,o=o.children.find(s=>s.outlet===N);return i}getResolvedTitleForRoute(r){return r.data[xo]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=w({token:e,factory:()=>m(Cx),providedIn:"root"});let t=e;return t})(),Cx=(()=>{let e=class e extends U_{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(A(l_))},e.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Fo=new I("",{providedIn:"root",factory:()=>({})}),Ao=new I(""),Gf=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=m($a)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return b(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=In(r.loadComponent()).pipe(R(H_),ve(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),Gi(()=>{this.componentLoaders.delete(r)})),o=new Lr(i,()=>new Ce).pipe(kr());return this.componentLoaders.set(r,o),o}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return b({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let s=Dx(i,this.compiler,r,this.onLoadEndListener).pipe(Gi(()=>{this.childrenLoaders.delete(i)})),a=new Lr(s,()=>new Ce).pipe(kr());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Dx(t,e,n,r){return In(t.loadChildren()).pipe(R(H_),ae(i=>i instanceof to||Array.isArray(i)?b(i):ne(e.compileModuleAsync(i))),R(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(Ao,[],{optional:!0,self:!0}).flat()),{routes:s.map(Hf),injector:o}}))}function Ex(t){return t&&typeof t=="object"&&"default"in t}function H_(t){return Ex(t)?t.default:t}var zf=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=w({token:e,factory:()=>m(bx),providedIn:"root"});let t=e;return t})(),bx=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),W_=new I(""),G_=new I("");function Ix(t,e,n){let r=t.get(G_),i=t.get(Pe);return t.get(re).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,Promise.resolve();let o,s=new Promise(c=>{o=c}),a=i.startViewTransition(()=>(o(),Sx(t))),{onViewTransitionCreated:l}=r;return l&&qt(t,()=>l({transition:a,from:e,to:n})),s})}function Sx(t){return new Promise(e=>{Rd(e,{injector:t})})}var qf=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ce,this.transitionAbortSubject=new Ce,this.configLoader=m(Gf),this.environmentInjector=m(He),this.urlSerializer=m(No),this.rootContexts=m(Ro),this.location=m(li),this.inputBindingEnabled=m(cl,{optional:!0})!==null,this.titleStrategy=m(U_),this.options=m(Fo,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=m(zf),this.createViewTransition=m(W_,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>b(void 0),this.rootComponentType=null;let r=o=>this.events.next(new Ef(o)),i=o=>this.events.next(new bf(o));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(Z(v(v({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,o){return this.transitions=new ie({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:_o,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ke(s=>s.id!==0),R(s=>Z(v({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Ze(s=>{let a=!1,l=!1;return b(s).pipe(Ze(c=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",ze.SupersededByNewNavigation),$e;this.currentTransition=s,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?Z(v({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let u=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=c.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!u&&d!=="reload"){let f="";return this.events.next(new En(c.id,this.urlSerializer.serialize(c.rawUrl),f,el.IgnoredSameUrlNavigation)),c.resolve(null),$e}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return b(c).pipe(Ze(f=>{let h=this.transitions?.getValue();return this.events.next(new mi(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),h!==this.transitions?.getValue()?$e:Promise.resolve(f)}),mx(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),ve(f=>{s.targetSnapshot=f.targetSnapshot,s.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation=Z(v({},this.currentNavigation),{finalUrl:f.urlAfterRedirects});let h=new tl(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(h)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:f,extractedUrl:h,source:p,restoredState:y,extras:F}=c,B=new mi(f,this.urlSerializer.serialize(h),p,y);this.events.next(B);let Ae=N_(this.rootComponentType).snapshot;return this.currentTransition=s=Z(v({},c),{targetSnapshot:Ae,urlAfterRedirects:h,extras:Z(v({},F),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=h,b(s)}else{let f="";return this.events.next(new En(c.id,this.urlSerializer.serialize(c.extractedUrl),f,el.IgnoredByUrlHandlingStrategy)),c.resolve(null),$e}}),ve(c=>{let u=new _f(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),R(c=>(this.currentTransition=s=Z(v({},c),{guards:PA(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),s)),WA(this.environmentInjector,c=>this.events.next(c)),ve(c=>{if(s.guardsResult=c.guardsResult,gi(c.guardsResult))throw F_(this.urlSerializer,c.guardsResult);let u=new wf(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(u)}),Ke(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",ze.GuardRejected),!1)),hf(c=>{if(c.guards.canActivateChecks.length)return b(c).pipe(ve(u=>{let d=new Cf(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),Ze(u=>{let d=!1;return b(u).pipe(vx(this.paramsInheritanceStrategy,this.environmentInjector),ve({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(u,"",ze.NoDataFromResolver)}}))}),ve(u=>{let d=new Df(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}))}),hf(c=>{let u=d=>{let f=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(d.routeConfig).pipe(ve(h=>{d.component=h}),R(()=>{})));for(let h of d.children)f.push(...u(h));return f};return an(u(c.targetSnapshot.root)).pipe(cn(null),Wt(1))}),hf(()=>this.afterPreactivation()),Ze(()=>{let{currentSnapshot:c,targetSnapshot:u}=s,d=this.createViewTransition?.(this.environmentInjector,c.root,u.root);return d?ne(d).pipe(R(()=>s)):b(s)}),R(c=>{let u=SA(r.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=s=Z(v({},c),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,s}),ve(()=>{this.events.next(new bo)}),OA(this.rootContexts,r.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Wt(1),ve({next:c=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ot(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{a=!0}}),Vc(this.transitionAbortSubject.pipe(ve(c=>{throw c}))),Gi(()=>{!a&&!l&&this.cancelNavigationTransition(s,"",ze.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),ln(c=>{if(l=!0,L_(c))this.events.next(new Dn(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),AA(c)?this.events.next(new Io(c.url)):s.resolve(!1);else{this.events.next(new Eo(s.id,this.urlSerializer.serialize(s.extractedUrl),c,s.targetSnapshot??void 0));try{s.resolve(r.errorHandler(c))}catch(u){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(u)}}return $e}))}))}cancelNavigationTransition(r,i,o){let s=new Dn(r.id,this.urlSerializer.serialize(r.extractedUrl),i,o);this.events.next(s),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Mx(t){return t!==_o}var Tx=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=w({token:e,factory:()=>m(Ax),providedIn:"root"});let t=e;return t})(),jf=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},Ax=(()=>{let e=class e extends jf{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=ao(e)))(o||e)}})(),e.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),z_=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=w({token:e,factory:()=>m(xx),providedIn:"root"});let t=e;return t})(),xx=(()=>{let e=class e extends z_{constructor(){super(...arguments),this.location=m(li),this.urlSerializer=m(No),this.options=m(Fo,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=m(zf),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Cn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=N_(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof mi)this.stateMemento=this.createStateMemento();else if(r instanceof En)this.rawUrlTree=i.initialUrl;else if(r instanceof tl){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(o,i)}}else r instanceof bo?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof Dn&&(r.code===ze.GuardRejected||r.code===ze.NoDataFromResolver)?this.restoreHistory(i):r instanceof Eo?this.restoreHistory(i,!0):r instanceof Ot&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let o=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(o)||i.extras.replaceUrl){let s=this.browserPageId,a=v(v({},i.extras.state),this.generateNgRouterState(i.id,s));this.location.replaceState(o,"",a)}else{let s=v(v({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(o,"",s)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.currentUrlTree===r.finalUrl&&s===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=ao(e)))(o||e)}})(),e.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),vo=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(vo||{});function q_(t,e){t.events.pipe(Ke(n=>n instanceof Ot||n instanceof Dn||n instanceof Eo||n instanceof En),R(n=>n instanceof Ot||n instanceof En?vo.COMPLETE:(n instanceof Dn?n.code===ze.Redirect||n.code===ze.SupersededByNewNavigation:!1)?vo.REDIRECTING:vo.FAILED),Ke(n=>n!==vo.REDIRECTING),Wt(1)).subscribe(()=>{e()})}function Nx(t){throw t}var Rx={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ox={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},qe=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=m(Va),this.stateManager=m(z_),this.options=m(Fo,{optional:!0})||{},this.pendingTasks=m(Oa),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=m(qf),this.urlSerializer=m(No),this.location=m(li),this.urlHandlingStrategy=m(zf),this._events=new Ce,this.errorHandler=this.options.errorHandler||Nx,this.navigated=!1,this.routeReuseStrategy=m(Tx),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=m(Ao,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!m(cl,{optional:!0}),this.eventsSubscription=new ue,this.isNgZoneEnabled=m(re)instanceof re&&re.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof Dn&&i.code!==ze.Redirect&&i.code!==ze.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Ot)this.navigated=!0;else if(i instanceof Io){let a=this.urlHandlingStrategy.merge(i.url,o.currentRawUrl),l={info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||Mx(o.source)};this.scheduleNavigation(a,_o,null,l,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}Fx(i)&&this._events.next(i)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),_o,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,o){let s={replaceUrl:!0},a=o?.navigationId?o:null;if(o){let c=v({},o);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let l=this.parseUrl(r);this.scheduleNavigation(l,i,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(Hf),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:l,preserveFragment:c}=i,u=c?this.currentUrlTree.fragment:a,d=null;switch(l){case"merge":d=v(v({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}d!==null&&(d=this.removeEmptyProps(d));let f;try{let h=o?o.snapshot:this.routerState.snapshot.root;f=M_(h)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),f=this.currentUrlTree.root}return T_(f,r,d,u??null)}navigateByUrl(r,i={skipLocationChange:!1}){let o=gi(r)?r:this.parseUrl(r),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,_o,null,i)}navigate(r,i={skipLocationChange:!1}){return Px(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let o;if(i===!0?o=v({},Rx):i===!1?o=v({},Ox):o=i,gi(r))return c_(this.currentUrlTree,r,o);let s=this.parseUrl(r);return c_(this.currentUrlTree,s,o)}removeEmptyProps(r){return Object.entries(r).reduce((i,[o,s])=>(s!=null&&(i[o]=s),i),{})}scheduleNavigation(r,i,o,s,a){if(this.disposed)return Promise.resolve(!1);let l,c,u;a?(l=a.resolve,c=a.reject,u=a.promise):u=new Promise((f,h)=>{l=f,c=h});let d=this.pendingTasks.add();return q_(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:s,resolve:l,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(f=>Promise.reject(f))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Px(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new _(4008,!1)}function Fx(t){return!(t instanceof bo)&&!(t instanceof Io)}var dl=(()=>{let e=class e{constructor(r,i,o,s,a,l){this.router=r,this.route=i,this.tabIndexAttribute=o,this.renderer=s,this.el=a,this.locationStrategy=l,this.href=null,this.commands=null,this.onChanges=new Ce,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let c=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area",this.isAnchorElement?this.subscription=r.events.subscribe(u=>{u instanceof Ot&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(r){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",r)}ngOnChanges(r){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(r){r!=null?(this.commands=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(r,i,o,s,a){let l=this.urlTree;if(l===null||this.isAnchorElement&&(r!==0||i||o||s||a||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(l,c),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let r=this.urlTree;this.href=r!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(r)):null;let i=this.href===null?null:Wv(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(r,i){let o=this.renderer,s=this.el.nativeElement;i!==null?o.setAttribute(s,r,i):o.removeAttribute(s,r)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(i){return new(i||e)(C(qe),C(bn),pd("tabindex"),C(yn),C(et),C(nn))},e.\u0275dir=we({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,o){i&1&&De("click",function(a){return o.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),i&2&&Pa("target",o.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[le.HasDecoratorInputTransform,"preserveFragment","preserveFragment",ai],skipLocationChange:[le.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",ai],replaceUrl:[le.HasDecoratorInputTransform,"replaceUrl","replaceUrl",ai],routerLink:"routerLink"},standalone:!0,features:[Fd,Kt]});let t=e;return t})();var ll=class{};var kx=(()=>{let e=class e{constructor(r,i,o,s,a){this.router=r,this.injector=o,this.preloadingStrategy=s,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(Ke(r=>r instanceof Ot),Hn(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){let o=[];for(let s of i){s.providers&&!s._injector&&(s._injector=Ra(s.providers,r,`Route: ${s.path}`));let a=s._injector??r,l=s._loadedInjector??a;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&o.push(this.preloadConfig(a,s)),(s.children||s._loadedRoutes)&&o.push(this.processRoutes(l,s.children??s._loadedRoutes))}return ne(o).pipe(jr())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let o;i.loadChildren&&i.canLoad===void 0?o=this.loader.loadChildren(r,i):o=b(null);let s=o.pipe(ae(a=>a===null?b(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??r,a.routes))));if(i.loadComponent&&!i._loadedComponent){let a=this.loader.loadComponent(i);return ne([s,a]).pipe(jr())}else return s})}};e.\u0275fac=function(i){return new(i||e)(A(qe),A($a),A(He),A(ll),A(Gf))},e.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Y_=new I(""),Lx=(()=>{let e=class e{constructor(r,i,o,s,a={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=o,this.zone=s,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof mi?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof Ot?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof En&&r.code===el.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof nl&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new nl(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(i){ny()},e.\u0275prov=w({token:e,factory:e.\u0275fac});let t=e;return t})();function Q_(t,...e){return Ca([{provide:Ao,multi:!0,useValue:t},[],{provide:bn,useFactory:K_,deps:[qe]},{provide:Ba,multi:!0,useFactory:Z_},e.map(n=>n.\u0275providers)])}function K_(t){return t.routerState.root}function ko(t,e){return{\u0275kind:t,\u0275providers:e}}function Z_(){let t=m(Zt);return e=>{let n=t.get(uo);if(e!==n.components[0])return;let r=t.get(qe),i=t.get(J_);t.get(Yf)===1&&r.initialNavigation(),t.get(X_,null,k.Optional)?.setUpPreloading(),t.get(Y_,null,k.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var J_=new I("",{factory:()=>new Ce}),Yf=new I("",{providedIn:"root",factory:()=>1});function Vx(){return ko(2,[{provide:Yf,useValue:0},{provide:ja,multi:!0,deps:[Zt],useFactory:e=>{let n=e.get(zy,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let i=e.get(qe),o=e.get(J_);q_(i,()=>{r(!0)}),e.get(qf).afterPreactivation=()=>(r(!0),o.closed?b(void 0):o),i.initialNavigation()}))}}])}function jx(){return ko(3,[{provide:ja,multi:!0,useFactory:()=>{let e=m(qe);return()=>{e.setUpLocationChangeListener()}}},{provide:Yf,useValue:2}])}var X_=new I("");function Bx(t){return ko(0,[{provide:X_,useExisting:kx},{provide:ll,useExisting:t}])}function $x(){return ko(8,[h_,{provide:cl,useExisting:h_}])}function Ux(t){let e=[{provide:W_,useValue:Ix},{provide:G_,useValue:v({skipNextTransition:!!t?.skipInitialTransition},t)}];return ko(9,e)}var g_=new I("ROUTER_FORROOT_GUARD"),Hx=[li,{provide:No,useClass:Co},qe,Ro,{provide:bn,useFactory:K_,deps:[qe]},Gf,[]],Sn=(()=>{let e=class e{constructor(r){}static forRoot(r,i){return{ngModule:e,providers:[Hx,[],{provide:Ao,multi:!0,useValue:r},{provide:g_,useFactory:qx,deps:[[qe,new _a,new Ku]]},{provide:Fo,useValue:i||{}},i?.useHash?Gx():zx(),Wx(),i?.preloadingStrategy?Bx(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?Yx(i):[],i?.bindToComponentInputs?$x().\u0275providers:[],i?.enableViewTransitions?Ux().\u0275providers:[],Qx()]}}static forChild(r){return{ngModule:e,providers:[{provide:Ao,multi:!0,useValue:r}]}}};e.\u0275fac=function(i){return new(i||e)(A(g_,8))},e.\u0275mod=pt({type:e}),e.\u0275inj=ht({});let t=e;return t})();function Wx(){return{provide:Y_,useFactory:()=>{let t=m(Xy),e=m(re),n=m(Fo),r=m(qf),i=m(No);return n.scrollOffset&&t.setOffset(n.scrollOffset),new Lx(i,r,t,e,n)}}}function Gx(){return{provide:nn,useClass:Yy}}function zx(){return{provide:nn,useClass:Xd}}function qx(t){return"guarded"}function Yx(t){return[t.initialNavigation==="disabled"?jx().\u0275providers:[],t.initialNavigation==="enabledBlocking"?Vx().\u0275providers:[]]}var m_=new I("");function Qx(){return[{provide:m_,useFactory:Z_},{provide:Ba,multi:!0,useExisting:m_}]}var Qf={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var g=function(t,e){if(!t)throw fr(e)},fr=function(t){return new Error("Firebase Database ("+Qf.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};var tw=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Kx=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],a=t[n++],l=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},pl={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,a=s?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,u=o>>2,d=(o&3)<<4|a>>4,f=(a&15)<<2|c>>6,h=c&63;l||(h=64,s||(f=64)),r.push(n[u],n[d],n[f],n[h])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(tw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Kx(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let c=i<t.length?n[t.charAt(i)]:64;++i;let d=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||c==null||d==null)throw new Kf;let f=o<<2|a>>4;if(r.push(f),c!==64){let h=a<<4&240|c>>2;if(r.push(h),d!==64){let p=c<<6&192|d;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Kf=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Jf=function(t){let e=tw(t);return pl.encodeByteArray(e,!0)},Lo=function(t){return Jf(t).replace(/\./g,"")},Zf=function(t){try{return pl.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function nw(t){return rw(void 0,t)}function rw(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(let n in e)!e.hasOwnProperty(n)||!Zx(n)||(t[n]=rw(t[n],e[n]));return t}function Zx(t){return t!=="__proto__"}function Jx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var Xx=()=>Jx().__FIREBASE_DEFAULTS__,eN=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},tN=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Zf(t[1]);return e&&JSON.parse(e)},iw=()=>{try{return Xx()||eN()||tN()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},nN=t=>{var e,n;return(n=(e=iw())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},ow=t=>{let e=nN(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Xf=()=>{var t;return(t=iw())===null||t===void 0?void 0:t.config};var Mn=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function sw(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Lo(JSON.stringify(n)),Lo(JSON.stringify(s)),""].join(".")}function rN(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function eh(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rN())}function aw(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function lw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Ft(){return Qf.NODE_CLIENT===!0||Qf.NODE_ADMIN===!0}function gl(){try{return typeof indexedDB=="object"}catch{return!1}}function ml(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}function cw(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}var iN="FirebaseError",mt=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=iN,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,rn.prototype.create)}},rn=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?oN(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new mt(i,a,r)}};function oN(t,e){return t.replace(sN,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var sN=/\{\$([^}]+)}/g;function _i(t){return JSON.parse(t)}function ce(t){return JSON.stringify(t)}var uw=function(t){let e={},n={},r={},i="";try{let o=t.split(".");e=_i(Zf(o[0])||""),n=_i(Zf(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}};var dw=function(t){let e=uw(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},fw=function(t){let e=uw(t).claims;return typeof e=="object"&&e.admin===!0};function kt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function hr(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function th(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Vo(t,e,n){let r={};for(let i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function wi(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(ew(o)&&ew(s)){if(!wi(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function ew(t){return t!==null&&typeof t=="object"}function hw(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}var hl=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);let r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){let f=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(f<<1|f>>>31)&4294967295}let i=this.chain_[0],o=this.chain_[1],s=this.chain_[2],a=this.chain_[3],l=this.chain_[4],c,u;for(let d=0;d<80;d++){d<40?d<20?(c=a^o&(s^a),u=1518500249):(c=o^s^a,u=1859775393):d<60?(c=o&s|a&(o|s),u=2400959708):(c=o^s^a,u=3395469782);let f=(i<<5|i>>>27)+c+l+u+r[d]&4294967295;l=a,a=s,s=(o<<30|o>>>2)&4294967295,o=i,i=f}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+s&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);let r=n-this.blockSize,i=0,o=this.buf_,s=this.inbuf_;for(;i<n;){if(s===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(o[s]=e.charCodeAt(i),++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}else for(;i<n;)if(o[s]=e[i],++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}this.inbuf_=s,this.total_+=n}digest(){let e=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let o=24;o>=0;o-=8)e[r]=this.chain_[i]>>o&255,++r;return e}};function vl(t,e){return`${t} failed: ${e} argument `}var pw=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){let o=i-55296;r++,g(r<t.length,"Surrogate pair missing trail surrogate.");let s=t.charCodeAt(r)-56320;i=65536+(o<<10)+s}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},jo=function(t){let e=0;for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};var aN=1e3,lN=2,cN=4*60*60*1e3,uN=.5;function nh(t,e=aN,n=lN){let r=e*Math.pow(n,t),i=Math.round(uN*r*(Math.random()-.5)*2);return Math.min(cN,r+i)}function Lt(t){return t&&t._delegate?t._delegate:t}var Me=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var pr="[DEFAULT]";var yl=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new Mn;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(fN(e))try{this.getOrInitializeService({instanceIdentifier:pr})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=pr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return S(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=pr){return this.instances.has(e)}getOptions(e=pr){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:dN(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=pr){return this.component?this.component.multipleInstances?e:pr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function dN(t){return t===pr?void 0:t}function fN(t){return t.instantiationMode==="EAGER"}var Bo=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new yl(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var hN=[],ee=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(ee||{}),pN={debug:ee.DEBUG,verbose:ee.VERBOSE,info:ee.INFO,warn:ee.WARN,error:ee.ERROR,silent:ee.SILENT},gN=ee.INFO,mN={[ee.DEBUG]:"log",[ee.VERBOSE]:"log",[ee.INFO]:"info",[ee.WARN]:"warn",[ee.ERROR]:"error"},vN=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=mN[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Tn=class{constructor(e){this.name=e,this._logLevel=gN,this._logHandler=vN,this._userLogHandler=null,hN.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ee))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?pN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ee.DEBUG,...e),this._logHandler(this,ee.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ee.VERBOSE,...e),this._logHandler(this,ee.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ee.INFO,...e),this._logHandler(this,ee.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ee.WARN,...e),this._logHandler(this,ee.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ee.ERROR,...e),this._logHandler(this,ee.ERROR,...e)}};var yN=(t,e)=>e.some(n=>t instanceof n),gw,mw;function _N(){return gw||(gw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function wN(){return mw||(mw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var vw=new WeakMap,ih=new WeakMap,yw=new WeakMap,rh=new WeakMap,sh=new WeakMap;function CN(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(Vt(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&vw.set(n,t)}).catch(()=>{}),sh.set(e,t),e}function DN(t){if(ih.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});ih.set(t,e)}var oh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ih.get(t);if(e==="objectStoreNames")return t.objectStoreNames||yw.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Vt(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function _w(t){oh=t(oh)}function EN(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(_l(this),e,...n);return yw.set(r,e.sort?e.sort():[e]),Vt(r)}:wN().includes(t)?function(...e){return t.apply(_l(this),e),Vt(vw.get(this))}:function(...e){return Vt(t.apply(_l(this),e))}}function bN(t){return typeof t=="function"?EN(t):(t instanceof IDBTransaction&&DN(t),yN(t,_N())?new Proxy(t,oh):t)}function Vt(t){if(t instanceof IDBRequest)return CN(t);if(rh.has(t))return rh.get(t);let e=bN(t);return e!==t&&(rh.set(t,e),sh.set(e,t)),e}var _l=t=>sh.get(t);function wl(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),a=Vt(s);return r&&s.addEventListener("upgradeneeded",l=>{r(Vt(s.result),l.oldVersion,l.newVersion,Vt(s.transaction),l)}),n&&s.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{o&&l.addEventListener("close",()=>o()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}var IN=["get","getKey","getAll","getAllKeys","count"],SN=["put","add","delete","clear"],ah=new Map;function ww(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ah.get(e))return ah.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=SN.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||IN.includes(n)))return;let o=function(s,...a){return S(this,null,function*(){let l=this.transaction(s,i?"readwrite":"readonly"),c=l.store;return r&&(c=c.index(a.shift())),(yield Promise.all([c[n](...a),i&&l.done]))[0]})};return ah.set(e,o),o}_w(t=>Z(v({},t),{get:(e,n,r)=>ww(e,n)||t.get(e,n,r),has:(e,n)=>!!ww(e,n)||t.has(e,n)}));var ch=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(MN(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function MN(t){let e=t.getComponent();return e?.type==="VERSION"}var uh="@firebase/app",Cw="0.10.0";var gr=new Tn("@firebase/app"),TN="@firebase/app-compat",AN="@firebase/analytics-compat",xN="@firebase/analytics",NN="@firebase/app-check-compat",RN="@firebase/app-check",ON="@firebase/auth",PN="@firebase/auth-compat",FN="@firebase/database",kN="@firebase/database-compat",LN="@firebase/functions",VN="@firebase/functions-compat",jN="@firebase/installations",BN="@firebase/installations-compat",$N="@firebase/messaging",UN="@firebase/messaging-compat",HN="@firebase/performance",WN="@firebase/performance-compat",GN="@firebase/remote-config",zN="@firebase/remote-config-compat",qN="@firebase/storage",YN="@firebase/storage-compat",QN="@firebase/firestore",KN="@firebase/firestore-compat",ZN="firebase",JN="10.10.0";var dh="[DEFAULT]",XN={[uh]:"fire-core",[TN]:"fire-core-compat",[xN]:"fire-analytics",[AN]:"fire-analytics-compat",[RN]:"fire-app-check",[NN]:"fire-app-check-compat",[ON]:"fire-auth",[PN]:"fire-auth-compat",[FN]:"fire-rtdb",[kN]:"fire-rtdb-compat",[LN]:"fire-fn",[VN]:"fire-fn-compat",[jN]:"fire-iid",[BN]:"fire-iid-compat",[$N]:"fire-fcm",[UN]:"fire-fcm-compat",[HN]:"fire-perf",[WN]:"fire-perf-compat",[GN]:"fire-rc",[zN]:"fire-rc-compat",[qN]:"fire-gcs",[YN]:"fire-gcs-compat",[QN]:"fire-fst",[KN]:"fire-fst-compat","fire-js":"fire-js",[ZN]:"fire-js-all"};var Cl=new Map,eR=new Map,fh=new Map;function Dw(t,e){try{t.container.addComponent(e)}catch(n){gr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function vt(t){let e=t.name;if(fh.has(e))return gr.debug(`There were multiple attempts to register component ${e}.`),!1;fh.set(e,t);for(let n of Cl.values())Dw(n,t);for(let n of eR.values())Dw(n,t);return!0}function xn(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}var tR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},An=new rn("app","Firebase",tR);var hh=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Me("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw An.create("app-deleted",{appName:this._name})}};var Sw=JN;function mh(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:dh,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw An.create("bad-app-name",{appName:String(i)});if(n||(n=Xf()),!n)throw An.create("no-options");let o=Cl.get(i);if(o){if(wi(n,o.options)&&wi(r,o.config))return o;throw An.create("duplicate-app",{appName:i})}let s=new Bo(i);for(let l of fh.values())s.addComponent(l);let a=new hh(n,r,s);return Cl.set(i,a),a}function Uo(t=dh){let e=Cl.get(t);if(!e&&t===dh&&Xf())return mh();if(!e)throw An.create("no-app",{appName:t});return e}function Fe(t,e,n){var r;let i=(r=XN[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),gr.warn(a.join(" "));return}vt(new Me(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var nR="firebase-heartbeat-database",rR=1,$o="firebase-heartbeat-store",lh=null;function Mw(){return lh||(lh=wl(nR,rR,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore($o)}catch(n){console.warn(n)}}}}).catch(t=>{throw An.create("idb-open",{originalErrorMessage:t.message})})),lh}function iR(t){return S(this,null,function*(){try{let n=(yield Mw()).transaction($o),r=yield n.objectStore($o).get(Tw(t));return yield n.done,r}catch(e){if(e instanceof mt)gr.warn(e.message);else{let n=An.create("idb-get",{originalErrorMessage:e?.message});gr.warn(n.message)}}})}function Ew(t,e){return S(this,null,function*(){try{let r=(yield Mw()).transaction($o,"readwrite");yield r.objectStore($o).put(e,Tw(t)),yield r.done}catch(n){if(n instanceof mt)gr.warn(n.message);else{let r=An.create("idb-set",{originalErrorMessage:n?.message});gr.warn(r.message)}}})}function Tw(t){return`${t.name}!${t.options.appId}`}var oR=1024,sR=30*24*60*60*1e3,ph=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new gh(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return S(this,null,function*(){var e,n;let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=bw();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o)))return this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{let a=new Date(s.date).valueOf();return Date.now()-a<=sR}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return S(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=bw(),{heartbeatsToSend:r,unsentEntries:i}=aR(this._heartbeatsCache.heartbeats),o=Lo(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o})}};function bw(){return new Date().toISOString().substring(0,10)}function aR(t,e=oR){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),Iw(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Iw(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var gh=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return S(this,null,function*(){return gl()?ml().then(()=>!0).catch(()=>!1):!1})}read(){return S(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield iR(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return S(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Ew(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return S(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Ew(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function Iw(t){return Lo(JSON.stringify({version:2,heartbeats:t})).length}function lR(t){vt(new Me("platform-logger",e=>new ch(e),"PRIVATE")),vt(new Me("heartbeat",e=>new ph(e),"PRIVATE")),Fe(uh,Cw,t),Fe(uh,Cw,"esm2017"),Fe("fire-js","")}lR("");var cR="firebase",uR="10.10.0";Fe(cR,uR,"app");var Aw="@firebase/database",xw="1.0.4";var vp="";function dR(t){vp=t}var bh=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ce(n))}get(e){let n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:_i(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var Ih=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return kt(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var lC=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){let e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new bh(e)}}catch{}return new Ih},vr=lC("localStorage"),Sh=lC("sessionStorage");var Ei=new Tn("@firebase/database"),fR=function(){let t=1;return function(){return t++}}(),cC=function(t){let e=pw(t),n=new hl;n.update(e);let r=n.digest();return pl.encodeByteArray(r)},ss=function(...t){let e="";for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=ss.apply(null,r):typeof r=="object"?e+=ce(r):e+=r,e+=" "}return e},_r=null,Nw=!0,hR=function(t,e){g(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(Ei.logLevel=ee.VERBOSE,_r=Ei.log.bind(Ei),e&&Sh.set("logging_enabled",!0)):typeof t=="function"?_r=t:(_r=null,Sh.remove("logging_enabled"))},Ee=function(...t){if(Nw===!0&&(Nw=!1,_r===null&&Sh.get("logging_enabled")===!0&&hR(!0)),_r){let e=ss.apply(null,t);_r(e)}},as=function(t){return function(...e){Ee(t,...e)}},Mh=function(...t){let e="FIREBASE INTERNAL ERROR: "+ss(...t);Ei.error(e)},on=function(...t){let e=`FIREBASE FATAL ERROR: ${ss(...t)}`;throw Ei.error(e),new Error(e)},ke=function(...t){let e="FIREBASE WARNING: "+ss(...t);Ei.warn(e)},pR=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&ke("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},uC=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},gR=function(t){if(Ft()||document.readyState==="complete")t();else{let e=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Ii="[MIN_NAME]",wr="[MAX_NAME]",Ri=function(t,e){if(t===e)return 0;if(t===Ii||e===wr)return-1;if(e===Ii||t===wr)return 1;{let n=Rw(t),r=Rw(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},mR=function(t,e){return t===e?0:t<e?-1:1},Ho=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+ce(e))},yp=function(t){if(typeof t!="object"||t===null)return ce(t);let e=[];for(let r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=ce(e[r]),n+=":",n+=yp(t[e[r]]);return n+="}",n},dC=function(t,e){let n=t.length;if(n<=e)return[t];let r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function Le(t,e){for(let n in t)t.hasOwnProperty(n)&&e(n,t[n])}var fC=function(t){g(!uC(t),"Invalid JSON number");let e=11,n=52,r=(1<<e-1)-1,i,o,s,a,l;t===0?(o=0,s=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),o=a+r,s=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(o=0,s=Math.round(t/Math.pow(2,1-r-n))));let c=[];for(l=n;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);for(l=e;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);c.push(i?1:0),c.reverse();let u=c.join(""),d="";for(l=0;l<64;l+=8){let f=parseInt(u.substr(l,8),2).toString(16);f.length===1&&(f="0"+f),d=d+f}return d.toLowerCase()},vR=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},yR=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function _R(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");let r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}var wR=new RegExp("^-?(0*)\\d{1,10}$"),CR=-2147483648,DR=2147483647,Rw=function(t){if(wR.test(t)){let e=Number(t);if(e>=CR&&e<=DR)return e}return null},Oi=function(t){try{t()}catch(e){setTimeout(()=>{let n=e.stack||"";throw ke("Exception was thrown by user callback.",n),e},Math.floor(0))}},ER=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Yo=function(t,e){let n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var Th=class{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){ke(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var Ah=class{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Ee("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ke(e)}},Qo=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}t.OWNER="owner";return t})(),El="5",hC="v",pC="s",gC="r",mC="f",vC=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,yC="ls",_C="p",xh="ac",wC="websocket",CC="long_polling";var bl=class{constructor(e,n,r,i,o=!1,s="",a=!1,l=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=vr.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&vr.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}};function bR(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function DC(t,e,n){g(typeof e=="string","typeof type must == string"),g(typeof n=="object","typeof params must == object");let r;if(e===wC)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===CC)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);bR(t)&&(n.ns=t.namespace);let i=[];return Le(n,(o,s)=>{i.push(o+"="+s)}),r+i.join("&")}var Nh=class{constructor(){this.counters_={}}incrementCounter(e,n=1){kt(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return nw(this.counters_)}};var vh={},yh={};function _p(t){let e=t.toString();return vh[e]||(vh[e]=new Nh),vh[e]}function IR(t,e){let n=t.toString();return yh[n]||(yh[n]=e()),yh[n]}var Rh=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Oi(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var Ow="start",SR="close",MR="pLPCommand",TR="pRTLPCB",EC="id",bC="pw",IC="ser",AR="cb",xR="seg",NR="ts",RR="d",OR="dframe",SC=1870,MC=30,PR=SC-MC,FR=25e3,kR=3e4,Oh=class t{constructor(e,n,r,i,o,s,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=as(e),this.stats_=_p(n),this.urlFn=l=>(this.appCheckToken&&(l[xh]=this.appCheckToken),DC(n,CC,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Rh(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(kR)),gR(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Ph((...o)=>{let[s,a,l,c,u]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,s===Ow)this.id=a,this.password=l;else if(s===SR)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+s)},(...o)=>{let[s,a]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(s,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[Ow]="t",r[IC]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[AR]=this.scriptTagHolder.uniqueCallbackIdentifier),r[hC]=El,this.transportSessionId&&(r[pC]=this.transportSessionId),this.lastSessionId&&(r[yC]=this.lastSessionId),this.applicationId&&(r[_C]=this.applicationId),this.appCheckToken&&(r[xh]=this.appCheckToken),typeof location<"u"&&location.hostname&&vC.test(location.hostname)&&(r[gC]=mC);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){t.forceAllow_=!0}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){return Ft()?!1:t.forceAllow_?!0:!t.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!vR()&&!yR()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let n=ce(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=Jf(n),i=dC(r,PR);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(e,n){if(Ft())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[OR]="t",r[EC]=e,r[bC]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let n=ce(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},Ph=class t{constructor(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,Ft())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=fR(),window[MR+this.uniqueCallbackIdentifier]=e,window[TR+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');let s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(a){Ee("frame writing exception"),a.stack&&Ee(a.stack),Ee(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Ee("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[EC]=this.myID,e[bC]=this.myPW,e[IC]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+MC+r.length<=SC;){let s=this.pendingSegs.shift();r=r+"&"+xR+i+"="+s.seg+"&"+NR+i+"="+s.ts+"&"+RR+i+"="+s.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);let r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(FR)),o=()=>{clearTimeout(i),r()};this.addTag(e,o)}addTag(e,n){Ft()?this.doNodeLongPoll(e,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Ee("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var LR=16384,VR=45e3,Il=null;typeof MozWebSocket<"u"?Il=MozWebSocket:typeof WebSocket<"u"&&(Il=WebSocket);var Wo=(()=>{class t{constructor(n,r,i,o,s,a,l){this.connId=n,this.applicationId=i,this.appCheckToken=o,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=as(this.connId),this.stats_=_p(r),this.connURL=t.connectionURL_(r,a,l,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,o,s){let a={};return a[hC]=El,!Ft()&&typeof location<"u"&&location.hostname&&vC.test(location.hostname)&&(a[gC]=mC),r&&(a[pC]=r),i&&(a[yC]=i),o&&(a[xh]=o),s&&(a[_C]=s),DC(n,wC,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,vr.set("previous_websocket_failure",!0);try{let i;if(Ft()){let o=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${El}/${vp}/${process.platform}/${o}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let s=process.env,a=this.connURL.indexOf("wss://")===0?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new Il(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&Il!==null&&!t.forceDisallow_}static previouslyFailed(){return vr.isInMemoryStorage||vr.get("previous_websocket_failure")===!0}markConnectionHealthy(){vr.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=_i(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(g(this.frames===null,"We already have a frame buffer"),n.length<=6){let r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();let r=ce(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=dC(r,LR);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(VR))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4;return t})(),jR=(()=>{class t{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[Oh,Wo]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){let r=Wo&&Wo.isAvailable(),i=r&&!Wo.previouslyFailed();if(n.webSocketOnly&&(r||ke("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Wo];else{let o=this.transports_=[];for(let s of t.ALL_TRANSPORTS)s&&s.isAvailable()&&o.push(s);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}t.globalTransportInitialized_=!1;return t})(),BR=6e4,$R=5e3,UR=10*1024,HR=100*1024,_h="t",Pw="d",WR="s",Fw="r",GR="e",kw="o",Lw="a",Vw="n",jw="p",zR="h",Fh=class{constructor(e,n,r,i,o,s,a,l,c,u){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=as("c:"+this.id+":"),this.transportManager_=new jR(n),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Yo(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>HR?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>UR?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){let n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(_h in e){let n=e[_h];n===Lw?this.upgradeIfSecondaryHealthy_():n===Fw?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===kw&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let n=Ho("t",e),r=Ho("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:jw,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Lw,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Vw,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let n=Ho("t",e),r=Ho("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let n=Ho(_h,e);if(Pw in e){let r=e[Pw];if(n===zR){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===Vw){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===WR?this.onConnectionShutdown_(r):n===Fw?this.onReset_(r):n===GR?Mh("Server Error: "+r):n===kw?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Mh("Unknown control packet command: "+n)}}onHandshake_(e){let n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),El!==r&&ke("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Yo(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(BR))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Yo(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor($R))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:jw,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(vr.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var Sl=class{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}};var Ml=class{constructor(e){this.allowedEvents_=e,this.listeners_={},g(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});let i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let o=0;o<i.length;o++)if(i[o].callback===n&&(!r||r===i[o].context)){i.splice(o,1);return}}validateEventType_(e){g(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};var Tl=class t extends Ml{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!eh()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new t}getInitialEvent(e){return g(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var Bw=32,$w=768,K=class{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}};function G(){return new K("")}function V(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function On(t){return t.pieces_.length-t.pieceNum_}function te(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new K(t.pieces_,e)}function TC(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function qR(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function AC(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function xC(t){if(t.pieceNum_>=t.pieces_.length)return null;let e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new K(e,0)}function fe(t,e){let n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof K)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new K(n,0)}function $(t){return t.pieceNum_>=t.pieces_.length}function Te(t,e){let n=V(t),r=V(e);if(n===null)return e;if(n===r)return Te(te(t),te(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function wp(t,e){if(On(t)!==On(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function _t(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(On(t)>On(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var kh=class{constructor(e,n){this.errorPrefix_=n,this.parts_=AC(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=jo(this.parts_[r]);NC(this)}};function YR(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=jo(e),NC(t)}function QR(t){let e=t.parts_.pop();t.byteLength_-=jo(e),t.parts_.length>0&&(t.byteLength_-=1)}function NC(t){if(t.byteLength_>$w)throw new Error(t.errorPrefix_+"has a key path longer than "+$w+" bytes ("+t.byteLength_+").");if(t.parts_.length>Bw)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Bw+") or object contains a cycle "+mr(t))}function mr(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}var Lh=class t extends Ml{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new t}getInitialEvent(e){return g(e==="visible","Unknown event type: "+e),[this.visible_]}};var Go=1e3,KR=60*5*1e3,Uw=30*1e3,ZR=1.3,JR=3e4,XR="server_kill",Hw=3,Cp=(()=>{class t extends Sl{constructor(n,r,i,o,s,a,l,c){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=c,this.id=t.nextPersistentConnectionId_++,this.log_=as("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Go,this.maxReconnectDelay_=KR,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!Ft())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Lh.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&Tl.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){let o=++this.requestNumber_,s={r:o,a:n,b:r};this.log_(ce(s)),g(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),i&&(this.requestCBHash_[o]=i)}get(n){this.initConnection_();let r=new Mn,o={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let l=a.d;a.s==="ok"?r.resolve(l):r.reject(l)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;let s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),r.promise}listen(n,r,i,o){this.initConnection_();let s=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),g(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),g(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");let l={onComplete:o,hashFn:r,query:n,tag:i};this.listens.get(a).set(s,l),this.connected_&&this.sendListen_(l)}sendGet_(n){let r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){let r=n.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);let s={p:i},a="q";n.tag&&(s.q=r._queryObject,s.t=n.tag),s.h=n.hashFn(),this.sendRequest(a,s,l=>{let c=l.d,u=l.s;t.warnOnListenWarnings_(c,r),(this.listens.get(i)&&this.listens.get(i).get(o))===n&&(this.log_("listen response",l),u!=="ok"&&this.removeListen_(i,o),n.onComplete&&n.onComplete(u,c))})}static warnOnListenWarnings_(n,r){if(n&&typeof n=="object"&&kt(n,"w")){let i=hr(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',s=r._path.toString();ke(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||fw(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Uw)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,r=dw(n)?"auth":"gauth",i={cred:n};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{let s=o.s,a=o.d||"error";this.authToken_===n&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let r=n.s,i=n.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){let i=n._path.toString(),o=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),g(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,n._queryObject,r)}sendUnlisten_(n,r,i,o){this.log_("Unlisten on "+n+" for "+r);let s={p:n},a="n";o&&(s.q=i,s.t=o),this.sendRequest(a,s)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,o){let s={p:r,d:i};this.log_("onDisconnect "+n,s),this.sendRequest(n,s,a=>{o&&setTimeout(()=>{o(a.s,a.d)},Math.floor(0))})}put(n,r,i,o){this.putInternal("p",n,r,i,o)}merge(n,r,i,o){this.putInternal("m",n,r,i,o)}putInternal(n,r,i,o,s){this.initConnection_();let a={p:r,d:i};s!==void 0&&(a.h=s),this.outstandingPuts_.push({action:n,request:a,onComplete:o}),this.outstandingPutCount_++;let l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+r)}sendPut_(n){let r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,o=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,s=>{this.log_(r+" response",s),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(s.s,s.d)})}reportStats(n){if(this.connected_){let r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let s=i.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+ce(n));let r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):Mh("Unrecognized action received from server: "+ce(n)+`
Are you using the latest client?`)}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){g(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Go,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=Go,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>JR&&(this.reconnectDelay_=Go),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*ZR)}this.onConnectStatus_(!1)}establishConnection_(){return S(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+t.nextConnectionId_++,s=this.lastSessionId,a=!1,l=null,c=function(){l?l.close():(a=!0,i())},u=function(f){g(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(f)};this.realtime_={close:c,sendRequest:u};let d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[f,h]=yield Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);a?Ee("getToken() completed but was canceled"):(Ee("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=h&&h.token,l=new Fh(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,p=>{ke(p+" ("+this.repoInfo_.toString()+")"),this.interrupt(XR)},s))}catch(f){this.log_("Failed to get token: "+f),a||(this.repoInfo_.nodeAdmin&&ke(f),c())}}})}interrupt(n){Ee("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){Ee("Resuming connection for reason: "+n),delete this.interruptReasons_[n],th(this.interruptReasons_)&&(this.reconnectDelay_=Go,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;r?i=r.map(s=>yp(s)).join("$"):i="default";let o=this.removeListen_(n,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(n,r){let i=new K(n).toString(),o;if(this.listens.has(i)){let s=this.listens.get(i);o=s.get(r),s.delete(r),s.size===0&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(n,r){Ee("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Hw&&(this.reconnectDelay_=Uw,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){Ee("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Hw&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},r="js";Ft()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),n["sdk."+r+"."+vp.replace(/\./g,"-")]=1,eh()?n["framework.cordova"]=1:lw()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=Tl.getInstance().currentlyOnline();return th(this.interruptReasons_)&&n}}t.nextPersistentConnectionId_=0,t.nextConnectionId_=0;return t})(),j=class t{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new t(e,n)}};var Si=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){let r=new j(Ii,e),i=new j(Ii,n);return this.compare(r,i)!==0}minPost(){return j.MIN}};var Dl,Al=class extends Si{static get __EMPTY_NODE(){return Dl}static set __EMPTY_NODE(e){Dl=e}compare(e,n){return Ri(e.name,n.name)}isDefinedOn(e){throw fr("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return j.MIN}maxPost(){return new j(wr,Dl)}makePost(e,n){return g(typeof e=="string","KeyIndex indexValue must always be a string."),new j(e,Dl)}toString(){return".key"}},bi=new Al;var Di=class{constructor(e,n,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(e=e,s=n?r(e.key,n):1,i&&(s*=-1),s<0)this.isReverse_?e=e.left:e=e.right;else if(s===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},yt=(()=>{class t{constructor(n,r,i,o,s){this.key=n,this.value=r,this.color=i??t.RED,this.left=o??it.EMPTY_NODE,this.right=s??it.EMPTY_NODE}copy(n,r,i,o,s){return new t(n??this.key,r??this.value,i??this.color,o??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let o=this,s=i(n,o.key);return s<0?o=o.copy(null,null,null,o.left.insert(n,r,i),null):s===0?o=o.copy(null,r,null,null,null):o=o.copy(null,null,null,null,o.right.insert(n,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return it.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,o;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(n,i.key)===0){if(i.right.isEmpty())return it.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})(),Vh=class{copy(e,n,r,i,o){return this}insert(e,n,r){return new yt(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},it=class t{constructor(e,n=t.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,yt.BLACK,null,null))}remove(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,yt.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Di(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Di(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Di(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Di(this.root_,null,this.comparator_,!0,e)}};it.EMPTY_NODE=new Vh;function eO(t,e){return Ri(t.name,e.name)}function Dp(t,e){return Ri(t,e)}var jh;function tO(t){jh=t}var RC=function(t){return typeof t=="number"?"number:"+fC(t):"string:"+t},OC=function(t){if(t.isLeafNode()){let e=t.val();g(typeof e=="string"||typeof e=="number"||typeof e=="object"&&kt(e,".sv"),"Priority must be a string or number.")}else g(t===jh||t.isEmpty(),"priority of unexpected type.");g(t===jh||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var Ww,Mi=(()=>{class t{constructor(n,r=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,g(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),OC(this.priorityNode_)}static set __childrenNodeConstructor(n){Ww=n}static get __childrenNodeConstructor(){return Ww}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return $(n)?this:V(n)===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return n===".priority"?this.updatePriority(r):r.isEmpty()&&n!==".priority"?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){let i=V(n);return i===null?r:r.isEmpty()&&i!==".priority"?this:(g(i!==".priority"||On(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(te(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+RC(this.priorityNode_.val())+":");let r=typeof this.value_;n+=r+":",r==="number"?n+=fC(this.value_):n+=this.value_,this.lazyHash_=cC(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:(g(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let r=typeof n.value_,i=typeof this.value_,o=t.VALUE_TYPE_ORDER.indexOf(r),s=t.VALUE_TYPE_ORDER.indexOf(i);return g(o>=0,"Unknown leaf type: "+r),g(s>=0,"Unknown leaf type: "+i),o===s?i==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:s-o}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}t.VALUE_TYPE_ORDER=["object","boolean","number","string"];return t})(),PC,FC;function nO(t){PC=t}function rO(t){FC=t}var Bh=class extends Si{compare(e,n){let r=e.node.getPriority(),i=n.node.getPriority(),o=r.compareTo(i);return o===0?Ri(e.name,n.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return j.MIN}maxPost(){return new j(wr,new Mi("[PRIORITY-POST]",FC))}makePost(e,n){let r=PC(e);return new j(n,new Mi("[PRIORITY-POST]",r))}toString(){return".priority"}},oe=new Bh;var iO=Math.log(2),$h=class{constructor(e){let n=o=>parseInt(Math.log(o)/iO,10),r=o=>parseInt(Array(o+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},xl=function(t,e,n,r){t.sort(e);let i=function(l,c){let u=c-l,d,f;if(u===0)return null;if(u===1)return d=t[l],f=n?n(d):d,new yt(f,d.node,yt.BLACK,null,null);{let h=parseInt(u/2,10)+l,p=i(l,h),y=i(h+1,c);return d=t[h],f=n?n(d):d,new yt(f,d.node,yt.BLACK,p,y)}},o=function(l){let c=null,u=null,d=t.length,f=function(p,y){let F=d-p,B=d;d-=p;let Ae=i(F+1,B),he=t[F],st=n?n(he):he;h(new yt(st,he.node,y,null,Ae))},h=function(p){c?(c.left=p,c=p):(u=p,c=p)};for(let p=0;p<l.count;++p){let y=l.nextBitIsOne(),F=Math.pow(2,l.count-(p+1));y?f(F,yt.BLACK):(f(F,yt.BLACK),f(F,yt.RED))}return u},s=new $h(t.length),a=o(s);return new it(r||e,a)};var wh,Ci={},Ti=class t{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return g(Ci&&oe,"ChildrenNode.ts has not been loaded"),wh=wh||new t({".priority":Ci},{".priority":oe}),wh}get(e){let n=hr(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof it?n:null}hasIndex(e){return kt(this.indexSet_,e.toString())}addIndex(e,n){g(e!==bi,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,o=n.getIterator(j.Wrap),s=o.getNext();for(;s;)i=i||e.isDefinedOn(s.node),r.push(s),s=o.getNext();let a;i?a=xl(r,e.getCompare()):a=Ci;let l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;let u=Object.assign({},this.indexes_);return u[l]=a,new t(u,c)}addToIndexes(e,n){let r=Vo(this.indexes_,(i,o)=>{let s=hr(this.indexSet_,o);if(g(s,"Missing index implementation for "+o),i===Ci)if(s.isDefinedOn(e.node)){let a=[],l=n.getIterator(j.Wrap),c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),xl(a,s.getCompare())}else return Ci;else{let a=n.get(e.name),l=i;return a&&(l=l.remove(new j(e.name,a))),l.insert(e,e.node)}});return new t(r,this.indexSet_)}removeFromIndexes(e,n){let r=Vo(this.indexes_,i=>{if(i===Ci)return i;{let o=n.get(e.name);return o?i.remove(new j(e.name,o)):i}});return new t(r,this.indexSet_)}};var zo,x=(()=>{class t{constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&OC(this.priorityNode_),this.children_.isEmpty()&&g(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return zo||(zo=new t(new it(Dp),null,Ti.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||zo}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let r=this.children_.get(n);return r===null?zo:r}}getChild(n){let r=V(n);return r===null?this:this.getImmediateChild(r).getChild(te(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,r){if(g(r,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(r);{let i=new j(n,r),o,s;r.isEmpty()?(o=this.children_.remove(n),s=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(n,r),s=this.indexMap_.addToIndexes(i,this.children_));let a=o.isEmpty()?zo:this.priorityNode_;return new t(o,a,s)}}updateChild(n,r){let i=V(n);if(i===null)return r;{g(V(n)!==".priority"||On(n)===1,".priority must be the last token in a path");let o=this.getImmediateChild(i).updateChild(te(n),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let r={},i=0,o=0,s=!0;if(this.forEachChild(oe,(a,l)=>{r[a]=l.val(n),i++,s&&t.INTEGER_REGEXP_.test(a)?o=Math.max(o,Number(a)):s=!1}),!n&&s&&o<2*i){let a=[];for(let l in r)a[l]=r[l];return a}else return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+RC(this.getPriority().val())+":"),this.forEachChild(oe,(r,i)=>{let o=i.hash();o!==""&&(n+=":"+r+":"+o)}),this.lazyHash_=n===""?"":cC(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){let o=this.resolveIndex_(i);if(o){let s=o.getPredecessorKey(new j(n,r));return s?s.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(n){let r=this.getFirstChildName(n);return r?new j(r,this.children_.get(r)):null}getLastChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(n){let r=this.getLastChildName(n);return r?new j(r,this.children_.get(r)):null}forEachChild(n,r){let i=this.resolveIndex_(n);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,o=>o);{let o=this.children_.getIteratorFrom(n.name,j.Wrap),s=o.peek();for(;s!=null&&r.compare(s,n)<0;)o.getNext(),s=o.peek();return o}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,o=>o);{let o=this.children_.getReverseIteratorFrom(n.name,j.Wrap),s=o.peek();for(;s!=null&&r.compare(s,n)>0;)o.getNext(),s=o.peek();return o}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===ls?-1:0}withIndex(n){if(n===bi||this.indexMap_.hasIndex(n))return this;{let r=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===bi||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let r=n;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(oe),o=r.getIterator(oe),s=i.getNext(),a=o.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=i.getNext(),a=o.getNext()}return s===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===bi?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})(),Uh=class extends x{constructor(){super(new it(Dp),x.EMPTY_NODE,Ti.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return x.EMPTY_NODE}isEmpty(){return!1}},ls=new Uh;Object.defineProperties(j,{MIN:{value:new j(Ii,x.EMPTY_NODE)},MAX:{value:new j(wr,ls)}});Al.__EMPTY_NODE=x.EMPTY_NODE;Mi.__childrenNodeConstructor=x;tO(ls);rO(ls);var oO=!0;function me(t,e=null){if(t===null)return x.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),g(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){let n=t;return new Mi(n,me(e))}if(!(t instanceof Array)&&oO){let n=[],r=!1;if(Le(t,(s,a)=>{if(s.substring(0,1)!=="."){let l=me(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),n.push(new j(s,l)))}}),n.length===0)return x.EMPTY_NODE;let o=xl(n,eO,s=>s.name,Dp);if(r){let s=xl(n,oe.getCompare());return new x(o,me(e),new Ti({".priority":s},{".priority":oe}))}else return new x(o,me(e),Ti.Default)}else{let n=x.EMPTY_NODE;return Le(t,(r,i)=>{if(kt(t,r)&&r.substring(0,1)!=="."){let o=me(i);(o.isLeafNode()||!o.isEmpty())&&(n=n.updateImmediateChild(r,o))}}),n.updatePriority(me(e))}}nO(me);var Hh=class extends Si{constructor(e){super(),this.indexPath_=e,g(!$(e)&&V(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){let r=this.extractChild(e.node),i=this.extractChild(n.node),o=r.compareTo(i);return o===0?Ri(e.name,n.name):o}makePost(e,n){let r=me(e),i=x.EMPTY_NODE.updateChild(this.indexPath_,r);return new j(n,i)}maxPost(){let e=x.EMPTY_NODE.updateChild(this.indexPath_,ls);return new j(wr,e)}toString(){return AC(this.indexPath_,0).join("/")}};var Wh=class extends Si{compare(e,n){let r=e.node.compareTo(n.node);return r===0?Ri(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return j.MIN}maxPost(){return j.MAX}makePost(e,n){let r=me(e);return new j(n,r)}toString(){return".value"}},sO=new Wh;function kC(t){return{type:"value",snapshotNode:t}}function Ai(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Xo(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function es(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function aO(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}var ts=class{constructor(e){this.index_=e}updateChild(e,n,r,i,o,s){g(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=e.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(s!=null&&(r.isEmpty()?e.hasChild(n)?s.trackChildChange(Xo(n,a)):g(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(Ai(n,r)):s.trackChildChange(es(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(oe,(i,o)=>{n.hasChild(i)||r.trackChildChange(Xo(i,o))}),n.isLeafNode()||n.forEachChild(oe,(i,o)=>{if(e.hasChild(i)){let s=e.getImmediateChild(i);s.equals(o)||r.trackChildChange(es(i,o,s))}else r.trackChildChange(Ai(i,o))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?x.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var Nl=class t{constructor(e){this.indexedFilter_=new ts(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){let n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,o,s){return this.matches(new j(n,r))||(r=x.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,o,s)}updateFullNode(e,n,r){n.isLeafNode()&&(n=x.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(x.EMPTY_NODE);let o=this;return n.forEachChild(oe,(s,a)=>{o.matches(new j(s,a))||(i=i.updateImmediateChild(s,x.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){let n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){let n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}};var Gh=class{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{let r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{let r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Nl(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,o,s){return this.rangedFilter_.matches(new j(n,r))||(r=x.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,o,s):this.fullLimitUpdateChild_(e,n,r,o,s)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=x.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=x.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let s=0;for(;o.hasNext()&&s<this.limit_;){let a=o.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),s++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(x.EMPTY_NODE);let o;this.reverse_?o=i.getReverseIterator(this.index_):o=i.getIterator(this.index_);let s=0;for(;o.hasNext();){let a=o.getNext();s<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?s++:i=i.updateImmediateChild(a.name,x.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,o){let s;if(this.reverse_){let d=this.index_.getCompare();s=(f,h)=>d(h,f)}else s=this.index_.getCompare();let a=e;g(a.numChildren()===this.limit_,"");let l=new j(n,r),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(l);if(a.hasChild(n)){let d=a.getImmediateChild(n),f=i.getChildAfterChild(this.index_,c,this.reverse_);for(;f!=null&&(f.name===n||a.hasChild(f.name));)f=i.getChildAfterChild(this.index_,f,this.reverse_);let h=f==null?1:s(f,l);if(u&&!r.isEmpty()&&h>=0)return o?.trackChildChange(es(n,r,d)),a.updateImmediateChild(n,r);{o?.trackChildChange(Xo(n,d));let y=a.updateImmediateChild(n,x.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(o?.trackChildChange(Ai(f.name,f.node)),y.updateImmediateChild(f.name,f.node)):y}}else return r.isEmpty()?e:u&&s(c,l)>=0?(o!=null&&(o.trackChildChange(Xo(c.name,c.node)),o.trackChildChange(Ai(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(c.name,x.EMPTY_NODE)):e}};var zh=class t{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=oe}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return g(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return g(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ii}hasEnd(){return this.endSet_}getIndexEndValue(){return g(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return g(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:wr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return g(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===oe}copy(){let e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function lO(t){return t.loadsAllData()?new ts(t.getIndex()):t.hasLimit()?new Gh(t):new Nl(t)}function Gw(t){let e={};if(t.isDefault())return e;let n;if(t.index_===oe?n="$priority":t.index_===sO?n="$value":t.index_===bi?n="$key":(g(t.index_ instanceof Hh,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=ce(n),t.startSet_){let r=t.startAfterSet_?"startAfter":"startAt";e[r]=ce(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+ce(t.indexStartName_))}if(t.endSet_){let r=t.endBeforeSet_?"endBefore":"endAt";e[r]=ce(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+ce(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function zw(t){let e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==oe&&(e.i=t.index_.toString()),e}var qh=class t extends Sl{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=as("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(g(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){let o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);let s=t.getListenId_(e,r),a={};this.listens_[s]=a;let l=Gw(e._queryParams);this.restRequest_(o+".json",l,(c,u)=>{let d=u;if(c===404&&(d=null,c=null),c===null&&this.onDataUpdate_(o,d,!1,r),hr(this.listens_,s)===a){let f;c?c===401?f="permission_denied":f="rest_error:"+c:f="ok",i(f,null)}})}unlisten(e,n){let r=t.getListenId_(e,n);delete this.listens_[r]}get(e){let n=Gw(e._queryParams),r=e._path.toString(),i=new Mn;return this.restRequest_(r+".json",n,(o,s)=>{let a=s;o===404&&(a=null,o=null),o===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(n.auth=i.accessToken),o&&o.token&&(n.ac=o.token);let s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+hw(n);this.log_("Sending REST request for "+s);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=_i(a.responseText)}catch{ke("Failed to parse JSON response for "+s+": "+a.responseText)}r(null,l)}else a.status!==401&&a.status!==404&&ke("Got unsuccessful REST response for "+s+" Status: "+a.status),r(a.status);r=null}},a.open("GET",s,!0),a.send()})}};var Yh=class{constructor(){this.rootNode_=x.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}};function Rl(){return{value:null,children:new Map}}function LC(t,e,n){if($(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{let r=V(e);t.children.has(r)||t.children.set(r,Rl());let i=t.children.get(r);e=te(e),LC(i,e,n)}}function Qh(t,e,n){t.value!==null?n(e,t.value):cO(t,(r,i)=>{let o=new K(e.toString()+"/"+r);Qh(i,o,n)})}function cO(t,e){t.children.forEach((n,r)=>{e(r,n)})}var Kh=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Le(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}};var qw=10*1e3,uO=30*1e3,dO=5*60*1e3,Zh=class{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new Kh(e);let r=qw+(uO-qw)*Math.random();Yo(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),n={},r=!1;Le(e,(i,o)=>{o>0&&kt(this.statsToReport_,i)&&(n[i]=o,r=!0)}),r&&this.server_.reportStats(n),Yo(this.reportStats_.bind(this),Math.floor(Math.random()*2*dO))}};var jt=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}(jt||{});function VC(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Ep(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function bp(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var Jh=class t{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=jt.ACK_USER_WRITE,this.source=VC()}operationForChild(e){if($(this.path)){if(this.affectedTree.value!=null)return g(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new K(e));return new t(G(),n,this.revert)}}else return g(V(this.path)===e,"operationForChild called for unrelated child."),new t(te(this.path),this.affectedTree,this.revert)}};var Ol=class t{constructor(e,n){this.source=e,this.path=n,this.type=jt.LISTEN_COMPLETE}operationForChild(e){return $(this.path)?new t(this.source,G()):new t(this.source,te(this.path))}};var xi=class t{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=jt.OVERWRITE}operationForChild(e){return $(this.path)?new t(this.source,G(),this.snap.getImmediateChild(e)):new t(this.source,te(this.path),this.snap)}};var Pl=class t{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=jt.MERGE}operationForChild(e){if($(this.path)){let n=this.children.subtree(new K(e));return n.isEmpty()?null:n.value?new xi(this.source,G(),n.value):new t(this.source,G(),n)}else return g(V(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,te(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var Bt=class{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if($(e))return this.isFullyInitialized()&&!this.filtered_;let n=V(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};var Xh=class{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}};function fO(t,e,n,r){let i=[],o=[];return e.forEach(s=>{s.type==="child_changed"&&t.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(aO(s.childName,s.snapshotNode))}),qo(t,i,"child_removed",e,r,n),qo(t,i,"child_added",e,r,n),qo(t,i,"child_moved",o,r,n),qo(t,i,"child_changed",e,r,n),qo(t,i,"value",e,r,n),i}function qo(t,e,n,r,i,o){let s=r.filter(a=>a.type===n);s.sort((a,l)=>pO(t,a,l)),s.forEach(a=>{let l=hO(t,a,o);i.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,t.query_))})})}function hO(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function pO(t,e,n){if(e.childName==null||n.childName==null)throw fr("Should only compare child_ events.");let r=new j(e.childName,e.snapshotNode),i=new j(n.childName,n.snapshotNode);return t.index_.compare(r,i)}function Yl(t,e){return{eventCache:t,serverCache:e}}function Ko(t,e,n,r){return Yl(new Bt(e,n,r),t.serverCache)}function jC(t,e,n,r){return Yl(t.eventCache,new Bt(e,n,r))}function Fl(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Cr(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var Ch,gO=()=>(Ch||(Ch=new it(mR)),Ch),Ve=class t{constructor(e,n=gO()){this.value=e,this.children=n}static fromObject(e){let n=new t(null);return Le(e,(r,i)=>{n=n.set(new K(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:G(),value:this.value};if($(e))return null;{let r=V(e),i=this.children.get(r);if(i!==null){let o=i.findRootMostMatchingPathAndValue(te(e),n);return o!=null?{path:fe(new K(r),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if($(e))return this;{let n=V(e),r=this.children.get(n);return r!==null?r.subtree(te(e)):new t(null)}}set(e,n){if($(e))return new t(n,this.children);{let r=V(e),o=(this.children.get(r)||new t(null)).set(te(e),n),s=this.children.insert(r,o);return new t(this.value,s)}}remove(e){if($(e))return this.children.isEmpty()?new t(null):new t(null,this.children);{let n=V(e),r=this.children.get(n);if(r){let i=r.remove(te(e)),o;return i.isEmpty()?o=this.children.remove(n):o=this.children.insert(n,i),this.value===null&&o.isEmpty()?new t(null):new t(this.value,o)}else return this}}get(e){if($(e))return this.value;{let n=V(e),r=this.children.get(n);return r?r.get(te(e)):null}}setTree(e,n){if($(e))return n;{let r=V(e),o=(this.children.get(r)||new t(null)).setTree(te(e),n),s;return o.isEmpty()?s=this.children.remove(r):s=this.children.insert(r,o),new t(this.value,s)}}fold(e){return this.fold_(G(),e)}fold_(e,n){let r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(fe(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,G(),n)}findOnPath_(e,n,r){let i=this.value?r(n,this.value):!1;if(i)return i;if($(e))return null;{let o=V(e),s=this.children.get(o);return s?s.findOnPath_(te(e),fe(n,o),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,G(),n)}foreachOnPath_(e,n,r){if($(e))return this;{this.value&&r(n,this.value);let i=V(e),o=this.children.get(i);return o?o.foreachOnPath_(te(e),fe(n,i),r):new t(null)}}foreach(e){this.foreach_(G(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(fe(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}};var wt=class t{constructor(e){this.writeTree_=e}static empty(){return new t(new Ve(null))}};function Zo(t,e,n){if($(e))return new wt(new Ve(n));{let r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,o=r.value,s=Te(i,e);return o=o.updateChild(s,n),new wt(t.writeTree_.set(i,o))}else{let i=new Ve(n),o=t.writeTree_.setTree(e,i);return new wt(o)}}}function Yw(t,e,n){let r=t;return Le(n,(i,o)=>{r=Zo(r,fe(e,i),o)}),r}function Qw(t,e){if($(e))return wt.empty();{let n=t.writeTree_.setTree(e,new Ve(null));return new wt(n)}}function ep(t,e){return Dr(t,e)!=null}function Dr(t,e){let n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Te(n.path,e)):null}function Kw(t){let e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(oe,(r,i)=>{e.push(new j(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new j(r,i.value))}),e}function Nn(t,e){if($(e))return t;{let n=Dr(t,e);return n!=null?new wt(new Ve(n)):new wt(t.writeTree_.subtree(e))}}function tp(t){return t.writeTree_.isEmpty()}function Ni(t,e){return BC(G(),t.writeTree_,e)}function BC(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,o)=>{i===".priority"?(g(o.value!==null,"Priority writes must always be leaf nodes"),r=o.value):n=BC(fe(t,i),o,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(fe(t,".priority"),r)),n}}function Ql(t,e){return WC(e,t)}function mO(t,e,n,r,i){g(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Zo(t.visibleWrites,e,n)),t.lastWriteId=r}function vO(t,e){for(let n=0;n<t.allWrites.length;n++){let r=t.allWrites[n];if(r.writeId===e)return r}return null}function yO(t,e){let n=t.allWrites.findIndex(a=>a.writeId===e);g(n>=0,"removeWrite called with nonexistent writeId.");let r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,o=!1,s=t.allWrites.length-1;for(;i&&s>=0;){let a=t.allWrites[s];a.visible&&(s>=n&&_O(a,r.path)?i=!1:_t(r.path,a.path)&&(o=!0)),s--}if(i){if(o)return wO(t),!0;if(r.snap)t.visibleWrites=Qw(t.visibleWrites,r.path);else{let a=r.children;Le(a,l=>{t.visibleWrites=Qw(t.visibleWrites,fe(r.path,l))})}return!0}else return!1}function _O(t,e){if(t.snap)return _t(t.path,e);for(let n in t.children)if(t.children.hasOwnProperty(n)&&_t(fe(t.path,n),e))return!0;return!1}function wO(t){t.visibleWrites=$C(t.allWrites,CO,G()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function CO(t){return t.visible}function $C(t,e,n){let r=wt.empty();for(let i=0;i<t.length;++i){let o=t[i];if(e(o)){let s=o.path,a;if(o.snap)_t(n,s)?(a=Te(n,s),r=Zo(r,a,o.snap)):_t(s,n)&&(a=Te(s,n),r=Zo(r,G(),o.snap.getChild(a)));else if(o.children){if(_t(n,s))a=Te(n,s),r=Yw(r,a,o.children);else if(_t(s,n))if(a=Te(s,n),$(a))r=Yw(r,G(),o.children);else{let l=hr(o.children,V(a));if(l){let c=l.getChild(te(a));r=Zo(r,G(),c)}}}else throw fr("WriteRecord should have .snap or .children")}}return r}function UC(t,e,n,r,i){if(!r&&!i){let o=Dr(t.visibleWrites,e);if(o!=null)return o;{let s=Nn(t.visibleWrites,e);if(tp(s))return n;if(n==null&&!ep(s,G()))return null;{let a=n||x.EMPTY_NODE;return Ni(s,a)}}}else{let o=Nn(t.visibleWrites,e);if(!i&&tp(o))return n;if(!i&&n==null&&!ep(o,G()))return null;{let s=function(c){return(c.visible||i)&&(!r||!~r.indexOf(c.writeId))&&(_t(c.path,e)||_t(e,c.path))},a=$C(t.allWrites,s,e),l=n||x.EMPTY_NODE;return Ni(a,l)}}}function DO(t,e,n){let r=x.EMPTY_NODE,i=Dr(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(oe,(o,s)=>{r=r.updateImmediateChild(o,s)}),r;if(n){let o=Nn(t.visibleWrites,e);return n.forEachChild(oe,(s,a)=>{let l=Ni(Nn(o,new K(s)),a);r=r.updateImmediateChild(s,l)}),Kw(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}else{let o=Nn(t.visibleWrites,e);return Kw(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}}function EO(t,e,n,r,i){g(r||i,"Either existingEventSnap or existingServerSnap must exist");let o=fe(e,n);if(ep(t.visibleWrites,o))return null;{let s=Nn(t.visibleWrites,o);return tp(s)?i.getChild(n):Ni(s,i.getChild(n))}}function bO(t,e,n,r){let i=fe(e,n),o=Dr(t.visibleWrites,i);if(o!=null)return o;if(r.isCompleteForChild(n)){let s=Nn(t.visibleWrites,i);return Ni(s,r.getNode().getImmediateChild(n))}else return null}function IO(t,e){return Dr(t.visibleWrites,e)}function SO(t,e,n,r,i,o,s){let a,l=Nn(t.visibleWrites,e),c=Dr(l,G());if(c!=null)a=c;else if(n!=null)a=Ni(l,n);else return[];if(a=a.withIndex(s),!a.isEmpty()&&!a.isLeafNode()){let u=[],d=s.getCompare(),f=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),h=f.getNext();for(;h&&u.length<i;)d(h,r)!==0&&u.push(h),h=f.getNext();return u}else return[]}function MO(){return{visibleWrites:wt.empty(),allWrites:[],lastWriteId:-1}}function kl(t,e,n,r){return UC(t.writeTree,t.treePath,e,n,r)}function Ip(t,e){return DO(t.writeTree,t.treePath,e)}function Zw(t,e,n,r){return EO(t.writeTree,t.treePath,e,n,r)}function Ll(t,e){return IO(t.writeTree,fe(t.treePath,e))}function TO(t,e,n,r,i,o){return SO(t.writeTree,t.treePath,e,n,r,i,o)}function Sp(t,e,n){return bO(t.writeTree,t.treePath,e,n)}function HC(t,e){return WC(fe(t.treePath,e),t.writeTree)}function WC(t,e){return{treePath:t,writeTree:e}}var np=class{constructor(){this.changeMap=new Map}trackChildChange(e){let n=e.type,r=e.childName;g(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),g(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let o=i.type;if(n==="child_added"&&o==="child_removed")this.changeMap.set(r,es(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&o==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&o==="child_changed")this.changeMap.set(r,Xo(r,i.oldSnap));else if(n==="child_changed"&&o==="child_added")this.changeMap.set(r,Ai(r,e.snapshotNode));else if(n==="child_changed"&&o==="child_changed")this.changeMap.set(r,es(r,e.snapshotNode,i.oldSnap));else throw fr("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var rp=class{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}},GC=new rp,ns=class{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new Bt(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Sp(this.writes_,e,r)}}getChildAfterChild(e,n,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Cr(this.viewCache_),o=TO(this.writes_,i,n,1,r,e);return o.length===0?null:o[0]}};function AO(t){return{filter:t}}function xO(t,e){g(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),g(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function NO(t,e,n,r,i){let o=new np,s,a;if(n.type===jt.OVERWRITE){let c=n;c.source.fromUser?s=ip(t,e,c.path,c.snap,r,i,o):(g(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!$(c.path),s=Vl(t,e,c.path,c.snap,r,i,a,o))}else if(n.type===jt.MERGE){let c=n;c.source.fromUser?s=OO(t,e,c.path,c.children,r,i,o):(g(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),s=op(t,e,c.path,c.children,r,i,a,o))}else if(n.type===jt.ACK_USER_WRITE){let c=n;c.revert?s=kO(t,e,c.path,r,i,o):s=PO(t,e,c.path,c.affectedTree,r,i,o)}else if(n.type===jt.LISTEN_COMPLETE)s=FO(t,e,n.path,r,o);else throw fr("Unknown operation type: "+n.type);let l=o.getChanges();return RO(e,s,l),{viewCache:s,changes:l}}function RO(t,e,n){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=Fl(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(kC(Fl(e)))}}function zC(t,e,n,r,i,o){let s=e.eventCache;if(Ll(r,n)!=null)return e;{let a,l;if($(n))if(g(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let c=Cr(e),u=c instanceof x?c:x.EMPTY_NODE,d=Ip(r,u);a=t.filter.updateFullNode(e.eventCache.getNode(),d,o)}else{let c=kl(r,Cr(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,o)}else{let c=V(n);if(c===".priority"){g(On(n)===1,"Can't have a priority with additional path components");let u=s.getNode();l=e.serverCache.getNode();let d=Zw(r,n,u,l);d!=null?a=t.filter.updatePriority(u,d):a=s.getNode()}else{let u=te(n),d;if(s.isCompleteForChild(c)){l=e.serverCache.getNode();let f=Zw(r,n,s.getNode(),l);f!=null?d=s.getNode().getImmediateChild(c).updateChild(u,f):d=s.getNode().getImmediateChild(c)}else d=Sp(r,c,e.serverCache);d!=null?a=t.filter.updateChild(s.getNode(),c,d,u,i,o):a=s.getNode()}}return Ko(e,a,s.isFullyInitialized()||$(n),t.filter.filtersNodes())}}function Vl(t,e,n,r,i,o,s,a){let l=e.serverCache,c,u=s?t.filter:t.filter.getIndexedFilter();if($(n))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){let h=l.getNode().updateChild(n,r);c=u.updateFullNode(l.getNode(),h,null)}else{let h=V(n);if(!l.isCompleteForPath(n)&&On(n)>1)return e;let p=te(n),F=l.getNode().getImmediateChild(h).updateChild(p,r);h===".priority"?c=u.updatePriority(l.getNode(),F):c=u.updateChild(l.getNode(),h,F,p,GC,null)}let d=jC(e,c,l.isFullyInitialized()||$(n),u.filtersNodes()),f=new ns(i,d,o);return zC(t,d,n,i,f,a)}function ip(t,e,n,r,i,o,s){let a=e.eventCache,l,c,u=new ns(i,e,o);if($(n))c=t.filter.updateFullNode(e.eventCache.getNode(),r,s),l=Ko(e,c,!0,t.filter.filtersNodes());else{let d=V(n);if(d===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),r),l=Ko(e,c,a.isFullyInitialized(),a.isFiltered());else{let f=te(n),h=a.getNode().getImmediateChild(d),p;if($(f))p=r;else{let y=u.getCompleteChild(d);y!=null?TC(f)===".priority"&&y.getChild(xC(f)).isEmpty()?p=y:p=y.updateChild(f,r):p=x.EMPTY_NODE}if(h.equals(p))l=e;else{let y=t.filter.updateChild(a.getNode(),d,p,f,u,s);l=Ko(e,y,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function Jw(t,e){return t.eventCache.isCompleteForChild(e)}function OO(t,e,n,r,i,o,s){let a=e;return r.foreach((l,c)=>{let u=fe(n,l);Jw(e,V(u))&&(a=ip(t,a,u,c,i,o,s))}),r.foreach((l,c)=>{let u=fe(n,l);Jw(e,V(u))||(a=ip(t,a,u,c,i,o,s))}),a}function Xw(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function op(t,e,n,r,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;$(n)?c=r:c=new Ve(null).setTree(n,r);let u=e.serverCache.getNode();return c.children.inorderTraversal((d,f)=>{if(u.hasChild(d)){let h=e.serverCache.getNode().getImmediateChild(d),p=Xw(t,h,f);l=Vl(t,l,new K(d),p,i,o,s,a)}}),c.children.inorderTraversal((d,f)=>{let h=!e.serverCache.isCompleteForChild(d)&&f.value===null;if(!u.hasChild(d)&&!h){let p=e.serverCache.getNode().getImmediateChild(d),y=Xw(t,p,f);l=Vl(t,l,new K(d),y,i,o,s,a)}}),l}function PO(t,e,n,r,i,o,s){if(Ll(i,n)!=null)return e;let a=e.serverCache.isFiltered(),l=e.serverCache;if(r.value!=null){if($(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return Vl(t,e,n,l.getNode().getChild(n),i,o,a,s);if($(n)){let c=new Ve(null);return l.getNode().forEachChild(bi,(u,d)=>{c=c.set(new K(u),d)}),op(t,e,n,c,i,o,a,s)}else return e}else{let c=new Ve(null);return r.foreach((u,d)=>{let f=fe(n,u);l.isCompleteForPath(f)&&(c=c.set(u,l.getNode().getChild(f)))}),op(t,e,n,c,i,o,a,s)}}function FO(t,e,n,r,i){let o=e.serverCache,s=jC(e,o.getNode(),o.isFullyInitialized()||$(n),o.isFiltered());return zC(t,s,n,r,GC,i)}function kO(t,e,n,r,i,o){let s;if(Ll(r,n)!=null)return e;{let a=new ns(r,e,i),l=e.eventCache.getNode(),c;if($(n)||V(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=kl(r,Cr(e));else{let d=e.serverCache.getNode();g(d instanceof x,"serverChildren would be complete if leaf node"),u=Ip(r,d)}u=u,c=t.filter.updateFullNode(l,u,o)}else{let u=V(n),d=Sp(r,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=l.getImmediateChild(u)),d!=null?c=t.filter.updateChild(l,u,d,te(n),a,o):e.eventCache.getNode().hasChild(u)?c=t.filter.updateChild(l,u,x.EMPTY_NODE,te(n),a,o):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(s=kl(r,Cr(e)),s.isLeafNode()&&(c=t.filter.updateFullNode(c,s,o)))}return s=e.serverCache.isFullyInitialized()||Ll(r,G())!=null,Ko(e,c,s,t.filter.filtersNodes())}}var sp=class{constructor(e,n){this.query_=e,this.eventRegistrations_=[];let r=this.query_._queryParams,i=new ts(r.getIndex()),o=lO(r);this.processor_=AO(o);let s=n.serverCache,a=n.eventCache,l=i.updateFullNode(x.EMPTY_NODE,s.getNode(),null),c=o.updateFullNode(x.EMPTY_NODE,a.getNode(),null),u=new Bt(l,s.isFullyInitialized(),i.filtersNodes()),d=new Bt(c,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=Yl(d,u),this.eventGenerator_=new Xh(this.query_)}get query(){return this.query_}};function LO(t){return t.viewCache_.serverCache.getNode()}function VO(t){return Fl(t.viewCache_)}function jO(t,e){let n=Cr(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!$(e)&&!n.getImmediateChild(V(e)).isEmpty())?n.getChild(e):null}function eC(t){return t.eventRegistrations_.length===0}function BO(t,e){t.eventRegistrations_.push(e)}function tC(t,e,n){let r=[];if(n){g(e==null,"A cancel should cancel all event registrations.");let i=t.query._path;t.eventRegistrations_.forEach(o=>{let s=o.createCancelEvent(n,i);s&&r.push(s)})}if(e){let i=[];for(let o=0;o<t.eventRegistrations_.length;++o){let s=t.eventRegistrations_[o];if(!s.matches(e))i.push(s);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(o+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function nC(t,e,n,r){e.type===jt.MERGE&&e.source.queryId!==null&&(g(Cr(t.viewCache_),"We should always have a full cache before handling merges"),g(Fl(t.viewCache_),"Missing event cache, even though we have a server cache"));let i=t.viewCache_,o=NO(t.processor_,i,e,n,r);return xO(t.processor_,o.viewCache),g(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=o.viewCache,qC(t,o.changes,o.viewCache.eventCache.getNode(),null)}function $O(t,e){let n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(oe,(o,s)=>{r.push(Ai(o,s))}),n.isFullyInitialized()&&r.push(kC(n.getNode())),qC(t,r,n.getNode(),e)}function qC(t,e,n,r){let i=r?[r]:t.eventRegistrations_;return fO(t.eventGenerator_,e,n,i)}var jl,Bl=class{constructor(){this.views=new Map}};function UO(t){g(!jl,"__referenceConstructor has already been defined"),jl=t}function HO(){return g(jl,"Reference.ts has not been loaded"),jl}function WO(t){return t.views.size===0}function Mp(t,e,n,r){let i=e.source.queryId;if(i!==null){let o=t.views.get(i);return g(o!=null,"SyncTree gave us an op for an invalid query."),nC(o,e,n,r)}else{let o=[];for(let s of t.views.values())o=o.concat(nC(s,e,n,r));return o}}function YC(t,e,n,r,i){let o=e._queryIdentifier,s=t.views.get(o);if(!s){let a=kl(n,i?r:null),l=!1;a?l=!0:r instanceof x?(a=Ip(n,r),l=!1):(a=x.EMPTY_NODE,l=!1);let c=Yl(new Bt(a,l,!1),new Bt(r,i,!1));return new sp(e,c)}return s}function GO(t,e,n,r,i,o){let s=YC(t,e,r,i,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,s),BO(s,n),$O(s,n)}function zO(t,e,n,r){let i=e._queryIdentifier,o=[],s=[],a=Pn(t);if(i==="default")for(let[l,c]of t.views.entries())s=s.concat(tC(c,n,r)),eC(c)&&(t.views.delete(l),c.query._queryParams.loadsAllData()||o.push(c.query));else{let l=t.views.get(i);l&&(s=s.concat(tC(l,n,r)),eC(l)&&(t.views.delete(i),l.query._queryParams.loadsAllData()||o.push(l.query)))}return a&&!Pn(t)&&o.push(new(HO())(e._repo,e._path)),{removed:o,events:s}}function QC(t){let e=[];for(let n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Rn(t,e){let n=null;for(let r of t.views.values())n=n||jO(r,e);return n}function KC(t,e){if(e._queryParams.loadsAllData())return Kl(t);{let r=e._queryIdentifier;return t.views.get(r)}}function ZC(t,e){return KC(t,e)!=null}function Pn(t){return Kl(t)!=null}function Kl(t){for(let e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}var $l;function qO(t){g(!$l,"__referenceConstructor has already been defined"),$l=t}function YO(){return g($l,"Reference.ts has not been loaded"),$l}var QO=1,Ul=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Ve(null),this.pendingWriteTree_=MO(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function JC(t,e,n,r,i){return mO(t.pendingWriteTree_,e,n,r,i),i?us(t,new xi(VC(),e,n)):[]}function yr(t,e,n=!1){let r=vO(t.pendingWriteTree_,e);if(yO(t.pendingWriteTree_,e)){let o=new Ve(null);return r.snap!=null?o=o.set(G(),!0):Le(r.children,s=>{o=o.set(new K(s),!0)}),us(t,new Jh(r.path,o,n))}else return[]}function cs(t,e,n){return us(t,new xi(Ep(),e,n))}function KO(t,e,n){let r=Ve.fromObject(n);return us(t,new Pl(Ep(),e,r))}function ZO(t,e){return us(t,new Ol(Ep(),e))}function JO(t,e,n){let r=Ap(t,n);if(r){let i=xp(r),o=i.path,s=i.queryId,a=Te(o,e),l=new Ol(bp(s),a);return Np(t,o,l)}else return[]}function Hl(t,e,n,r,i=!1){let o=e._path,s=t.syncPointTree_.get(o),a=[];if(s&&(e._queryIdentifier==="default"||ZC(s,e))){let l=zO(s,e,n,r);WO(s)&&(t.syncPointTree_=t.syncPointTree_.remove(o));let c=l.removed;if(a=l.events,!i){let u=c.findIndex(f=>f._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(o,(f,h)=>Pn(h));if(u&&!d){let f=t.syncPointTree_.subtree(o);if(!f.isEmpty()){let h=tP(f);for(let p=0;p<h.length;++p){let y=h[p],F=y.query,B=nD(t,y);t.listenProvider_.startListening(Jo(F),rs(t,F),B.hashFn,B.onComplete)}}}!d&&c.length>0&&!r&&(u?t.listenProvider_.stopListening(Jo(e),null):c.forEach(f=>{let h=t.queryToTagMap.get(Zl(f));t.listenProvider_.stopListening(Jo(f),h)}))}nP(t,c)}return a}function XC(t,e,n,r){let i=Ap(t,r);if(i!=null){let o=xp(i),s=o.path,a=o.queryId,l=Te(s,e),c=new xi(bp(a),l,n);return Np(t,s,c)}else return[]}function XO(t,e,n,r){let i=Ap(t,r);if(i){let o=xp(i),s=o.path,a=o.queryId,l=Te(s,e),c=Ve.fromObject(n),u=new Pl(bp(a),l,c);return Np(t,s,u)}else return[]}function ap(t,e,n,r=!1){let i=e._path,o=null,s=!1;t.syncPointTree_.foreachOnPath(i,(f,h)=>{let p=Te(f,i);o=o||Rn(h,p),s=s||Pn(h)});let a=t.syncPointTree_.get(i);a?(s=s||Pn(a),o=o||Rn(a,G())):(a=new Bl,t.syncPointTree_=t.syncPointTree_.set(i,a));let l;o!=null?l=!0:(l=!1,o=x.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((h,p)=>{let y=Rn(p,G());y&&(o=o.updateImmediateChild(h,y))}));let c=ZC(a,e);if(!c&&!e._queryParams.loadsAllData()){let f=Zl(e);g(!t.queryToTagMap.has(f),"View does not exist, but we have a tag");let h=rP();t.queryToTagMap.set(f,h),t.tagToQueryMap.set(h,f)}let u=Ql(t.pendingWriteTree_,i),d=GO(a,e,n,u,o,l);if(!c&&!s&&!r){let f=KC(a,e);d=d.concat(iP(t,e,f))}return d}function Tp(t,e,n){let i=t.pendingWriteTree_,o=t.syncPointTree_.findOnPath(e,(s,a)=>{let l=Te(s,e),c=Rn(a,l);if(c)return c});return UC(i,e,o,n,!0)}function eP(t,e){let n=e._path,r=null;t.syncPointTree_.foreachOnPath(n,(c,u)=>{let d=Te(c,n);r=r||Rn(u,d)});let i=t.syncPointTree_.get(n);i?r=r||Rn(i,G()):(i=new Bl,t.syncPointTree_=t.syncPointTree_.set(n,i));let o=r!=null,s=o?new Bt(r,!0,!1):null,a=Ql(t.pendingWriteTree_,e._path),l=YC(i,e,a,o?s.getNode():x.EMPTY_NODE,o);return VO(l)}function us(t,e){return eD(e,t.syncPointTree_,null,Ql(t.pendingWriteTree_,G()))}function eD(t,e,n,r){if($(t.path))return tD(t,e,n,r);{let i=e.get(G());n==null&&i!=null&&(n=Rn(i,G()));let o=[],s=V(t.path),a=t.operationForChild(s),l=e.children.get(s);if(l&&a){let c=n?n.getImmediateChild(s):null,u=HC(r,s);o=o.concat(eD(a,l,c,u))}return i&&(o=o.concat(Mp(i,t,r,n))),o}}function tD(t,e,n,r){let i=e.get(G());n==null&&i!=null&&(n=Rn(i,G()));let o=[];return e.children.inorderTraversal((s,a)=>{let l=n?n.getImmediateChild(s):null,c=HC(r,s),u=t.operationForChild(s);u&&(o=o.concat(tD(u,a,l,c)))}),i&&(o=o.concat(Mp(i,t,r,n))),o}function nD(t,e){let n=e.query,r=rs(t,n);return{hashFn:()=>(LO(e)||x.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?JO(t,n._path,r):ZO(t,n._path);{let o=_R(i,n);return Hl(t,n,null,o)}}}}function rs(t,e){let n=Zl(e);return t.queryToTagMap.get(n)}function Zl(t){return t._path.toString()+"$"+t._queryIdentifier}function Ap(t,e){return t.tagToQueryMap.get(e)}function xp(t){let e=t.indexOf("$");return g(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new K(t.substr(0,e))}}function Np(t,e,n){let r=t.syncPointTree_.get(e);g(r,"Missing sync point for query tag that we're tracking");let i=Ql(t.pendingWriteTree_,e);return Mp(r,n,i,null)}function tP(t){return t.fold((e,n,r)=>{if(n&&Pn(n))return[Kl(n)];{let i=[];return n&&(i=QC(n)),Le(r,(o,s)=>{i=i.concat(s)}),i}})}function Jo(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(YO())(t._repo,t._path):t}function nP(t,e){for(let n=0;n<e.length;++n){let r=e[n];if(!r._queryParams.loadsAllData()){let i=Zl(r),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}function rP(){return QO++}function iP(t,e,n){let r=e._path,i=rs(t,e),o=nD(t,n),s=t.listenProvider_.startListening(Jo(e),i,o.hashFn,o.onComplete),a=t.syncPointTree_.subtree(r);if(i)g(!Pn(a.value),"If we're adding a query, it shouldn't be shadowed");else{let l=a.fold((c,u,d)=>{if(!$(c)&&u&&Pn(u))return[Kl(u).query];{let f=[];return u&&(f=f.concat(QC(u).map(h=>h.query))),Le(d,(h,p)=>{f=f.concat(p)}),f}});for(let c=0;c<l.length;++c){let u=l[c];t.listenProvider_.stopListening(Jo(u),rs(t,u))}}return s}var lp=class t{constructor(e){this.node_=e}getImmediateChild(e){let n=this.node_.getImmediateChild(e);return new t(n)}node(){return this.node_}},cp=class t{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){let n=fe(this.path_,e);return new t(this.syncTree_,n)}node(){return Tp(this.syncTree_,this.path_)}},oP=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},rC=function(t,e,n){if(!t||typeof t!="object")return t;if(g(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return sP(t[".sv"],e,n);if(typeof t[".sv"]=="object")return aP(t[".sv"],e);g(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},sP=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:g(!1,"Unexpected server value: "+t)}},aP=function(t,e,n){t.hasOwnProperty("increment")||g(!1,"Unexpected server value: "+JSON.stringify(t,null,2));let r=t.increment;typeof r!="number"&&g(!1,"Unexpected increment value: "+r);let i=e.node();if(g(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let s=i.getValue();return typeof s!="number"?r:s+r},lP=function(t,e,n,r){return Rp(e,new cp(n,t),r)},rD=function(t,e,n){return Rp(t,new lp(e),n)};function Rp(t,e,n){let r=t.getPriority().val(),i=rC(r,e.getImmediateChild(".priority"),n),o;if(t.isLeafNode()){let s=t,a=rC(s.getValue(),e,n);return a!==s.getValue()||i!==s.getPriority().val()?new Mi(a,me(i)):t}else{let s=t;return o=s,i!==s.getPriority().val()&&(o=o.updatePriority(new Mi(i))),s.forEachChild(oe,(a,l)=>{let c=Rp(l,e.getImmediateChild(a),n);c!==l&&(o=o.updateImmediateChild(a,c))}),o}}var is=class{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}};function Op(t,e){let n=e instanceof K?e:new K(e),r=t,i=V(n);for(;i!==null;){let o=hr(r.node.children,i)||{children:{},childCount:0};r=new is(i,r,o),n=te(n),i=V(n)}return r}function Pi(t){return t.node.value}function iD(t,e){t.node.value=e,up(t)}function oD(t){return t.node.childCount>0}function cP(t){return Pi(t)===void 0&&!oD(t)}function Jl(t,e){Le(t.node.children,(n,r)=>{e(new is(n,t,r))})}function sD(t,e,n,r){n&&!r&&e(t),Jl(t,i=>{sD(i,e,!0,r)}),n&&r&&e(t)}function uP(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function ds(t){return new K(t.parent===null?t.name:ds(t.parent)+"/"+t.name)}function up(t){t.parent!==null&&dP(t.parent,t.name,t)}function dP(t,e,n){let r=cP(n),i=kt(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,up(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,up(t))}var fP=/[\[\].#$\/\u0000-\u001F\u007F]/,hP=/[\[\].#$\u0000-\u001F\u007F]/,Dh=10*1024*1024,aD=function(t){return typeof t=="string"&&t.length!==0&&!fP.test(t)},lD=function(t){return typeof t=="string"&&t.length!==0&&!hP.test(t)},pP=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),lD(t)};var gP=function(t,e,n,r){r&&e===void 0||Pp(vl(t,"value"),e,n)},Pp=function(t,e,n){let r=n instanceof K?new kh(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+mr(r));if(typeof e=="function")throw new Error(t+"contains a function "+mr(r)+" with contents = "+e.toString());if(uC(e))throw new Error(t+"contains "+e.toString()+" "+mr(r));if(typeof e=="string"&&e.length>Dh/3&&jo(e)>Dh)throw new Error(t+"contains a string greater than "+Dh+" utf8 bytes "+mr(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,o=!1;if(Le(e,(s,a)=>{if(s===".value")i=!0;else if(s!==".priority"&&s!==".sv"&&(o=!0,!aD(s)))throw new Error(t+" contains an invalid key ("+s+") "+mr(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);YR(r,s),Pp(t,a,r),QR(r)}),i&&o)throw new Error(t+' contains ".value" child '+mr(r)+" in addition to actual children.")}};var cD=function(t,e,n,r){if(!(r&&n===void 0)&&!lD(n))throw new Error(vl(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},mP=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),cD(t,e,n,r)},vP=function(t,e){if(V(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},yP=function(t,e){let n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!aD(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!pP(n))throw new Error(vl(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var dp=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function Fp(t,e){let n=null;for(let r=0;r<e.length;r++){let i=e[r],o=i.getPath();n!==null&&!wp(o,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function uD(t,e,n){Fp(t,n),dD(t,r=>wp(r,e))}function $t(t,e,n){Fp(t,n),dD(t,r=>_t(r,e)||_t(e,r))}function dD(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){let i=t.eventLists_[r];if(i){let o=i.path;e(o)?(_P(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function _P(t){for(let e=0;e<t.events.length;e++){let n=t.events[e];if(n!==null){t.events[e]=null;let r=n.getEventRunner();_r&&Ee("event: "+n.toString()),Oi(r)}}}var wP="repo_interrupt",CP=25,fp=class{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new dp,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Rl(),this.transactionQueueTree_=new is,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function DP(t,e,n){if(t.stats_=_p(t.repoInfo_),t.forceRestClient_||ER())t.server_=new qh(t.repoInfo_,(r,i,o,s)=>{iC(t,r,i,o,s)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>oC(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ce(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Cp(t.repoInfo_,e,(r,i,o,s)=>{iC(t,r,i,o,s)},r=>{oC(t,r)},r=>{bP(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=IR(t.repoInfo_,()=>new Zh(t.stats_,t.server_)),t.infoData_=new Yh,t.infoSyncTree_=new Ul({startListening:(r,i,o,s)=>{let a=[],l=t.infoData_.getNode(r._path);return l.isEmpty()||(a=cs(t.infoSyncTree_,r._path,l),setTimeout(()=>{s("ok")},0)),a},stopListening:()=>{}}),Lp(t,"connected",!1),t.serverSyncTree_=new Ul({startListening:(r,i,o,s)=>(t.server_.listen(r,o,i,(a,l)=>{let c=s(a,l);$t(t.eventQueue_,r._path,c)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function EP(t){let n=t.infoData_.getNode(new K(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function kp(t){return oP({timestamp:EP(t)})}function iC(t,e,n,r,i){t.dataUpdateCount++;let o=new K(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let s=[];if(i)if(r){let l=Vo(n,c=>me(c));s=XO(t.serverSyncTree_,o,l,i)}else{let l=me(n);s=XC(t.serverSyncTree_,o,l,i)}else if(r){let l=Vo(n,c=>me(c));s=KO(t.serverSyncTree_,o,l)}else{let l=me(n);s=cs(t.serverSyncTree_,o,l)}let a=o;s.length>0&&(a=ec(t,o)),$t(t.eventQueue_,a,s)}function oC(t,e){Lp(t,"connected",e),e===!1&&MP(t)}function bP(t,e){Le(e,(n,r)=>{Lp(t,n,r)})}function Lp(t,e,n){let r=new K("/.info/"+e),i=me(n);t.infoData_.updateSnapshot(r,i);let o=cs(t.infoSyncTree_,r,i);$t(t.eventQueue_,r,o)}function fD(t){return t.nextWriteId_++}function IP(t,e,n){let r=eP(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(i=>{let o=me(i).withIndex(e._queryParams.getIndex());ap(t.serverSyncTree_,e,n,!0);let s;if(e._queryParams.loadsAllData())s=cs(t.serverSyncTree_,e._path,o);else{let a=rs(t.serverSyncTree_,e);s=XC(t.serverSyncTree_,e._path,o,a)}return $t(t.eventQueue_,e._path,s),Hl(t.serverSyncTree_,e,n,null,!0),o},i=>(Xl(t,"get for query "+ce(e)+" failed: "+i),Promise.reject(new Error(i))))}function SP(t,e,n,r,i){Xl(t,"set",{path:e.toString(),value:n,priority:r});let o=kp(t),s=me(n,r),a=Tp(t.serverSyncTree_,e),l=rD(s,a,o),c=fD(t),u=JC(t.serverSyncTree_,e,l,c,!0);Fp(t.eventQueue_,u),t.server_.put(e.toString(),s.val(!0),(f,h)=>{let p=f==="ok";p||ke("set at "+e+" failed: "+f);let y=yr(t.serverSyncTree_,c,!p);$t(t.eventQueue_,e,y),xP(t,i,f,h)});let d=vD(t,e);ec(t,d),$t(t.eventQueue_,d,[])}function MP(t){Xl(t,"onDisconnectEvents");let e=kp(t),n=Rl();Qh(t.onDisconnect_,G(),(i,o)=>{let s=lP(i,o,t.serverSyncTree_,e);LC(n,i,s)});let r=[];Qh(n,G(),(i,o)=>{r=r.concat(cs(t.serverSyncTree_,i,o));let s=vD(t,i);ec(t,s)}),t.onDisconnect_=Rl(),$t(t.eventQueue_,G(),r)}function TP(t,e,n){let r;V(e._path)===".info"?r=ap(t.infoSyncTree_,e,n):r=ap(t.serverSyncTree_,e,n),uD(t.eventQueue_,e._path,r)}function sC(t,e,n){let r;V(e._path)===".info"?r=Hl(t.infoSyncTree_,e,n):r=Hl(t.serverSyncTree_,e,n),uD(t.eventQueue_,e._path,r)}function AP(t){t.persistentConnection_&&t.persistentConnection_.interrupt(wP)}function Xl(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Ee(n,...e)}function xP(t,e,n,r){e&&Oi(()=>{if(n==="ok")e(null);else{let i=(n||"error").toUpperCase(),o=i;r&&(o+=": "+r);let s=new Error(o);s.code=i,e(s)}})}function hD(t,e,n){return Tp(t.serverSyncTree_,e,n)||x.EMPTY_NODE}function Vp(t,e=t.transactionQueueTree_){if(e||tc(t,e),Pi(e)){let n=gD(t,e);g(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&NP(t,ds(e),n)}else oD(e)&&Jl(e,n=>{Vp(t,n)})}function NP(t,e,n){let r=n.map(c=>c.currentWriteId),i=hD(t,e,r),o=i,s=i.hash();for(let c=0;c<n.length;c++){let u=n[c];g(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;let d=Te(e,u.path);o=o.updateChild(d,u.currentOutputSnapshotRaw)}let a=o.val(!0),l=e;t.server_.put(l.toString(),a,c=>{Xl(t,"transaction put response",{path:l.toString(),status:c});let u=[];if(c==="ok"){let d=[];for(let f=0;f<n.length;f++)n[f].status=2,u=u.concat(yr(t.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&d.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();tc(t,Op(t.transactionQueueTree_,e)),Vp(t,t.transactionQueueTree_),$t(t.eventQueue_,e,u);for(let f=0;f<d.length;f++)Oi(d[f])}else{if(c==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{ke("transaction at "+l.toString()+" failed: "+c);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=c}ec(t,e)}},s)}function ec(t,e){let n=pD(t,e),r=ds(n),i=gD(t,n);return RP(t,i,r),r}function RP(t,e,n){if(e.length===0)return;let r=[],i=[],s=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let l=e[a],c=Te(n,l.path),u=!1,d;if(g(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)u=!0,d=l.abortReason,i=i.concat(yr(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=CP)u=!0,d="maxretry",i=i.concat(yr(t.serverSyncTree_,l.currentWriteId,!0));else{let f=hD(t,l.path,s);l.currentInputSnapshot=f;let h=e[a].update(f.val());if(h!==void 0){Pp("transaction failed: Data returned ",h,l.path);let p=me(h);typeof h=="object"&&h!=null&&kt(h,".priority")||(p=p.updatePriority(f.getPriority()));let F=l.currentWriteId,B=kp(t),Ae=rD(p,f,B);l.currentOutputSnapshotRaw=p,l.currentOutputSnapshotResolved=Ae,l.currentWriteId=fD(t),s.splice(s.indexOf(F),1),i=i.concat(JC(t.serverSyncTree_,l.path,Ae,l.currentWriteId,l.applyLocally)),i=i.concat(yr(t.serverSyncTree_,F,!0))}else u=!0,d="nodata",i=i.concat(yr(t.serverSyncTree_,l.currentWriteId,!0))}$t(t.eventQueue_,n,i),i=[],u&&(e[a].status=2,function(f){setTimeout(f,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}tc(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Oi(r[a]);Vp(t,t.transactionQueueTree_)}function pD(t,e){let n,r=t.transactionQueueTree_;for(n=V(e);n!==null&&Pi(r)===void 0;)r=Op(r,n),e=te(e),n=V(e);return r}function gD(t,e){let n=[];return mD(t,e,n),n.sort((r,i)=>r.order-i.order),n}function mD(t,e,n){let r=Pi(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Jl(e,i=>{mD(t,i,n)})}function tc(t,e){let n=Pi(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,iD(e,n.length>0?n:void 0)}Jl(e,r=>{tc(t,r)})}function vD(t,e){let n=ds(pD(t,e)),r=Op(t.transactionQueueTree_,e);return uP(r,i=>{Eh(t,i)}),Eh(t,r),sD(r,i=>{Eh(t,i)}),n}function Eh(t,e){let n=Pi(e);if(n){let r=[],i=[],o=-1;for(let s=0;s<n.length;s++)n[s].status===3||(n[s].status===1?(g(o===s-1,"All SENT items should be at beginning of queue."),o=s,n[s].status=3,n[s].abortReason="set"):(g(n[s].status===0,"Unexpected transaction status in abort"),n[s].unwatcher(),i=i.concat(yr(t.serverSyncTree_,n[s].currentWriteId,!0)),n[s].onComplete&&r.push(n[s].onComplete.bind(null,new Error("set"),!1,null))));o===-1?iD(e,void 0):n.length=o+1,$t(t.eventQueue_,ds(e),i);for(let s=0;s<r.length;s++)Oi(r[s])}}function OP(t){let e="",n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function PP(t){let e={};t.charAt(0)==="?"&&(t=t.substring(1));for(let n of t.split("&")){if(n.length===0)continue;let r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):ke(`Invalid query segment '${n}' in query '${t}'`)}return e}var aC=function(t,e){let n=FP(t),r=n.namespace;n.domain==="firebase.com"&&on(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&on("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||pR();let i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new bl(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new K(n.pathString)}},FP=function(t){let e="",n="",r="",i="",o="",s=!0,a="https",l=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let u=t.indexOf("/");u===-1&&(u=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(u,d)),u<d&&(i=OP(t.substring(u,d)));let f=PP(t.substring(Math.min(t.length,d)));c=e.indexOf(":"),c>=0?(s=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;let h=e.slice(0,c);if(h.toLowerCase()==="localhost")n="localhost";else if(h.split(".").length<=2)n=h;else{let p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),n=e.substring(p+1),o=r}"ns"in f&&(o=f.ns)}return{host:e,port:l,domain:n,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}};var Wl=class{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){let e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+ce(this.snapshot.exportVal())}},Gl=class{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var zl=class{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return g(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}};var hp=class t{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return $(this._path)?null:TC(this._path)}get ref(){return new Ut(this._repo,this._path)}get _queryIdentifier(){let e=zw(this._queryParams),n=yp(e);return n==="{}"?"default":n}get _queryObject(){return zw(this._queryParams)}isEqual(e){if(e=Lt(e),!(e instanceof t))return!1;let n=this._repo===e._repo,r=wp(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+qR(this._path)}};var Ut=class t extends hp{constructor(e,n){super(e,n,new zh,!1)}get parent(){let e=xC(this._path);return e===null?null:new t(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}},os=class t{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){let n=new K(e),r=Fn(this.ref,e);return new t(this._node.getChild(n),r,oe)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new t(i,Fn(this.ref,r),oe)))}hasChild(e){let n=new K(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function be(t,e){return t=Lt(t),t._checkNotDeleted("ref"),e!==void 0?Fn(t._root,e):t._root}function Fn(t,e){return t=Lt(t),V(t._path)===null?mP("child","path",e,!1):cD("child","path",e,!1),new Ut(t._repo,fe(t._path,e))}function Ct(t,e){t=Lt(t),vP("set",t._path),gP("set",e,t._path,!1);let n=new Mn;return SP(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function nc(t){t=Lt(t);let e=new zl(()=>{}),n=new ql(e);return IP(t._repo,t,n).then(r=>new os(r,new Ut(t._repo,t._path),t._queryParams.getIndex()))}var ql=class t{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){let r=n._queryParams.getIndex();return new Wl("value",this,new os(e.snapshotNode,new Ut(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Gl(this,e,n):null}matches(e){return e instanceof t?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},pp=class t{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Gl(this,e,n):null}createEvent(e,n){g(e.childName!=null,"Child events should have a childName.");let r=Fn(new Ut(n._repo,n._path),e.childName),i=n._queryParams.getIndex();return new Wl(e.type,this,new os(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof t?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function kP(t,e,n,r,i){let o;if(typeof r=="object"&&(o=void 0,i=r),typeof r=="function"&&(o=r),i&&i.onlyOnce){let l=n,c=(u,d)=>{sC(t._repo,t,a),l(u,d)};c.userCallback=n.userCallback,c.context=n.context,n=c}let s=new zl(n,o||void 0),a=e==="value"?new ql(s):new pp(e,s);return TP(t._repo,t,a),()=>sC(t._repo,t,a)}function jp(t,e,n,r){return kP(t,"value",e,n,r)}UO(Ut);qO(Ut);var LP="FIREBASE_DATABASE_EMULATOR_HOST",gp={},VP=!1;function jP(t,e,n,r){t.repoInfo_=new bl(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function BP(t,e,n,r,i){let o=r||t.options.databaseURL;o===void 0&&(t.options.projectId||on("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ee("Using default host for project ",t.options.projectId),o=`${t.options.projectId}-default-rtdb.firebaseio.com`);let s=aC(o,i),a=s.repoInfo,l,c;typeof process<"u"&&process.env&&(c=process.env[LP]),c?(l=!0,o=`http://${c}?ns=${a.namespace}`,s=aC(o,i),a=s.repoInfo):l=!s.repoInfo.secure;let u=i&&l?new Qo(Qo.OWNER):new Ah(t.name,t.options,e);yP("Invalid Firebase Database URL",s),$(s.path)||on("Database URL must point to the root of a Firebase Database (not including a child path).");let d=UP(a,t,u,new Th(t.name,n));return new mp(d,t)}function $P(t,e){let n=gp[e];(!n||n[t.key]!==t)&&on(`Database ${e}(${t.repoInfo_}) has already been deleted.`),AP(t),delete n[t.key]}function UP(t,e,n,r){let i=gp[e.name];i||(i={},gp[e.name]=i);let o=i[t.toURLString()];return o&&on("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new fp(t,VP,n,r),i[t.toURLString()]=o,o}var mp=class{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(DP(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ut(this._repo,G())),this._rootInternal}_delete(){return this._rootInternal!==null&&($P(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&on("Cannot call "+e+" on a deleted database.")}};function kn(t=Uo(),e){let n=xn(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){let r=ow("database");r&&HP(n,...r)}return n}function HP(t,e,n,r={}){t=Lt(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&on("Cannot call useEmulator() after instance has already been initialized.");let i=t._repoInternal,o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&on('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Qo(Qo.OWNER);else if(r.mockUserToken){let s=typeof r.mockUserToken=="string"?r.mockUserToken:sw(r.mockUserToken,t.app.options.projectId);o=new Qo(s)}jP(i,e,n,o)}function WP(t){dR(Sw),vt(new Me("database",(e,{instanceIdentifier:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return BP(r,i,o,n)},"PUBLIC").setMultipleInstances(!0)),Fe(Aw,xw,t),Fe(Aw,xw,"esm2017")}Cp.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Cp.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};WP();var wD="@firebase/installations",Hp="0.6.6";var CD=1e4,DD=`w:${Hp}`,ED="FIS_v2",GP="https://firebaseinstallations.googleapis.com/v1",zP=60*60*1e3,qP="installations",YP="Installations";var QP={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},br=new rn(qP,YP,QP);function bD(t){return t instanceof mt&&t.code.includes("request-failed")}function ID({projectId:t}){return`${GP}/projects/${t}/installations`}function SD(t){return{token:t.token,requestStatus:2,expiresIn:ZP(t.expiresIn),creationTime:Date.now()}}function MD(t,e){return S(this,null,function*(){let r=(yield e.json()).error;return br.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})}function TD({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function KP(t,{refreshToken:e}){let n=TD(t);return n.append("Authorization",JP(e)),n}function AD(t){return S(this,null,function*(){let e=yield t();return e.status>=500&&e.status<600?t():e})}function ZP(t){return Number(t.replace("s","000"))}function JP(t){return`${ED} ${t}`}function XP(r,i){return S(this,arguments,function*({appConfig:t,heartbeatServiceProvider:e},{fid:n}){let o=ID(t),s=TD(t),a=e.getImmediate({optional:!0});if(a){let d=yield a.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}let l={fid:n,authVersion:ED,appId:t.appId,sdkVersion:DD},c={method:"POST",headers:s,body:JSON.stringify(l)},u=yield AD(()=>fetch(o,c));if(u.ok){let d=yield u.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:SD(d.authToken)}}else throw yield MD("Create Installation",u)})}function xD(t){return new Promise(e=>{setTimeout(e,t)})}function eF(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}var tF=/^[cdef][\w-]{21}$/,Up="";function nF(){try{let t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;let n=rF(t);return tF.test(n)?n:Up}catch{return Up}}function rF(t){return eF(t).substr(0,22)}function ic(t){return`${t.appName}!${t.appId}`}var ND=new Map;function RD(t,e){let n=ic(t);OD(n,e),iF(n,e)}function OD(t,e){let n=ND.get(t);if(n)for(let r of n)r(e)}function iF(t,e){let n=oF();n&&n.postMessage({key:t,fid:e}),sF()}var Er=null;function oF(){return!Er&&"BroadcastChannel"in self&&(Er=new BroadcastChannel("[Firebase] FID Change"),Er.onmessage=t=>{OD(t.data.key,t.data.fid)}),Er}function sF(){ND.size===0&&Er&&(Er.close(),Er=null)}var aF="firebase-installations-database",lF=1,Ir="firebase-installations-store",Bp=null;function Wp(){return Bp||(Bp=wl(aF,lF,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Ir)}}})),Bp}function rc(t,e){return S(this,null,function*(){let n=ic(t),i=(yield Wp()).transaction(Ir,"readwrite"),o=i.objectStore(Ir),s=yield o.get(n);return yield o.put(e,n),yield i.done,(!s||s.fid!==e.fid)&&RD(t,e.fid),e})}function PD(t){return S(this,null,function*(){let e=ic(t),r=(yield Wp()).transaction(Ir,"readwrite");yield r.objectStore(Ir).delete(e),yield r.done})}function oc(t,e){return S(this,null,function*(){let n=ic(t),i=(yield Wp()).transaction(Ir,"readwrite"),o=i.objectStore(Ir),s=yield o.get(n),a=e(s);return a===void 0?yield o.delete(n):yield o.put(a,n),yield i.done,a&&(!s||s.fid!==a.fid)&&RD(t,a.fid),a})}function Gp(t){return S(this,null,function*(){let e,n=yield oc(t.appConfig,r=>{let i=cF(r),o=uF(t,i);return e=o.registrationPromise,o.installationEntry});return n.fid===Up?{installationEntry:yield e}:{installationEntry:n,registrationPromise:e}})}function cF(t){let e=t||{fid:nF(),registrationStatus:0};return FD(e)}function uF(t,e){if(e.registrationStatus===0){if(!navigator.onLine){let i=Promise.reject(br.create("app-offline"));return{installationEntry:e,registrationPromise:i}}let n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=dF(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:fF(t)}:{installationEntry:e}}function dF(t,e){return S(this,null,function*(){try{let n=yield XP(t,e);return rc(t.appConfig,n)}catch(n){throw bD(n)&&n.customData.serverCode===409?yield PD(t.appConfig):yield rc(t.appConfig,{fid:e.fid,registrationStatus:0}),n}})}function fF(t){return S(this,null,function*(){let e=yield yD(t.appConfig);for(;e.registrationStatus===1;)yield xD(100),e=yield yD(t.appConfig);if(e.registrationStatus===0){let{installationEntry:n,registrationPromise:r}=yield Gp(t);return r||n}return e})}function yD(t){return oc(t,e=>{if(!e)throw br.create("installation-not-found");return FD(e)})}function FD(t){return hF(t)?{fid:t.fid,registrationStatus:0}:t}function hF(t){return t.registrationStatus===1&&t.registrationTime+CD<Date.now()}function pF(r,i){return S(this,arguments,function*({appConfig:t,heartbeatServiceProvider:e},n){let o=gF(t,n),s=KP(t,n),a=e.getImmediate({optional:!0});if(a){let d=yield a.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}let l={installation:{sdkVersion:DD,appId:t.appId}},c={method:"POST",headers:s,body:JSON.stringify(l)},u=yield AD(()=>fetch(o,c));if(u.ok){let d=yield u.json();return SD(d)}else throw yield MD("Generate Auth Token",u)})}function gF(t,{fid:e}){return`${ID(t)}/${e}/authTokens:generate`}function zp(t,e=!1){return S(this,null,function*(){let n,r=yield oc(t.appConfig,o=>{if(!kD(o))throw br.create("not-registered");let s=o.authToken;if(!e&&yF(s))return o;if(s.requestStatus===1)return n=mF(t,e),o;{if(!navigator.onLine)throw br.create("app-offline");let a=wF(o);return n=vF(t,a),a}});return n?yield n:r.authToken})}function mF(t,e){return S(this,null,function*(){let n=yield _D(t.appConfig);for(;n.authToken.requestStatus===1;)yield xD(100),n=yield _D(t.appConfig);let r=n.authToken;return r.requestStatus===0?zp(t,e):r})}function _D(t){return oc(t,e=>{if(!kD(e))throw br.create("not-registered");let n=e.authToken;return CF(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function vF(t,e){return S(this,null,function*(){try{let n=yield pF(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return yield rc(t.appConfig,r),n}catch(n){if(bD(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))yield PD(t.appConfig);else{let r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield rc(t.appConfig,r)}throw n}})}function kD(t){return t!==void 0&&t.registrationStatus===2}function yF(t){return t.requestStatus===2&&!_F(t)}function _F(t){let e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+zP}function wF(t){let e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function CF(t){return t.requestStatus===1&&t.requestTime+CD<Date.now()}function DF(t){return S(this,null,function*(){let e=t,{installationEntry:n,registrationPromise:r}=yield Gp(e);return r?r.catch(console.error):zp(e).catch(console.error),n.fid})}function EF(t,e=!1){return S(this,null,function*(){let n=t;return yield bF(n),(yield zp(n,e)).token})}function bF(t){return S(this,null,function*(){let{registrationPromise:e}=yield Gp(t);e&&(yield e)})}function IF(t){if(!t||!t.options)throw $p("App Configuration");if(!t.name)throw $p("App Name");let e=["projectId","apiKey","appId"];for(let n of e)if(!t.options[n])throw $p(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function $p(t){return br.create("missing-app-config-values",{valueName:t})}var LD="installations",SF="installations-internal",MF=t=>{let e=t.getProvider("app").getImmediate(),n=IF(e),r=xn(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},TF=t=>{let e=t.getProvider("app").getImmediate(),n=xn(e,LD).getImmediate();return{getId:()=>DF(n),getToken:i=>EF(n,i)}};function AF(){vt(new Me(LD,MF,"PUBLIC")),vt(new Me(SF,TF,"PRIVATE"))}AF();Fe(wD,Hp);Fe(wD,Hp,"esm2017");var sc="analytics",xF="firebase_id",NF="origin",RF=60*1e3,OF="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Xp="https://www.googletagmanager.com/gtag/js";var je=new Tn("@firebase/analytics");var PF={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Ye=new rn("analytics","Analytics",PF);function FF(t){if(!t.startsWith(Xp)){let e=Ye.create("invalid-gtag-resource",{gtagURL:t});return je.warn(e.message),""}return t}function WD(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function kF(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function LF(t,e){let n=kF("firebase-js-sdk-policy",{createScriptURL:FF}),r=document.createElement("script"),i=`${Xp}?l=${t}&id=${e}`;r.src=n?n?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function VF(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}function jF(t,e,n,r,i,o){return S(this,null,function*(){let s=r[i];try{if(s)yield e[s];else{let l=(yield WD(n)).find(c=>c.measurementId===i);l&&(yield e[l.appId])}}catch(a){je.error(a)}t("config",i,o)})}function BF(t,e,n,r,i){return S(this,null,function*(){try{let o=[];if(i&&i.send_to){let s=i.send_to;Array.isArray(s)||(s=[s]);let a=yield WD(n);for(let l of s){let c=a.find(d=>d.measurementId===l),u=c&&e[c.appId];if(u)o.push(u);else{o=[];break}}}o.length===0&&(o=Object.values(e)),yield Promise.all(o),t("event",r,i||{})}catch(o){je.error(o)}})}function $F(t,e,n,r){function i(o,...s){return S(this,null,function*(){try{if(o==="event"){let[a,l]=s;yield BF(t,e,n,a,l)}else if(o==="config"){let[a,l]=s;yield jF(t,e,n,r,a,l)}else if(o==="consent"){let[a]=s;t("consent","update",a)}else if(o==="get"){let[a,l,c]=s;t("get",a,l,c)}else if(o==="set"){let[a]=s;t("set",a)}else t(o,...s)}catch(a){je.error(a)}})}return i}function UF(t,e,n,r,i){let o=function(...s){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(o=window[i]),window[i]=$F(o,t,e,n),{gtagCore:o,wrappedGtag:window[i]}}function HF(t){let e=window.document.getElementsByTagName("script");for(let n of Object.values(e))if(n.src&&n.src.includes(Xp)&&n.src.includes(t))return n;return null}var WF=30,GF=1e3,Yp=class{constructor(e={},n=GF){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}},GD=new Yp;function zF(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}function qF(t){return S(this,null,function*(){var e;let{appId:n,apiKey:r}=t,i={method:"GET",headers:zF(r)},o=OF.replace("{app-id}",n),s=yield fetch(o,i);if(s.status!==200&&s.status!==304){let a="";try{let l=yield s.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw Ye.create("config-fetch-failed",{httpStatus:s.status,responseMessage:a})}return s.json()})}function YF(r){return S(this,arguments,function*(t,e=GD,n){let{appId:i,apiKey:o,measurementId:s}=t.options;if(!i)throw Ye.create("no-app-id");if(!o){if(s)return{measurementId:s,appId:i};throw Ye.create("no-api-key")}let a=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new Qp;return setTimeout(()=>S(this,null,function*(){l.abort()}),n!==void 0?n:RF),zD({appId:i,apiKey:o,measurementId:s},a,l,e)})}function zD(o,s,a){return S(this,arguments,function*(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=GD){var l;let{appId:c,measurementId:u}=t;try{yield QF(r,e)}catch(d){if(u)return je.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${d?.message}]`),{appId:c,measurementId:u};throw d}try{let d=yield qF(t);return i.deleteThrottleMetadata(c),d}catch(d){let f=d;if(!KF(f)){if(i.deleteThrottleMetadata(c),u)return je.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${f?.message}]`),{appId:c,measurementId:u};throw d}let h=Number((l=f?.customData)===null||l===void 0?void 0:l.httpStatus)===503?nh(n,i.intervalMillis,WF):nh(n,i.intervalMillis),p={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return i.setThrottleMetadata(c,p),je.debug(`Calling attemptFetch again in ${h} millis`),zD(t,p,r,i)}})}function QF(t,e){return new Promise((n,r)=>{let i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(o),r(Ye.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function KF(t){if(!(t instanceof mt)||!t.customData)return!1;let e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}var Qp=class{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}};var Kp;function ZF(t,e,n,r,i){return S(this,null,function*(){if(i&&i.global){t("event",n,r);return}else{let o=yield e,s=Object.assign(Object.assign({},r),{send_to:o});t("event",n,s)}})}var Zp;function JF(t){Zp=t}function XF(t){Kp=t}function ek(){return S(this,null,function*(){if(gl())try{yield ml()}catch(t){return je.warn(Ye.create("indexeddb-unavailable",{errorInfo:t?.toString()}).message),!1}else return je.warn(Ye.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0})}function tk(t,e,n,r,i,o,s){return S(this,null,function*(){var a;let l=YF(t);l.then(h=>{n[h.measurementId]=h.appId,t.options.measurementId&&h.measurementId!==t.options.measurementId&&je.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${h.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(h=>je.error(h)),e.push(l);let c=ek().then(h=>{if(h)return r.getId()}),[u,d]=yield Promise.all([l,c]);HF(o)||LF(o,u.measurementId),Zp&&(i("consent","default",Zp),JF(void 0)),i("js",new Date);let f=(a=s?.config)!==null&&a!==void 0?a:{};return f[NF]="firebase",f.update=!0,d!=null&&(f[xF]=d),i("config",u.measurementId,f),Kp&&(i("set",Kp),XF(void 0)),u.measurementId})}var Jp=class{constructor(e){this.app=e}_delete(){return delete fs[this.app.options.appId],Promise.resolve()}},fs={},VD=[],jD={},qp="dataLayer",nk="gtag",BD,qD,$D=!1;function rk(){let t=[];if(aw()&&t.push("This is a browser extension environment."),cw()||t.push("Cookies are not available."),t.length>0){let e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=Ye.create("invalid-analytics-context",{errorInfo:e});je.warn(n.message)}}function ik(t,e,n){rk();let r=t.options.appId;if(!r)throw Ye.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)je.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Ye.create("no-api-key");if(fs[r]!=null)throw Ye.create("already-exists",{id:r});if(!$D){VF(qp);let{wrappedGtag:o,gtagCore:s}=UF(fs,VD,jD,qp,nk);qD=o,BD=s,$D=!0}return fs[r]=tk(t,VD,jD,e,BD,qp,n),new Jp(t)}function YD(t=Uo()){t=Lt(t);let e=xn(t,sc);return e.isInitialized()?e.getImmediate():ok(t)}function ok(t,e={}){let n=xn(t,sc);if(n.isInitialized()){let i=n.getImmediate();if(wi(e,n.getOptions()))return i;throw Ye.create("already-initialized")}return n.initialize({options:e})}function sk(t,e,n,r){t=Lt(t),ZF(qD,fs[t.app.options.appId],e,n,r).catch(i=>je.error(i))}var UD="@firebase/analytics",HD="0.10.2";function ak(){vt(new Me(sc,(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return ik(r,i,n)},"PUBLIC")),vt(new Me("analytics-internal",t,"PRIVATE")),Fe(UD,HD),Fe(UD,HD,"esm2017");function t(e){try{let n=e.getProvider(sc).getImmediate();return{logEvent:(r,i,o)=>sk(n,r,i,o)}}catch(n){throw Ye.create("interop-component-reg-failed",{reason:n})}}}ak();var lk={apiKey:"AIzaSyA5V73Ng81RKVnlqT9HgSKxSNP0sC6_xVE",authDomain:"chat-4f6e8.firebaseapp.com",projectId:"chat-4f6e8",storageBucket:"chat-4f6e8.appspot.com",messagingSenderId:"146182554805",appId:"1:146182554805:web:cc4fd2d8cc0462154e2afc",measurementId:"G-6TRWM9RMX2"},Fi=(()=>{let e=class e{constructor(){let r=mh(lk),i=YD(r)}register(r){let i=kn(),o=be(kn()),s=this.generateRandomBase64UrlString(),a={id:s,body:"hello",sender:r.username,time:this.getCurrentTime()};nc(Fn(o,"users")).then(l=>{l.exists()?l.child(r?.username??"").val()?alert("Username existed"):(Ct(be(i,"users/"+r?.username),r),Ct(be(i,`users/${r?.username}/chat/${r?.username}/messages/${s}`),a),Ct(be(i,`users/${r?.username}/chat/${r?.username}/fullNamePartner`),r.fullName),Ct(be(i,`users/${r?.username}/chat/${r?.username}/partner`),r.username),alert("Register success")):alert("Somthing went wrong")}).catch(l=>{alert(l)})}login(r,i,o){let s=be(kn());nc(Fn(s,"users")).then(a=>{if(a.exists()){let l=a.child(r).val();l?l.password==i?o(l):alert("Please Check Passwod"):alert("User not found with username:")}else console.log("No data available")}).catch(a=>{console.error(a)})}getListUser(r){let i=kn(),o=be(i,"users/");jp(o,s=>{let a=Object.keys(s.val()).map(l=>({fullName:s.val()[l].fullName,password:s.val()[l].password,username:s.val()[l].username}));r(a)})}generateRandomBase64UrlString(){let r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",i="";for(let o=0;o<64;o++)i+=r.charAt(Math.floor(Math.random()*r.length));return btoa(i).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}getListChat(r,i){let o=kn(),s=be(o,`users/${r}/chat`);jp(s,a=>{let l=Object.keys(a.val()).map(c=>{let u=Object.keys(a.val()[c].messages).map(d=>a.val()[c].messages[d]);return{fullNamePartner:a.val()[c].fullNamePartner,partner:a.val()[c].partner,messages:u}});i(l)})}getCurrentTime(){return new Date().toISOString()}sendMessages(r,i,o,s,a){let l=kn(),c=be(kn()),u=this.generateRandomBase64UrlString(),d={id:u,body:a,sender:r,time:this.getCurrentTime()};nc(Fn(c,"users")).then(f=>{f.exists()?(this.updateMessagesForFrom(l,s,r,i,a,u),this.updateMessagesForTo(l,o,r,i,a,u)):alert("Somthing went wrong")}).catch(f=>{alert(f)})}updateMessagesForFrom(r,i,o,s,a,l){let c={id:String(l)??"",body:a,sender:o,time:this.getCurrentTime()};Ct(be(r,`users/${o}/chat/${s}/fullNamePartner`),i),Ct(be(r,`users/${o}/chat/${s}/partner`),s),Ct(be(r,`users/${o}/chat/${s}/messages/${l}`),c)}updateMessagesForTo(r,i,o,s,a,l){let c={id:String(l)??"",body:a,sender:o,time:this.getCurrentTime()};Ct(be(r,`users/${s}/chat/${o}/fullNamePartner`),i),Ct(be(r,`users/${s}/chat/${o}/partner`),o),Ct(be(r,`users/${s}/chat/${o}/messages/${l}`),c)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var ac=(()=>{let e=class e{constructor(){}setItem(r,i){try{localStorage.setItem(r,JSON.stringify(i))}catch(o){console.error("Error saving to local storage:",o)}}getItem(r){try{let i=localStorage.getItem(r);return i?JSON.parse(i):null}catch(i){return console.error("Error parsing data from local storage:",i),null}}removeItem(r){localStorage.removeItem(r)}clear(){localStorage.clear()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var eg=(()=>{let e=class e{transform(r){let i=new Date().getTime(),o=new Date(r).getTime(),s=i-o,a=Math.floor(s/1e3),l=Math.floor(a/60),c=Math.floor(l/60),u=Math.floor(c/24),d=Math.floor(u/7),f=Math.floor(u/30.44),h=Math.floor(u/365.25);return a<60?"Now":l<2?`${l} minute ago`:l<60?`${l} minutes ago`:c<2?`${c} hour ago`:c<24?`${c} hours ago`:u<2?`${u} day ago`:u<30?`${u} days ago`:d<2?`${d} week ago`:d<4?`${d} weeks ago`:f<2?`${f} month ago`:f<6?`${f} months ago`:h<2?`${h} year ago`:new Date(r).toLocaleDateString()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275pipe=wa({name:"timeAgo",type:e,pure:!1});let t=e;return t})();var QD=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=pt({type:e}),e.\u0275inj=ht({});let t=e;return t})();var tE=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(C(yn),C(et))},e.\u0275dir=we({type:e});let t=e;return t})(),uk=(()=>{let e=class e extends tE{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=ao(e)))(o||e)}})(),e.\u0275dir=we({type:e,features:[Jt]});let t=e;return t})(),ig=new I("");var dk={provide:ig,useExisting:or(()=>jn),multi:!0};function fk(){let t=tn()?tn().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var hk=new I(""),jn=(()=>{let e=class e extends tE{constructor(r,i,o){super(r,i),this._compositionMode=o,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!fk())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(C(yn),C(et),C(hk,8))},e.\u0275dir=we({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,o){i&1&&De("input",function(a){return o._handleInput(a.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(a){return o._compositionEnd(a.target.value)})},features:[co([dk]),Jt]});let t=e;return t})();function Ln(t){return t==null||(typeof t=="string"||Array.isArray(t))&&t.length===0}function nE(t){return t!=null&&typeof t.length=="number"}var og=new I(""),sg=new I(""),pk=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,ot=class{static min(e){return gk(e)}static max(e){return mk(e)}static required(e){return vk(e)}static requiredTrue(e){return yk(e)}static email(e){return _k(e)}static minLength(e){return wk(e)}static maxLength(e){return Ck(e)}static pattern(e){return Dk(e)}static nullValidator(e){return rE(e)}static compose(e){return cE(e)}static composeAsync(e){return dE(e)}};function gk(t){return e=>{if(Ln(e.value)||Ln(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}function mk(t){return e=>{if(Ln(e.value)||Ln(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}function vk(t){return Ln(t.value)?{required:!0}:null}function yk(t){return t.value===!0?null:{required:!0}}function _k(t){return Ln(t.value)||pk.test(t.value)?null:{email:!0}}function wk(t){return e=>Ln(e.value)||!nE(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}function Ck(t){return e=>nE(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}function Dk(t){if(!t)return rE;let e,n;return typeof t=="string"?(n="",t.charAt(0)!=="^"&&(n+="^"),n+=t,t.charAt(t.length-1)!=="$"&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),r=>{if(Ln(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:n,actualValue:i}}}}function rE(t){return null}function iE(t){return t!=null}function oE(t){return wn(t)?ne(t):t}function sE(t){let e={};return t.forEach(n=>{e=n!=null?v(v({},e),n):e}),Object.keys(e).length===0?null:e}function aE(t,e){return e.map(n=>n(t))}function Ek(t){return!t.validate}function lE(t){return t.map(e=>Ek(e)?e:n=>e.validate(n))}function cE(t){if(!t)return null;let e=t.filter(iE);return e.length==0?null:function(n){return sE(aE(n,e))}}function uE(t){return t!=null?cE(lE(t)):null}function dE(t){if(!t)return null;let e=t.filter(iE);return e.length==0?null:function(n){let r=aE(n,e).map(oE);return Pc(r).pipe(R(sE))}}function fE(t){return t!=null?dE(lE(t)):null}function KD(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function hE(t){return t._rawValidators}function pE(t){return t._rawAsyncValidators}function ng(t){return t?Array.isArray(t)?t:[t]:[]}function cc(t,e){return Array.isArray(t)?t.includes(e):t===e}function ZD(t,e){let n=ng(e);return ng(t).forEach(i=>{cc(n,i)||n.push(i)}),n}function JD(t,e){return ng(e).filter(n=>!cc(t,n))}var uc=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=uE(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=fE(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},Li=class extends uc{get formDirective(){return null}get path(){return null}},Sr=class extends uc{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},dc=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},bk={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},$H=Z(v({},bk),{"[class.ng-submitted]":"isSubmitted"}),Vi=(()=>{let e=class e extends dc{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(C(Sr,2))},e.\u0275dir=we({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,o){i&2&&tt("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[Jt]});let t=e;return t})(),ji=(()=>{let e=class e extends dc{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(C(Li,10))},e.\u0275dir=we({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,o){i&2&&tt("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},features:[Jt]});let t=e;return t})();var hs="VALID",lc="INVALID",ki="PENDING",ps="DISABLED";function gE(t){return(mc(t)?t.validators:t)||null}function Ik(t){return Array.isArray(t)?uE(t):t||null}function mE(t,e){return(mc(e)?e.asyncValidators:t)||null}function Sk(t){return Array.isArray(t)?fE(t):t||null}function mc(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function Mk(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new _(1e3,"");if(!r[n])throw new _(1001,"")}function Tk(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new _(1002,"")})}var fc=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===hs}get invalid(){return this.status===lc}get pending(){return this.status==ki}get disabled(){return this.status===ps}get enabled(){return this.status!==ps}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(ZD(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(ZD(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(JD(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(JD(e,this._rawAsyncValidators))}hasValidator(e){return cc(this._rawValidators,e)}hasAsyncValidator(e){return cc(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=ki,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=ps,this.errors=null,this._forEachChild(r=>{r.disable(Z(v({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Z(v({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=hs,this._forEachChild(r=>{r.enable(Z(v({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Z(v({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===hs||this.status===ki)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ps:hs}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=ki,this._hasOwnPendingAsyncValidator=!0;let n=oE(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new pe,this.statusChanges=new pe}_calculateStatus(){return this._allControlsDisabled()?ps:this.errors?lc:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ki)?ki:this._anyControlsHaveStatus(lc)?lc:hs}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){mc(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=Ik(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=Sk(this._rawAsyncValidators)}},Vn=class extends fc{constructor(e,n,r){super(gE(n),mE(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){Tk(this,!0,e),Object.keys(e).forEach(r=>{Mk(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var vc=new I("CallSetDisabledState",{providedIn:"root",factory:()=>yc}),yc="always";function Ak(t,e){return[...e.path,t]}function rg(t,e,n=yc){ag(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),Nk(t,e),Ok(t,e),Rk(t,e),xk(t,e)}function hc(t,e,n=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),gc(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function pc(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function xk(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function ag(t,e){let n=hE(t);e.validator!==null?t.setValidators(KD(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=pE(t);e.asyncValidator!==null?t.setAsyncValidators(KD(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();pc(e._rawValidators,i),pc(e._rawAsyncValidators,i)}function gc(t,e){let n=!1;if(t!==null){if(e.validator!==null){let i=hE(t);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.validator);o.length!==i.length&&(n=!0,t.setValidators(o))}}if(e.asyncValidator!==null){let i=pE(t);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(n=!0,t.setAsyncValidators(o))}}}let r=()=>{};return pc(e._rawValidators,r),pc(e._rawAsyncValidators,r),n}function Nk(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&vE(t,e)})}function Rk(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&vE(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function vE(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function Ok(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function Pk(t,e){t==null,ag(t,e)}function Fk(t,e){return gc(t,e)}function yE(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function kk(t){return Object.getPrototypeOf(t.constructor)===uk}function Lk(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function _E(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(o=>{o.constructor===jn?n=o:kk(o)?r=o:i=o}),i||r||n||null}function Vk(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function XD(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function eE(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var Qe=class extends fc{constructor(e=null,n,r){super(gE(n),mE(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),mc(n)&&(n.nonNullable||n.initialValueIsDefault)&&(eE(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){XD(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){XD(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){eE(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var jk=t=>t instanceof Qe;var Bi=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=we({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let t=e;return t})();var lg=new I(""),Bk={provide:Sr,useExisting:or(()=>cg)},cg=(()=>{let e=class e extends Sr{set isDisabled(r){}constructor(r,i,o,s,a){super(),this._ngModelWarningConfig=s,this.callSetDisabledState=a,this.update=new pe,this._ngModelWarningSent=!1,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=_E(this,o)}ngOnChanges(r){if(this._isControlChanged(r)){let i=r.form.previousValue;i&&hc(i,this,!1),rg(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}yE(r,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&hc(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_isControlChanged(r){return r.hasOwnProperty("form")}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(i){return new(i||e)(C(og,10),C(sg,10),C(ig,10),C(lg,8),C(vc,8))},e.\u0275dir=we({type:e,selectors:[["","formControl",""]],inputs:{form:[le.None,"formControl","form"],isDisabled:[le.None,"disabled","isDisabled"],model:[le.None,"ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[co([Bk]),Jt,Kt]});let t=e;return t})(),$k={provide:Li,useExisting:or(()=>Mr)},Mr=(()=>{let e=class e extends Li{constructor(r,i,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new pe,this._setValidators(r),this._setAsyncValidators(i)}ngOnChanges(r){this._checkFormPresent(),r.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(gc(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(r){let i=this.form.get(r.path);return rg(i,r,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(r),i}getControl(r){return this.form.get(r.path)}removeControl(r){hc(r.control||null,r,!1),Vk(this.directives,r)}addFormGroup(r){this._setUpFormContainer(r)}removeFormGroup(r){this._cleanUpFormContainer(r)}getFormGroup(r){return this.form.get(r.path)}addFormArray(r){this._setUpFormContainer(r)}removeFormArray(r){this._cleanUpFormContainer(r)}getFormArray(r){return this.form.get(r.path)}updateModel(r,i){this.form.get(r.path).setValue(i)}onSubmit(r){return this.submitted=!0,Lk(this.form,this.directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submitted=!1}_updateDomValue(){this.directives.forEach(r=>{let i=r.control,o=this.form.get(r.path);i!==o&&(hc(i||null,r),jk(o)&&(rg(o,r,this.callSetDisabledState),r.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(r){let i=this.form.get(r.path);Pk(i,r),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(r){if(this.form){let i=this.form.get(r.path);i&&Fk(i,r)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){ag(this.form,this),this._oldForm&&gc(this._oldForm,this)}_checkFormPresent(){this.form}};e.\u0275fac=function(i){return new(i||e)(C(og,10),C(sg,10),C(vc,8))},e.\u0275dir=we({type:e,selectors:[["","formGroup",""]],hostBindings:function(i,o){i&1&&De("submit",function(a){return o.onSubmit(a)})("reset",function(){return o.onReset()})},inputs:{form:[le.None,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[co([$k]),Jt,Kt]});let t=e;return t})();var Uk={provide:Sr,useExisting:or(()=>Tr)},Tr=(()=>{let e=class e extends Sr{set isDisabled(r){}constructor(r,i,o,s,a){super(),this._ngModelWarningConfig=a,this._added=!1,this.name=null,this.update=new pe,this._ngModelWarningSent=!1,this._parent=r,this._setValidators(i),this._setAsyncValidators(o),this.valueAccessor=_E(this,s)}ngOnChanges(r){this._added||this._setUpControl(),yE(r,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}get path(){return Ak(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(i){return new(i||e)(C(Li,13),C(og,10),C(sg,10),C(ig,10),C(lg,8))},e.\u0275dir=we({type:e,selectors:[["","formControlName",""]],inputs:{name:[le.None,"formControlName","name"],isDisabled:[le.None,"disabled","isDisabled"],model:[le.None,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[co([Uk]),Jt,Kt]});let t=e;return t})();var wE=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=pt({type:e}),e.\u0275inj=ht({});let t=e;return t})();var $i=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:vc,useValue:r.callSetDisabledState??yc}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=pt({type:e}),e.\u0275inj=ht({imports:[wE]});let t=e;return t})(),Ui=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:lg,useValue:r.warnOnNgModelWithFormControl??"always"},{provide:vc,useValue:r.callSetDisabledState??yc}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=pt({type:e}),e.\u0275inj=ht({imports:[wE]});let t=e;return t})();var Hk=["scrollArea"],Wk=t=>({active:t}),Gk=(t,e)=>({outgoing:t,incoming:e});function zk(t,e){if(t&1){let n=Fa();E(0,"a",26),sr(1,"async"),De("click",function(){let i=ni(n).index,o=si();return ri(o.selectChat(i))}),E(2,"div",15)(3,"span",16),q(4),T(),E(5,"div",17)(6,"h6",18),q(7),T()()()()}if(t&2){let n=e.$implicit,r=e.index,i=si();X("ngClass",xy(5,Wk,r==ar(1,3,i.chatIndex$))),L(4),Xt(n.fullNamePartner==null?null:n.fullNamePartner.charAt(0)),L(3),Xt(n.fullNamePartner)}}function qk(t,e){if(t&1){let n=Fa();E(0,"a",29)(1,"div",15)(2,"span",16),q(3),T(),E(4,"div",17)(5,"h6",18),q(6),T(),E(7,"button",30),De("click",function(){let i=ni(n).$implicit,o=si(2);return ri(o.sayHi(i))}),cd(),E(8,"svg",31),de(9,"path",32),T()()()()()}if(t&2){let n=e.$implicit;L(3),Xt(n.fullName==null?null:n.fullName.charAt(0)),L(3),Xt(n.fullName)}}function Yk(t,e){if(t&1&&(E(0,"div",27),de(1,"input",5),E(2,"div",6),Oe(3,qk,10,2,"a",28),sr(4,"async"),T()()),t&2){let n=si();L(),X("formControl",n.searchUser),L(2),X("ngForOf",ar(4,2,n.filterListuser$))}}function Qk(t,e){if(t&1&&(E(0,"div",33)(1,"div",34),sr(2,"async"),sr(3,"async"),q(4),E(5,"p",35),q(6),sr(7,"timeAgo"),T()()()),t&2){let n=e.$implicit,r=si();L(),X("ngClass",Ny(9,Gk,n.sender==ar(2,3,r.username$),n.sender!=ar(3,5,r.username$))),L(3),ka(" ",n.body," "),L(2),Xt(ar(7,7,r.getTime(n)))}}var CE=(()=>{let e=class e{constructor(r,i,o){this.firebaseService=r,this.localStorageService=i,this.router=o,this.isModalVisible=!1,this.rfMessages=new Vn({body:new Qe("",ot.required)}),this.username$=new ie(""),this.listChat$=new ie([]),this.listUser$=new ie([]),this.chatIndex$=new ie(0),this.user={},this.searchControl=new Qe(""),this.searchUser=new Qe(""),this.combinedUser$=an(this.listUser$,this.searchUser.valueChanges.pipe(Wn(""))),this.combined$=an(this.listChat$,this.searchControl.valueChanges.pipe(Wn(""))),this.filterListChat$=this.combined$.pipe(R(([s,a])=>s.filter(l=>l.fullNamePartner?.includes(a)))),this.filterListuser$=this.combinedUser$.pipe(R(([s,a])=>s.filter(l=>l.fullName?.includes(a))))}ngOnInit(){this.getListChat(),this.getListUser(),setTimeout(()=>{this.scrollToBottom()},1e3)}scrollToBottom(){this.scroll.nativeElement.scrollTop=this.scroll.nativeElement.scrollHeight}getListUser(){this.firebaseService.getListUser(r=>{this.listUser$.next(r)})}getListChat(){let r=this.localStorageService.getItem("user");this.user=r??{},this.username$.next(r?.username??""),this.firebaseService.getListChat(r?.username??"",i=>{this.listChat$.next(i)})}selectChat(r){this.chatIndex$.next(r),setTimeout(()=>{this.scrollToBottom()},350)}getTime(r){return String(r.time)??""}getFullNamePartner(){let r=this.chatIndex$.value;return this.listChat$.value[r]?.fullNamePartner??""}getCharFirst(r){return r.charAt(0)??""}getMessages(){let r=this.chatIndex$.value;return console.log(this.listChat$.value[r]?.messages),this.listChat$.value[r]?.messages.sort((i,o)=>{let s=new Date(String(i?.time)??""),a=new Date(String(o.time));return s.getTime()-a.getTime()})??[]}sendMessages(){let r=this.chatIndex$.value,i=this.listChat$.value[r],o=this.rfMessages.value.body;this.firebaseService.sendMessages(this.user.username??"",i?.partner??"",this.user.fullName??"",i.fullNamePartner??"",o??""),this.rfMessages.patchValue({body:""}),setTimeout(()=>{this.scrollToBottom()},250)}sayHi(r){this.firebaseService.sendMessages(this.user.username??"",r?.username??"",this.user.fullName??"",r.fullName??"","Hello!")}toggleModal(){this.isModalVisible=!this.isModalVisible,this.searchControl.setValue(""),this.searchUser.setValue("")}logOut(){this.localStorageService.clear(),this.router.navigate(["/login"])}};e.\u0275fac=function(i){return new(i||e)(C(Fi),C(ac),C(qe))},e.\u0275cmp=xt({type:e,selectors:[["lib-home"]],viewQuery:function(i,o){if(i&1&&Ty(Hk,7),i&2){let s;Ld(s=Vd())&&(o.scroll=s.first)}},standalone:!0,features:[Nt],decls:31,vars:10,consts:[["scrollArea",""],[1,"container-fluid","h-100"],[1,"m-2",3,"click"],[1,"row","h-100"],[1,"col-md-3","border-right","p-0","position-relative"],["type","text","placeholder","Search",1,"form-control",3,"formControl"],[1,"list-group","mt-2"],["class","list-group-item list-group-item-action overflow-auto ",3,"ngClass","click",4,"ngFor","ngForOf"],["id","user-modal","class","position-absolute z-3 bg-modal custom-modal overflow-auto",4,"ngIf"],["id","add-chat","type","button",1,"btn","btn-primary","btn-circle","position-absolute","z-3",2,"margin-top","640px","margin-left","330px",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-plus"],["d","M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4"],[1,"col-md-9","p-0"],[1,"d-flex","flex-column","h-100"],[1,"chat-header","border-bottom","p-3"],[1,"d-flex","align-items-center"],[1,"avatar","text-bg-primary","me-2"],[1,"flex-grow-1"],[1,"mb-0"],["id","scroll-area",1,"chat-body","flex-grow-1","overflow-auto","p-3",2,"height","85vh"],["class","message-left mb-3",4,"ngFor","ngForOf"],[1,"chat-footer","border-top","p-3"],[3,"ngSubmit","formGroup"],[1,"input-group"],["type","text","placeholder","Enter","formControlName","body",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"list-group-item","list-group-item-action","overflow-auto",3,"click","ngClass"],["id","user-modal",1,"position-absolute","z-3","bg-modal","custom-modal","overflow-auto"],["class","list-group-item list-group-item-action",4,"ngFor","ngForOf"],[1,"list-group-item","list-group-item-action"],["type","button",1,"btn","btn-secondar","btn-circle",2,"margin-left","8vw",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-send-fill"],["d","M15.964.686a.5.5 0 0 0-.65-.65L.767 5.855H.766l-.452.18a.5.5 0 0 0-.082.887l.41.26.001.002 4.995 3.178 3.178 4.995.002.002.26.41a.5.5 0 0 0 .886-.083zm-1.833 1.89L6.637 10.07l-.215-.338a.5.5 0 0 0-.154-.154l-.338-.215 7.494-7.494 1.178-.471z"],[1,"message-left","mb-3"],[1,"message-bubble","message-body",3,"ngClass"],[1,"message-time"]],template:function(i,o){if(i&1){let s=Fa();E(0,"div",1)(1,"a",2),De("click",function(){return ni(s),ri(o.logOut())}),q(2,"Log Out"),T(),E(3,"div",3)(4,"div",4),de(5,"input",5),E(6,"div",6),Oe(7,zk,8,7,"a",7),sr(8,"async"),T(),Oe(9,Yk,5,4,"div",8),E(10,"button",9),De("click",function(){return ni(s),ri(o.toggleModal())}),cd(),E(11,"svg",10),de(12,"path",11),T()()(),Dv(),E(13,"div",12)(14,"div",13)(15,"div",14)(16,"div",15)(17,"span",16),q(18),T(),E(19,"div",17)(20,"h6",18),q(21),T()()()(),E(22,"div",19,0),Oe(24,Qk,8,12,"div",20),T(),E(25,"div",21)(26,"form",22),De("ngSubmit",function(){return ni(s),ri(o.sendMessages())}),E(27,"div",23),de(28,"input",24),E(29,"button",25),q(30,"Send"),T()()()()()()()()}i&2&&(L(5),X("formControl",o.searchControl),L(2),X("ngForOf",ar(8,8,o.filterListChat$)),L(2),X("ngIf",o.isModalVisible),L(9),Xt(o.getCharFirst(o.getFullNamePartner())),L(3),Xt(o.getFullNamePartner()),L(3),X("ngForOf",o.getMessages()),L(2),X("formGroup",o.rfMessages),L(3),X("disabled",o.rfMessages.invalid))},dependencies:[cr,Ky,Zy,ci,Jy,QD,eg,$i,Bi,jn,Vi,ji,Ui,cg,Mr,Tr,Sn],styles:['.message-body[_ngcontent-%COMP%]{background-color:#f7f7f7;border-radius:10px;padding:15px;margin:10px 0;position:relative}.message-body.outgoing[_ngcontent-%COMP%]{background-color:#e8f1ff;float:right;clear:both}.message-body.outgoing[_ngcontent-%COMP%]:before{content:"";position:absolute;top:5px;right:-10px;border-style:solid;border-width:0 10px 10px 0;border-color:transparent #e8f1ff transparent transparent}.message-body.incoming[_ngcontent-%COMP%]{float:left;clear:both}.message-body.incoming[_ngcontent-%COMP%]:before{content:"";position:absolute;top:5px;left:-10px;border-style:solid;border-width:0 10px 10px 0;border-color:transparent #f7f7f7 transparent transparent}.message-body[_ngcontent-%COMP%]   .message-time[_ngcontent-%COMP%]{font-size:12px;color:#999}.btn-circle.btn-xl[_ngcontent-%COMP%]{width:70px;height:70px;padding:10px 16px;border-radius:10px;font-size:24px;line-height:1.33}.btn-circle[_ngcontent-%COMP%]{width:30px;height:30px;padding:6px 0;border-radius:10px;text-align:center;font-size:12px;line-height:1.42857}.custom-modal[_ngcontent-%COMP%]{width:300px;height:350px;margin-top:310px;margin-left:50px;border-radius:10px}.bg-modal[_ngcontent-%COMP%]{background-color:#bbe6fe}.avatar[_ngcontent-%COMP%]{--bs-avatar-width: 32px;--bs-avatar-bg: var(--ds-background-neutral-bold);position:relative;width:var(--bs-avatar-width);height:var(--bs-avatar-width);display:inline-flex;align-items:center;justify-content:center;color:var(--ds-text-inverse);line-height:1;font-size:14px;border-radius:50%;-o-object-fit:cover;object-fit:cover;background-color:var(--bs-avatar-bg)}'],changeDetection:0});let t=e;return t})();var Kk=()=>["/register"];function Zk(t,e){t&1&&(E(0,"div",16)(1,"span"),q(2,"Username is required"),T()())}function Jk(t,e){t&1&&(E(0,"div",16)(1,"span"),q(2,"Password is required"),T()())}var DE=(()=>{let e=class e{constructor(r,i,o){this.firebaseService=r,this.localStorageService=i,this.router=o,this.rfLogin=new Vn({username:new Qe("",ot.required),password:new Qe("",ot.required)})}onSubmit(){this.firebaseService.login(this.rfLogin.value.username??"",this.rfLogin.value.password??"",r=>{this.localStorageService.setItem("user",r),this.router.navigate(["/home"])})}};e.\u0275fac=function(i){return new(i||e)(C(Fi),C(ac),C(qe))},e.\u0275cmp=xt({type:e,selectors:[["lib-login"]],standalone:!0,features:[Nt],decls:23,vars:10,consts:[[1,"container","mt-5"],[1,"row","justify-content-center"],[1,"col-md-6"],[1,"card"],[1,"card-header"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"form-group","my-2"],["for","username"],["type","text","id","username","placeholder","Enter username","formControlName","username",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["for","password"],["type","password","id","password","placeholder","Password","formControlName","password",1,"form-control"],[1,"d-flex","py-2","justify-content-between"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"my-auto",3,"routerLink"],[1,"invalid-feedback"]],template:function(i,o){i&1&&(E(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),q(5,"Login"),T(),E(6,"div",5)(7,"form",6),De("ngSubmit",function(){return o.onSubmit()}),E(8,"div",7)(9,"label",8),q(10,"Username"),T(),de(11,"input",9),Oe(12,Zk,3,0,"div",10),T(),E(13,"div",7)(14,"label",11),q(15,"Password"),T(),de(16,"input",12),Oe(17,Jk,3,0,"div",10),T(),E(18,"div",13)(19,"button",14),q(20,"Login"),T(),E(21,"a",15),q(22,"Register"),T()()()()()()()()),i&2&&(L(7),X("formGroup",o.rfLogin),L(4),tt("is-invalid",o.rfLogin.controls.username.errors&&(o.rfLogin.controls.username.dirty||o.rfLogin.controls.username.touched)),L(),X("ngIf",o.rfLogin.controls.username.errors&&(o.rfLogin.controls.username.dirty||o.rfLogin.controls.username.touched)),L(4),tt("is-invalid",o.rfLogin.controls.password.errors&&(o.rfLogin.controls.password.dirty||o.rfLogin.controls.password.touched)),L(),X("ngIf",o.rfLogin.controls.password.errors&&(o.rfLogin.controls.password.dirty||o.rfLogin.controls.password.touched)),L(2),X("disabled",o.rfLogin.invalid),L(2),X("routerLink",La(9,Kk)))},dependencies:[Sn,dl,cr,ci,$i,Bi,jn,Vi,ji,Ui,Mr,Tr],encapsulation:2});let t=e;return t})();var Xk=()=>["/login"];function e1(t,e){t&1&&(E(0,"div",20)(1,"span"),q(2,"Username is required"),T()())}function t1(t,e){t&1&&(E(0,"div",20)(1,"span"),q(2,"Full Name is required"),T()())}function n1(t,e){t&1&&(E(0,"div",20)(1,"span"),q(2,"Password is required"),T()())}function r1(t,e){t&1&&(E(0,"div",20)(1,"span"),q(2,"Confirm Pasword is required"),T()())}var EE=(()=>{let e=class e{constructor(r){this.firebaseService=r,this.rfRegister=new Vn({username:new Qe("",ot.required),password:new Qe("",ot.required),fullName:new Qe("",ot.required),confirmPasword:new Qe("",ot.required)})}onSubmit(){let r={username:this.rfRegister.value.username??"",fullName:this.rfRegister.value.fullName??"",password:this.rfRegister.value.password??""};this.rfRegister.value.password==this.rfRegister.value.confirmPasword?this.firebaseService.register(r):alert("Please check password and confirm password")}};e.\u0275fac=function(i){return new(i||e)(C(Fi))},e.\u0275cmp=xt({type:e,selectors:[["lib-register"]],standalone:!0,features:[Nt],decls:33,vars:16,consts:[[1,"container","mt-5"],[1,"row","justify-content-center"],[1,"col-md-6"],[1,"card"],[1,"card-header"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"form-group","my-2"],["for","username"],["type","text","id","username","placeholder","Enter username","formControlName","username",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["for","fullName"],["type","text","id","fullName","placeholder","Enter Full Name","formControlName","fullName",1,"form-control"],["for","password"],["type","password","id","password","placeholder","Password","formControlName","password",1,"form-control"],["for","confirm-pasword"],["type","password","id","confirm-pasword","placeholder","Confirm Pasword","formControlName","confirmPasword",1,"form-control"],[1,"d-flex","py-2","justify-content-between"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"my-auto",3,"routerLink"],[1,"invalid-feedback"]],template:function(i,o){i&1&&(E(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),q(5,"Register"),T(),E(6,"div",5)(7,"form",6),De("ngSubmit",function(){return o.onSubmit()}),E(8,"div",7)(9,"label",8),q(10,"Username"),T(),de(11,"input",9),Oe(12,e1,3,0,"div",10),T(),E(13,"div",7)(14,"label",11),q(15,"Full Name"),T(),de(16,"input",12),Oe(17,t1,3,0,"div",10),T(),E(18,"div",7)(19,"label",13),q(20,"Password"),T(),de(21,"input",14),Oe(22,n1,3,0,"div",10),T(),E(23,"div",7)(24,"label",15),q(25,"Confirm Pasword"),T(),de(26,"input",16),Oe(27,r1,3,0,"div",10),T(),E(28,"div",17)(29,"button",18),q(30,"Register"),T(),E(31,"a",19),q(32,"Login"),T()()()()()()()()),i&2&&(L(7),X("formGroup",o.rfRegister),L(4),tt("is-invalid",o.rfRegister.controls.username.errors&&(o.rfRegister.controls.username.dirty||o.rfRegister.controls.username.touched)),L(),X("ngIf",o.rfRegister.controls.username.errors&&(o.rfRegister.controls.username.dirty||o.rfRegister.controls.username.touched)),L(4),tt("is-invalid",o.rfRegister.controls.fullName.errors&&(o.rfRegister.controls.fullName.dirty||o.rfRegister.controls.fullName.touched)),L(),X("ngIf",o.rfRegister.controls.fullName.errors&&(o.rfRegister.controls.fullName.dirty||o.rfRegister.controls.fullName.touched)),L(4),tt("is-invalid",o.rfRegister.controls.password.errors&&(o.rfRegister.controls.password.dirty||o.rfRegister.controls.password.touched)),L(),X("ngIf",o.rfRegister.controls.password.errors&&(o.rfRegister.controls.password.dirty||o.rfRegister.controls.password.touched)),L(4),tt("is-invalid",o.rfRegister.controls.confirmPasword.errors&&(o.rfRegister.controls.confirmPasword.dirty||o.rfRegister.controls.confirmPasword.touched)),L(),X("ngIf",o.rfRegister.controls.confirmPasword.errors&&(o.rfRegister.controls.confirmPasword.dirty||o.rfRegister.controls.confirmPasword.touched)),L(2),X("disabled",o.rfRegister.invalid),L(2),X("routerLink",La(15,Xk)))},dependencies:[Sn,dl,cr,ci,$i,Bi,jn,Vi,ji,Ui,Mr,Tr],encapsulation:2});let t=e;return t})();var bE=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:DE},{path:"register",component:EE},{path:"home",component:CE}];var IE={providers:[Q_(bE)]};var SE=(()=>{let e=class e{constructor(){this.title="chat"}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=xt({type:e,selectors:[["app-root"]],standalone:!0,features:[Nt],decls:1,vars:0,template:function(i,o){i&1&&de(0,"router-outlet")},dependencies:[Sn,Uf],styles:["body[_ngcontent-%COMP%]{min-height:100vh;display:flex;flex-direction:column}.footer[_ngcontent-%COMP%]{flex:1 0 auto;margin-top:auto}"]});let t=e;return t})();a_(SE,IE).catch(t=>console.error(t));
